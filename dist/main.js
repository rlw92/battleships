(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{jK:()=>L,o7:()=>P,P4:()=>G,VL:()=>S,hJ:()=>B,yR:()=>w,He:()=>I,w7:()=>A,sq:()=>C});const t={createGrids:(e,t,n)=>{let o=document.createElement("div");o.style.padding="10px",o.style.border=0===n||0===t?"none":"solid black 2px",o.textContent=n,o.style.textAlign="center",0===n&&"0"===e?o.textContent=t:0===t&&"0"!=e&&(o.textContent=e),o.dataset.hit="No",o.dataset.P1hit="N",o.dataset.P2hit="N",o.dataset.letter=e,o.dataset.number=t,o.classList.add("cell"),o.setAttribute("id",o.dataset.letter+o.dataset.number),document.getElementById("gameboard1").appendChild(o)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function n(e,t,n,o){let l=[];if("V"===o){let o=11-n;t>o&&(t=o);for(let o=1;o<n+1;o++)l.push(e+t++)}else if("H"===o){let o=e.charCodeAt(0),r=75-n;o>r&&(o=r),console.log(o),console.log(r);for(let e=1;e<n+1;e++)l.push(String.fromCharCode(o++)+t)}return l}function o(e,t){let n=e,o=t,l=0;for(let e=0;e<o.length;e++)for(let t=0;t<n.length;t++)for(let r=0;r<n[t].coordinates.length;r++)n[t].coordinates[r]===o[e]&&l++;return l=l>0?"Y":"N",l}function l(e,t){this.name=e,this.coordinates=t,this.hitShip=()=>{alert("You struck the "+e+" ship")},this.isSunk=()=>{0===t.length&&alert("You sunk the "+e+" ship")}}let r;const s=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,s=e.target.dataset.number,a=new l("Carrier",n(o,s,2,P));return"0"===s?console.log("Stay in the grid."):(G===A[0]?(t=S,r="p1c"):G===A[1]&&(t=w,r="p2c"),t.push(a)),t},a=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new l("Battleship",n(s,a,3,P));return"0"===a?console.log("Stay in the grid."):(G===A[0]?(t=S,r="p1c"):G===A[1]&&(t=w,r="p2c"),"Y"===o(t,n(s,a,3,P))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},i=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new l("Cruiser",n(s,a,4,P));return"0"===a?console.log("Stay in the grid."):(G===A[0]?(t=S,r="p1c"):G===A[1]&&(t=w,r="p2c"),"Y"===o(t,n(s,a,4,P))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},d=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new l("Submarine",n(s,a,5,P));return"0"===a?console.log("Stay in the grid."):(G===A[0]?(t=S,r="p1c"):G===A[1]&&(t=w,r="p2c"),"Y"===o(t,n(s,a,5,P))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},c=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new l("Destroyer",n(s,a,6,P));return"0"===a?console.log("Stay in the grid."):(G===A[0]?(t=S,r="p1c"):G===A[1]&&(t=w,r="p2c"),"Y"===o(t,n(s,a,6,P))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},g=function(e){let t=e.target.dataset.number,n=e.target.dataset.letter,o="blue";if("V"===P){let e=11-C;t>e&&(t=e),o="0"===t?"white":"grey";for(let e=0;e<C;e++)document.getElementById(n+(+t+e)).style.backgroundColor=o}else if("H"===P){let e=n.charCodeAt(0),o=75-C;e>o&&(e=o);for(let n=0;n<C;n++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="grey"}},u=function(e){e.target.backgroundColor="white";let t=e.target.dataset.number,n=e.target.dataset.letter,o=n+t;if(console.log(o),"V"===P){let e=11-C;t>e&&(t=e);for(let e=0;e<C;e++)document.getElementById(n+(+t+e)).style.backgroundColor="white"}else if("H"===P){let e=n.charCodeAt(0),o=75-C;e>o&&(e=o);for(let n=0;n<C;n++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}},h=function(){let e=B;G===A[0]?e=B:G===A[1]&&(e=I);for(let t=0;t<e.length;t++)console.log(e[t]),document.getElementById(e[t]).style.backgroundColor="red"},m=function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white"},y=function(e){"0"===e.target.dataset.number?e.target.style.backgroundColor="white":e.target.style.backgroundColor="red"},p=function(e){G===A[0]?L=e.target.dataset.P1hit:G===A[1]&&(L=e.target.dataset.P2hit),console.log(L),"Y"===L?e.target.style.backgroundColor="red":"N"===L&&(e.target.style.backgroundColor="white")},v=function(){let e=S;G===A[0]?(e=S,console.log(e)):G===A[1]&&(e=w,console.log(e));for(let t=0;t<e.length;t++)for(let n=0;n<e[t].coordinates.length;n++)document.getElementById(e[t].coordinates[n]).style.backgroundColor="grey"},f=(E=document.getElementById("myModal"),k=document.getElementById("myBtn"),b=document.getElementsByClassName("close")[0],k.onclick=function(){E.style.display="None"},b.onclick=function(){E.style.display="none"},window.onclick=function(e){e.target==E&&(E.style.display="none")},{showModule:function(){E.style.display="block"}});var E,k,b;let C,L,S=[],w=[],B=[],I=[],P="V",A=["player1","player2"],G=A[0],x=S;G===A[0]?x=S:G===A[1]&&(x=w),document.getElementById("pip").textContent=G,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===P?(P="H",document.getElementById("position").textContent="Horizontal"):"H"===P&&(P="V",document.getElementById("position").textContent="Vertical")})),document.getElementById("shwshipos").addEventListener("mouseover",(()=>{m(),v()})),document.getElementById("shwshipos").addEventListener("mouseleave",(()=>{m(),h()}));const Y=()=>{f.showModule(),G===A[0]?(G=A[1],x=w,document.getElementById("pip").textContent=G):G===A[1]?(G=A[0],x=S,document.getElementById("pip").textContent=G):(G=A[0],x=w,document.getElementById("pip").textContent=G),m(),h()};function q(e){console.log(e.target.dataset.letter);let t=S,n=B,o=e.target.dataset.letter,l=e.target.dataset.number,r=o+l;if(console.log(r),console.log(t.length),G===A[0]?(t=w,n=B,L=e.target.dataset.P1hit):G===A[1]&&(t=S,n=I,L=e.target.dataset.P2hit),"0"===l)console.log("Stay in the grid.");else if("Y"===L)console.log("Already been hit, try again.");else{G===A[0]?(t=w,n=B,L=e.target.dataset.P1hit="Y"):G===A[1]&&(t=S,n=I,L=e.target.dataset.P2hit="Y");for(let e=0;e<t.length;e++)for(let n=0;n<t[e].coordinates.length;n++)t[e].coordinates[n]===r&&(console.log(t[e].coordinates),t[e].coordinates.splice(n,1),t[e].hitShip(),t[e].isSunk(),H(),console.log(t[e].coordinates),console.log("Player one sunk ships: 0"),console.log("Player two sunk ships: 0"));n.push(r),console.log("P1 strikes: "+B),console.log("P2 strikes: "+I),Y()}}function H(){let e,t=0,n=S;G===A[0]?(n=w,e="Player One"):G===A[1]&&(n=S,e="Player Two");for(let e=0;e<n.length;e++)0===n[e].coordinates.length&&++t;console.log(t),5===t&&alert(e+" has won!")}function V(){if(x.length>4){C=1,Y();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",V),e[t].style.backgroundColor="white",document.getElementById("ingamebuttons").style.display="block",document.getElementById("positionPara").style.display="none",document.getElementById("Chnge").style.display="none";!function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",q),e[t].style.backgroundColor="white",e[t].removeEventListener("mouseover",g),e[t].removeEventListener("mouseleave",u),e[t].addEventListener("mouseover",y),e[t].addEventListener("mouseleave",p)}()}}const N={p1carrierShip:function(){let e=document.querySelectorAll(".cell");C=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",s),e[t].addEventListener("click",N.p1battleShip),e[t].addEventListener("mouseover",g),e[t].addEventListener("mouseleave",u)},p1battleShip:function(){if(x.length>0){let e=document.querySelectorAll(".cell");C=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",s),e[t].removeEventListener("click",N.p1battleShip),e[t].addEventListener("click",a),e[t].addEventListener("click",N.p1cruiserShip),e[t].addEventListener("mouseover",g),e[t].addEventListener("mouseleave",u)}},p1cruiserShip:function(){if(x.length>1){console.log(x);let e=document.querySelectorAll(".cell");C=4;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",a),e[t].removeEventListener("click",N.p1cruiserShip),e[t].addEventListener("click",i),e[t].addEventListener("click",N.p1submarineShip),e[t].addEventListener("mouseover",g),e[t].addEventListener("mouseleave",u)}},p1submarineShip:function(){if(x.length>2){let e=document.querySelectorAll(".cell");C=5;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",N.p1submarineShip),e[t].addEventListener("click",d),e[t].addEventListener("click",N.p1destroyerShip),e[t].addEventListener("mouseover",g),e[t].addEventListener("mouseleave",u)}},p1destroyerShip:function(){if(x.length>3){let e=document.querySelectorAll(".cell");C=6;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",N.p1destroyerShip),e[t].addEventListener("click",c),G===A[1]?e[t].addEventListener("click",V):G===A[0]&&e[t].addEventListener("click",N.loop),e[t].addEventListener("mouseover",g),e[t].addEventListener("mouseleave",u)}},loop:function(){if(x.length>4){Y();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",N.loop),e[t].style.backgroundColor="white";N.p1carrierShip()}}};t.createGameboard(),N.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMxQ1EsRUFBTXRELEdBQUdzRSxpQkFBaUIsYUFBYXhCLEtBd0J5QzBDLEtBbkJwRixXQUNJLEdBQUduQixFQUFLakUsT0FBTyxFQUFFLENBSXJCbUUsSUFDSSxJQUFJakIsRUFBUXpFLFNBQVMwRSxpQkFBaUIsU0FFdEMsSUFBSSxJQUFJdkQsRUFBRSxFQUFFQSxFQUFFc0QsRUFBTWxELE9BQU9KLElBQ3ZCc0QsRUFBTXRELEdBQUdnRixvQkFBb0IsUUFBUW5DLEdBQ3JDUyxFQUFNdEQsR0FBR2dGLG9CQUFvQixRQUFRRSxFQUFnQk0sTUFDckRsQyxFQUFNdEQsR0FBR2pCLE1BQU1tRCxnQkFBa0IsUUFFN0NnRCxFQUFnQkMsbUJBY1o1RyxFQUFnQndCLGtCQUNwQm1GLEVBQWdCQyxpQiIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9jaG9vc2VDb29yZGluYXRlcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9vdmVyTGFwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL3NoaXBzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2RvbS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9tb2RhbC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IEdhbWVib2FyZE1vZHVsZSA9ICgoKSA9PiB7XG5cbiAgICBsZXQgYm9yZCA9IFwic29saWQgYmxhY2sgMnB4XCI7XG4gICAgbGV0IG5vYm9yZCA9IFwibm9uZVwiO1xuICAgIFxuICAgIFxuICAgIGNvbnN0IGNyZWF0ZUdyaWRzID0gKGx0cixubyxpZCkgPT57XG4gICAgbGV0IGdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgZ3JpZC5zdHlsZS5wYWRkaW5nID0gXCIxMHB4XCI7XG4gICAgLy90cnlpbmcgdG8gdGFrZSBvdXQgdGhlIGJvcmRlcmluZyBvZiB0aGUgbm90IGluIHBsYXkgY2VsbHNcbiAgICBpZihpZD09PSAwKXtncmlkLnN0eWxlLmJvcmRlcj1ub2JvcmR9XG4gICAgZWxzZSBpZihubz09PTApe2dyaWQuc3R5bGUuYm9yZGVyID0gbm9ib3JkO31cbiAgICBlbHNle2dyaWQuc3R5bGUuYm9yZGVyID0gYm9yZDt9XG4gICAgXG4gICAgXG4gICAgZ3JpZC50ZXh0Q29udGVudCA9IGlkO1xuICAgIGdyaWQuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICBpZihpZD09PTAgJiYgbHRyPT09XCIwXCIpe2dyaWQudGV4dENvbnRlbnQgPSBub31cbiAgICBlbHNlIGlmKG5vPT09MCAmJiBsdHIhPVwiMFwiKXtncmlkLnRleHRDb250ZW50ID0gbHRyfVxuICAgIGdyaWQuZGF0YXNldC5oaXQgPSBcIk5vXCJcbiAgICBncmlkLmRhdGFzZXQuUDFoaXQ9XCJOXCJcbiAgICBncmlkLmRhdGFzZXQuUDJoaXQ9XCJOXCJcbiAgICBsZXQgbGV0dGVyID0gZ3JpZC5kYXRhc2V0LmxldHRlciA9IGx0cjtcbiAgICBsZXQgbnVtYmVyID0gZ3JpZC5kYXRhc2V0Lm51bWJlciA9IG5vO1xuICAgIC8vc2hvd3Mgd2hpY2ggcGxheWVyIG93bnMgdGhlIGNlbGwvL1xuICAgIC8vbGV0IHBsYXllciA9IGdyaWQuZGF0YXNldC5wbGF5ZXJjZWxsID0gXCJwbGF5ZXJcIitwbHlyO1xuICAgIFxuICAgIC8vY3JlYXRpbmcgYSBjbGFzcyBmb3IgZWFjaCBncmlkIHNvIHdlIGNhbiBhY2Nlc3MgaXQgZnJvbSB0aGUgZnVuY3Rpb25zXG4gICAgZ3JpZC5jbGFzc0xpc3QuYWRkKFwiY2VsbFwiKTtcbiAgICAvL2NyZWF0aW5nIGFuIGlkIHRoYXQgbWF0Y2hlcyBpdHMgY29vcmRpbmF0ZXNcbiAgICBncmlkLnNldEF0dHJpYnV0ZSgnaWQnLGdyaWQuZGF0YXNldC5sZXR0ZXIrZ3JpZC5kYXRhc2V0Lm51bWJlcilcbiAgICBcbiAgICAgICAgIFxuICAgIGxldCBnYW1lYm9hcmQgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lYm9hcmQxXCIpO1xuICAgIFxuICAgIGdhbWVib2FyZC5hcHBlbmRDaGlsZChncmlkKTtcbiAgICBcbiAgICB9XG4gICAgXG4gICAgLy9jcmVhdGUgdGhlIHdob2xlIGdyaWQgd2l0aCBiZWxvdyBmdW5jdGlvblxuICAgIGNvbnN0IGNyZWF0ZUdhbWVib2FyZCA9ICgpID0+e1xuICAgIFxuICAgIGZvcihsZXQgaT0wO2k8MTE7aSsrKXtcbiAgICAgICAgXG4gICAgXG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIjBcIiwwLGkpXG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkFcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQlwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJDXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkRcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJGXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkdcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSFwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJJXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkpcIixpKTtcbiAgICBcbiAgICB9XG4gICAgfVxuICAgIHJldHVybiB7Y3JlYXRlR3JpZHMsY3JlYXRlR2FtZWJvYXJkfVxuICAgIH0pKCk7XG5cbiAgICBleHBvcnR7R2FtZWJvYXJkTW9kdWxlfTsiLCIvL3RoZSBjaG9vb3NlIGNvb3JkaW5hdGVzIGZ1bmN0aW9uXG5mdW5jdGlvbiBjaG9vc2VDcmRudHMoU3RydEx0dHJzLFN0cnRObyxsZW5ndGgsVm9ySCl7XG4gICAgbGV0IGNvb3JkID0gW107XG4gICAgXG4gICAgaWYoVm9ySD09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLWxlbmd0aDtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihTdHJ0Tm8+b3Zlcil7U3RydE5vID0gb3Zlcn1cbiAgICAvL2lmKFZvckg9PT1cIlZlcnRpY2FsXCIpe30gV2lsbCBiZSB0cmVhdGluZyB0aGlzIHRlc3RpbmcgYXMgY29tcGxldGUgdmVydGljYWwgcG9zaXRpb25pbmdcbiAgICBmb3IobGV0IGk9MTtpPGxlbmd0aCsxO2krKyl7XG4gICAgICAgIGNvb3JkLnB1c2goU3RydEx0dHJzICsgU3RydE5vKyspXG4gICAgfVxufVxuXG5lbHNlIGlmKFZvckg9PT1cIkhcIil7XG4gICAgbGV0IEx0ck51bWJlciA9IFN0cnRMdHRycy5jaGFyQ29kZUF0KDApXG4gICAgbGV0IG92ZXIgPSA3NS1sZW5ndGg7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgY29uc29sZS5sb2coTHRyTnVtYmVyKVxuICAgIGNvbnNvbGUubG9nKG92ZXIpXG4gICAgXG4gICAgZm9yKGxldCBpPTE7aTxsZW5ndGgrMTtpKyspe1xuICAgICAgICBjb29yZC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgU3RydE5vKVxuICAgIH1cblxufVxuICAgIHJldHVybiBjb29yZDtcblxufVxuXG5leHBvcnQge2Nob29zZUNyZG50c30iLCIvL2NvZGUgZm9yIGlkZW50aWZ5aW5nIHdoZW4gdGhlIGNob3NlbiBjb29yZGluYXRlcyBvdmVybGFwIFxuLy93aXRoIGNvb3JkaW5hdGVzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWRcblxuXG5cblxuXG5mdW5jdGlvbiBvdmVyTGFwKGEsYil7XG4vL1BsYz0gcGxheWVyIGNvb3JkaW5hdGVzICAgIFxubGV0IHBsYz1hO1xuLy9jcmQgaXMgdGhlIG5ldyBjb29yZGluYXRlc1xubGV0IGNyZCA9Yjtcbi8vdmFyaWFibGUgdG8gcmV0dXJuXG5sZXQgb3ZybGFwPTA7XG5cbmZvcihsZXQgej0wO3o8Y3JkLmxlbmd0aDt6Kyspe1xuZm9yKGxldCBwPTA7cDxwbGMubGVuZ3RoO3ArKyl7XG4gICAgZm9yKGxldCBpPTA7aTxwbGNbcF0uY29vcmRpbmF0ZXMubGVuZ3RoO2krKyl7XG4gICAgaWYocGxjW3BdLmNvb3JkaW5hdGVzW2ldPT09Y3JkW3pdKXtvdnJsYXArK31cbiAgICBcbn1cbn1cbn1cbmlmKG92cmxhcD4wKXtvdnJsYXA9XCJZXCJ9XG4gICAgZWxzZXtvdnJsYXA9XCJOXCJ9XG5yZXR1cm4gb3ZybGFwXG59XG5cbi8qXG5cbi8vc2Vjb25kIGF0dGVtcHQgZHVtYmluZyBpdCBkb3duXG5mdW5jdGlvbiBvdmVyTGFwKGEsYil7XG4gICAgLy9QbGM9IHBsYXllciBjb29yZGluYXRlcyAgICBcbiAgICBsZXQgcGxjPWE7XG4gICAgLy9jcmQgaXMgdGhlIG5ldyBjb29yZGluYXRlc1xuICAgIGxldCBjcmQgPWI7XG4gICAgLy92YXJpYWJsZSB0byByZXR1cm5cbiAgICBsZXQgb3ZybGFwID0wO1xuICAgIFxuICAgIGZvcihsZXQgcD0wO3A8cGxjLmxlbmd0aDtwKyspe1xuICAgIGZvcihsZXQgej0wO3o8Y3JkLmxlbmd0aDt6Kyspe1xuICAgICAgICBpZihwbGNbcF09PT1jcmRbel0pe292cmxhcCsrfVxuICAgICAgICBcbiAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmKG92cmxhcD4wKXtvdnJsYXA9XCJZXCJ9XG4gICAgZWxzZXtvdnJsYXA9XCJOXCJ9XG4gICAgcmV0dXJuIG92cmxhcFxuICAgIH1cbiAgICAqL1xuXG5leHBvcnQge292ZXJMYXB9IiwiaW1wb3J0e3BpcCxkaXJlY3Rpb24scGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwbGF5ZXJCYXNlfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0e2Nob29zZUNyZG50c30gZnJvbSAnLi9jaG9vc2VDb29yZGluYXRlcydcbmltcG9ydHtvdmVyTGFwfSBmcm9tICcuL292ZXJMYXAnXG5cblxuXG5mdW5jdGlvbiBzaGlwZmFjdG9yeShuYW1lLGNvb3JkaW5hdGVzKXtcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy5jb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzXG4gICAgdGhpcy5oaXRTaGlwID0gKCk9PnthbGVydChcIllvdSBzdHJ1Y2sgdGhlIFwiICsgbmFtZSArIFwiIHNoaXBcIil9XG4gICAgdGhpcy5pc1N1bmsgPSAoKSA9PntpZihjb29yZGluYXRlcy5sZW5ndGg9PT0wKXthbGVydChcIllvdSBzdW5rIHRoZSBcIisgbmFtZSArXCIgc2hpcFwiKTt9fVxuICAgIFxuICB9XG5cbiAgbGV0IGNvb3JkaWQ7XG5cblxuICBjb25zdCBjYXJyaWVyID0gKHQpID0+eyAgICBcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQ2FycmllclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDIsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuIFxuICAgIFBDLnB1c2goZ3Vubik7XG4gIFxuICAgICAgXG4gICAgfVxuICAgIHJldHVybiBQQztcbiAgICB9XG5cbiAgY29uc3QgYmF0dGxlc2hpcCA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQmF0dGxlc2hpcFwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMyxkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgZWxzZXsgXG4gICAgUEMucHVzaChndW5uKTtcbiAgICBcblxuICAgIFxuICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBjcnVpc2VyID0gKHQpID0+e1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDcnVpc2VyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihudW1iZXI9PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNle1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw0LGRpcmVjdGlvbikpPT09XCJZXCIpe2FsZXJ0KFwiVGhlc2UgdGlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWQsIHBsZWFzZSBjaG9vc2UgZGlmZmVyZW50IHRpbGVzXCIpfVxuICAgIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgXG5cbiAgICBcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBzdWJtYXJpbmUgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIlN1Ym1hcmluZVwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDUsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNSxkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgIFxuICAgIFxuICAgIH19XG4gICAgcmV0dXJuIFBDO1xuICB9XG4gIGNvbnN0IGRlc3Ryb3llciA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiRGVzdHJveWVyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihudW1iZXI9PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNle1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw2LGRpcmVjdGlvbikpPT09XCJZXCIpe2FsZXJ0KFwiVGhlc2UgdGlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWQsIHBsZWFzZSBjaG9vc2UgZGlmZmVyZW50IHRpbGVzXCIpfVxuICAgIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG5cbiAgICBcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuXG4gIGV4cG9ydCB7c2hpcGZhY3RvcnksY2FycmllcixiYXR0bGVzaGlwLGNydWlzZXIsc3VibWFyaW5lLGRlc3Ryb3llcn0iLCJpbXBvcnQge3NxLGRpcmVjdGlvbixwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBpcCxwbGF5ZXIxc3RyaWtlcyxwbGF5ZXIyc3RyaWtlcyxwbGF5ZXJCYXNlLFBoaXR9IGZyb20gJy4vaW5kZXgnXG5jb25zdCBkb21Nb2R1bGUgPSAoKCkgPT57XG4vL2Z1bmN0aW9uIGZvciBoaWdobGlnaHRpbmcgc3F1YXJlcyB3aGVuIGhvdmVyaW5nXG5mdW5jdGlvbiBob3Zlcih0KXtcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xubGV0IGNvbG9yID0gXCJibHVlXCI7XG5cbmlmKGRpcmVjdGlvbj09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKG51bWI+b3Zlcil7bnVtYiA9IG92ZXJ9XG4gICAgaWYobnVtYj09PVwiMFwiKXtjb2xvciA9IFwid2hpdGVcIn1cbiAgICBlbHNle2NvbG9yPVwiZ3JleVwifVxuZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGV0dGVycisoK251bWIraSkpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yfX1cbmVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPWxldHRlcnIuY2hhckNvZGVBdCgwKVxuICAgIGxldCBvdmVyID0gNzUtc3E7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgbnVtYikuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwiZ3JleVwifVxufVxufVxuXG4vL2Z1bmN0aW9uIGZvciByZXR1cm5pbmcgc3F1YXJlIGNvbG9yIHRvIHdoaXRlIGFmdGVyIGxlYXZpbmdcbmZ1bmN0aW9uIGxlYXZlKHQpe3QudGFyZ2V0LmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xubGV0IGhpdCA9IGxldHRlcnIrbnVtYjtcbmNvbnNvbGUubG9nKGhpdCk7XG5cbmlmKGRpcmVjdGlvbj09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKG51bWI+b3Zlcil7bnVtYiA9IG92ZXJ9XG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCJ9fVxuICAgIGVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgICAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICAgICAgbGV0IG92ZXIgPSA3NS1zcTtcbiAgICAgICAgXG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBudW1iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwifVxuICAgIH1cblxuICAgIFxuICAgIH1cblxuICAgIFxuICAgXG4gICAgICAvL2Z1bmN0aW9uIHRoYXQgYWxsb3dzIHVzIHRvIHVwZGF0ZSB0aWxlcyB3aXRob3V0IGNhcnJ5aW5nIHByZXZpb3VzIHRpbGVzIG92ZXJcbiAgICAgIGZ1bmN0aW9uIHdoaXRlT3V0KCl7XG4gICAgICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO31cbiAgICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBhdHRhY2tCb2FyZCgpe1xuICAgICAgICBsZXQgc3RyaWtlID0gcGxheWVyMXN0cmlrZXM7XG4gICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7c3RyaWtlPXBsYXllcjFzdHJpa2VzfVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtzdHJpa2U9cGxheWVyMnN0cmlrZXN9ICAgIFxuICAgIGZvcihsZXQgaT0wO2k8c3RyaWtlLmxlbmd0aDtpKyspe1xuICAgICAgICBjb25zb2xlLmxvZyhzdHJpa2VbaV0pXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0cmlrZVtpXSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwbGF5ZXJCb2FyZCgpe1xuICAgICAgICBsZXQgc2hvdyA9IHBsYXllcjFjb29yZDtcbiAgICAgICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtzaG93PXBsYXllcjFjb29yZDtjb25zb2xlLmxvZyhzaG93KX1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7c2hvdz1wbGF5ZXIyY29vcmQ7IGNvbnNvbGUubG9nKHNob3cpfSBcbiAgICBmb3IobGV0IGk9MDtpPHNob3cubGVuZ3RoO2krKyl7XG4gICAgICAgIGZvcihsZXQgaWk9MDtpaTxzaG93W2ldLmNvb3JkaW5hdGVzLmxlbmd0aDtpaSsrKXtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2hvd1tpXS5jb29yZGluYXRlc1tpaV0pLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZXlcIjtcbiAgICAgICAgICAgIFxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgICAgXG4gICAgfVxuXG4gICAgLy9mdW5jdGlvbnMgZm9yIHdoZW4gdGhlIGhpdCBmdW5jdGlvbiBpcyBpbiBwbGF5XG4gICAgZnVuY3Rpb24gaGl0SG92ZXIodCl7XG4gICAgICAgIGlmKHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyPT09XCIwXCIpXG57dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIn1lbHNle3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInJlZFwifVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGl0TGVhdmUodCl7XG4gICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAxaGl0fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDJoaXR9ICBcbiAgICBjb25zb2xlLmxvZyhQaGl0KVxuICAgICAgICBpZihQaGl0PT09XCJZXCIpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInJlZFwifVxuICAgICAgICBlbHNlIGlmKFBoaXQ9PT1cIk5cIil7dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwifVxuICAgIH1cblxucmV0dXJuIHtob3ZlcixsZWF2ZSxhdHRhY2tCb2FyZCx3aGl0ZU91dCxoaXRIb3ZlcixoaXRMZWF2ZSxwbGF5ZXJCb2FyZH1cbn0pKCk7XG5cblxuZXhwb3J0e2RvbU1vZHVsZX0iLCJcbmNvbnN0IG1vZGFsTW9kdWxlID0gKCgpID0+e1xuLy8gR2V0IHRoZSBtb2RhbFxudmFyIG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteU1vZGFsXCIpO1xuXG4vLyBHZXQgdGhlIGJ1dHRvbiB0aGF0IG9wZW5zIHRoZSBtb2RhbFxudmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlCdG5cIik7XG5cbi8vIEdldCB0aGUgPHNwYW4+IGVsZW1lbnQgdGhhdCBjbG9zZXMgdGhlIG1vZGFsXG52YXIgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZVwiKVswXTtcblxuLy8gV2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGJ1dHRvbiwgb3BlbiB0aGUgbW9kYWxcbmJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIk5vbmVcIjtcbn1cblxuLy8gV2hlbiB0aGUgdXNlciBjbGlja3Mgb24gPHNwYW4+ICh4KSwgY2xvc2UgdGhlIG1vZGFsXG5zcGFuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xufVxuXG4vLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyBhbnl3aGVyZSBvdXRzaWRlIG9mIHRoZSBtb2RhbCwgY2xvc2UgaXRcbndpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgaWYgKGV2ZW50LnRhcmdldCA9PSBtb2RhbCkge1xuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaG93TW9kdWxlKCl7XG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbn1cblxucmV0dXJuIHtzaG93TW9kdWxlfVxufSkoKTtcblxuZXhwb3J0IHttb2RhbE1vZHVsZX1cbiIsImltcG9ydCB7R2FtZWJvYXJkTW9kdWxlfSBmcm9tICcuL2dhbWVib2FyZCdcbmltcG9ydCB7Y2FycmllcixiYXR0bGVzaGlwLGNydWlzZXIsc3VibWFyaW5lLGRlc3Ryb3llcn0gZnJvbSAnLi9zaGlwcydcbmltcG9ydCB7ZG9tTW9kdWxlfSBmcm9tICcuL2RvbSdcbmltcG9ydCB7bW9kYWxNb2R1bGV9IGZyb20gJy4vbW9kYWwnXG5cblxuICAvL2Nvb3JkaW5hdGVzIG9mIGVhY2ggcGxheWVycyBzaGlwXG4gIGxldCBwbGF5ZXIxY29vcmQ9W107XG4gIGxldCBwbGF5ZXIyY29vcmQ9W107XG4gIC8vYW1vdW50IG9mIHN1bmsgc2hpcHMgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgZ2FtZSBpcyBvdmVyIG9yIG5vdFxuICBsZXQgcGxheWVyMVN1bmtTaGlwcz0wO1xuICBsZXQgcGxheWVyMlN1bmtTaGlwcz0wO1xuICAvL2Nvb3JkaW5hdGVzIG9mIGVhY2ggdGlsZSBoaXQgYnkgZWFjaCBwbGF5ZXJcbiAgbGV0IHBsYXllcjFzdHJpa2VzPVtdXG4gIGxldCBwbGF5ZXIyc3RyaWtlcz1bXVxuICAvL1Y9VmVydGljYWwsIEg9SG9yaXpvbnRhbFxuICBsZXQgZGlyZWN0aW9uID0gXCJWXCJcbiAgLy9wbGF5ZXIgaW4gcGxheVxuICBsZXQgcGxheWVyQmFzZSA9IFtcInBsYXllcjFcIixcInBsYXllcjJcIl07XG4gIGxldCBwaXAgPSBwbGF5ZXJCYXNlWzBdO1xuICBsZXQgUGNyZCA9IHBsYXllcjFjb29yZDtcbiAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQY3JkID0gcGxheWVyMWNvb3JkO31cbiAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BjcmQgPSBwbGF5ZXIyY29vcmQ7fVxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDtcbiAgLy90aGUgc3F1YXJlcyB0aGF0IG5lZWQgaGlnaGxpZ2h0aW5nIGZvciB0aGUgZG9tXG4gIGxldCBzcTtcbiAgbGV0IFBoaXQ7XG5cblxuICBcbiAgXG5cbi8vYnV0dG9uIHRvIGNoYW5nZSB0aGUgcG9zaXRpb25pbmcgb2YgdGhlIHBsYWNlbWVudFxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJDaG5nZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntpZihkaXJlY3Rpb249PT1cIlZcIil7ZGlyZWN0aW9uPVwiSFwiO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25cIikudGV4dENvbnRlbnQ9XCJIb3Jpem9udGFsXCI7fWVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe2RpcmVjdGlvbj1cIlZcIjtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uXCIpLnRleHRDb250ZW50PVwiVmVydGljYWxcIn19KVxuLy9hdHRhY2tib2FyZCBidXR0b24gdGhhdCBzaG93cyBwb3NpdGlvbnMgd2hlcmUgdGhlIHBsYXllciBoYXMgYXR0YWNrZWRcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2h3c2hpcG9zXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsKCk9Pntkb21Nb2R1bGUud2hpdGVPdXQoKTtcbiAgICBkb21Nb2R1bGUucGxheWVyQm9hcmQoKTtcbiAgICB9KVxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaHdzaGlwb3NcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsKCk9Pntkb21Nb2R1bGUud2hpdGVPdXQoKTtcbiAgICBkb21Nb2R1bGUuYXR0YWNrQm9hcmQoKTt9KVxuXG4vL2Z1bmN0aW9uIGNoYW5nZXMgcGxheWVyXG5jb25zdCBjaGFuUGxheWVyID0gKCk9PntcbiAgICBtb2RhbE1vZHVsZS5zaG93TW9kdWxlKCk7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtwaXAgPSBwbGF5ZXJCYXNlWzFdO1xuICAgICAgICBQY3JkID0gcGxheWVyMmNvb3JkO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe3BpcCA9IHBsYXllckJhc2VbMF07XG4gICAgICAgIFBjcmQgPSBwbGF5ZXIxY29vcmQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICBlbHNle3BpcCA9IHBsYXllckJhc2VbMF07XG4gICAgICAgIFBjcmQ9cGxheWVyMmNvb3JkO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG4gICAgICAgIGRvbU1vZHVsZS53aGl0ZU91dCgpO1xuICAgICAgICBkb21Nb2R1bGUuYXR0YWNrQm9hcmQoKTtcblxufVxuXG5cbi8vYmVsb3cgZnVuY3Rpb25zIG5lZWQgdG8gYmUgZ3JvdXBlZCBpbnRvIGEgbW9kdWxlXG5cbmZ1bmN0aW9uIGhpdCh0KXtjb25zb2xlLmxvZyh0LnRhcmdldC5kYXRhc2V0LmxldHRlcik7XG4gICAgbGV0IFBDID0gcGxheWVyMWNvb3JkO1xuICAgIGxldCBzdHJpa2UgPSBwbGF5ZXIxc3RyaWtlcztcbiAgICBsZXQgTCA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBOID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgIGxldCBoaXRDb29yZCA9IEwrTjtcbiAgICBjb25zb2xlLmxvZyhoaXRDb29yZCk7XG4gICAgY29uc29sZS5sb2coUEMubGVuZ3RoKTsgXG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjJjb29yZDtzdHJpa2U9cGxheWVyMXN0cmlrZXM7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAxaGl0fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0fVxuICAgIGlmKE49PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNlIGlmKFBoaXQ9PT1cIllcIil7Y29uc29sZS5sb2coXCJBbHJlYWR5IGJlZW4gaGl0LCB0cnkgYWdhaW4uXCIpfVxuICAgIGVsc2V7ICAgICAgIFxuICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkO3N0cmlrZT1wbGF5ZXIxc3RyaWtlcztQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDFoaXQ9XCJZXCJ9XG4gICAgICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0PVwiWVwifVxuICAgIGZvcihsZXQgcD0wO3A8UEMubGVuZ3RoO3ArKyl7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8UENbcF0uY29vcmRpbmF0ZXMubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmKFBDW3BdLmNvb3JkaW5hdGVzW2ldPT09aGl0Q29vcmQpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coUENbcF0uY29vcmRpbmF0ZXMpXG4gICAgICAgICAgICBQQ1twXS5jb29yZGluYXRlcy5zcGxpY2UoaSwxKVxuICAgICAgICBQQ1twXS5oaXRTaGlwKCk7XG4gICAgICAgIFBDW3BdLmlzU3VuaygpOyAgICBcbiAgICAgICAgXG4gICAgICAgIGdhbWVPdmVyKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFBDW3BdLmNvb3JkaW5hdGVzKVxuICAgICAgICBjb25zb2xlLmxvZyhcIlBsYXllciBvbmUgc3VuayBzaGlwczogXCIrIHBsYXllcjFTdW5rU2hpcHMpICBcbiAgICAgICAgY29uc29sZS5sb2coXCJQbGF5ZXIgdHdvIHN1bmsgc2hpcHM6IFwiKyBwbGF5ZXIyU3Vua1NoaXBzKSAgXG4gICAgICAgIFxuICAgICAgICB9fVxuICAgIH1zdHJpa2UucHVzaChoaXRDb29yZCkgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUDEgc3RyaWtlczogXCIrIHBsYXllcjFzdHJpa2VzKVxuICAgICAgICBjb25zb2xlLmxvZyhcIlAyIHN0cmlrZXM6IFwiKyBwbGF5ZXIyc3RyaWtlcylcbiAgICAgICAgXG4gICAgY2hhblBsYXllcigpfX1cblxuXG4gZnVuY3Rpb24gZ2FtZU92ZXIoKXtcbiAgICBsZXQgY291bnQgPTA7XG4gICAgbGV0IFBDID0gcGxheWVyMWNvb3JkO1xuICAgIGxldCBwbHI7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjJjb29yZDsgcGxyPVwiUGxheWVyIE9uZVwifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjFjb29yZDsgcGxyPVwiUGxheWVyIFR3b1wifVxuICAgIGZvcihsZXQgaSA9MDtpPFBDLmxlbmd0aDtpKyspe1xuICAgICAgIGlmKFBDW2ldLmNvb3JkaW5hdGVzLmxlbmd0aD09PTApeysrY291bnR9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGNvdW50KTtcbiAgICBpZihjb3VudD09PTUpe2FsZXJ0KCBwbHIrIFwiIGhhcyB3b24hXCIpfVxuICAgIH1cbiAgICBcblxuZnVuY3Rpb24gc3RhcnRHYW1lKCl7XG4gICAgaWYoUGNyZC5sZW5ndGg+NCl7XG4gICAgc3E9MVxuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbmZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG5jZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc3RhcnRHYW1lKVxuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmdhbWVidXR0b25zXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uUGFyYVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn1cbnBsYXlHYW1lKCl9fVxuICAgIFxuICAgIFxuZnVuY3Rpb24gcGxheUdhbWUoKXtcbiAgICBcbiAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbmZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG5cbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxoaXQpXG5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5jZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbmNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhpdEhvdmVyKVxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmhpdExlYXZlKVxuXG5cbn1cbn1cblxuXG5cbi8vU2VsZWN0aW9uIG1vZHVsZVxuY29uc3Qgc2VsZWN0aW9uTW9kdWxlID0gKCgpID0+e1xuICAgIFxuICAgIFxuXG4gICAgICAgIFxuICAgIC8vYWRkcyBhbiBldmVudCBsaXN0ZW5lciB0byBldmVyeSBncmlkIGNlbGwgYWxsb3dpbmcgdXMgdG8gY2hvb3NlIG91ciBjb29yZGluYXRlcyxtYXAgdGhlbSB0byB0aGUgYXJyYXkgdGhlbiBjaGFuZ2UgcGxheWVyXG4gICAgZnVuY3Rpb24gcDFjYXJyaWVyU2hpcCgpe1xuICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT0yO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWJhdHRsZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgZnVuY3Rpb24gcDFiYXR0bGVTaGlwKCl7ICAgXG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+MCl7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9MztcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYXJyaWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFiYXR0bGVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxiYXR0bGVzaGlwKSBcbiAgICAgICAgICAgIC8vaWYgY29vcmRpbmF0ZXMgbWF0Y2ggbGVuZ3RoIG5lZWRlZCBtb3ZlIG9udG8gbmV4dCBwYXJ0XG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxY3J1aXNlclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgZnVuY3Rpb24gcDFjcnVpc2VyU2hpcCgpe1xuXG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjEpe1xuICAgICAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhQY3JkKVxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9NDtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxiYXR0bGVzaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFjcnVpc2VyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY3J1aXNlcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxc3VibWFyaW5lU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHAxc3VibWFyaW5lU2hpcCgpe1xuXG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjIpe1xuICAgICAgICBcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTU7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsY3J1aXNlcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxc3VibWFyaW5lU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc3VibWFyaW5lKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFkZXN0cm95ZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcDFkZXN0cm95ZXJTaGlwKCl7XG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+Myl7XG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT02O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHN1Ym1hcmluZSkgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxZGVzdHJveWVyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbiAgICAgICAgICAgIC8vdGhpcyBkZWNpZGVzIHdoZXRoZXIgdGhlIGdhbWUgc3RhcnRzIGFmdGVyIHBsYXllciB0d28gb3IgdGhlIGNvbXB1dGVyIGhhcyBzZWxlY3RlZCB0aGVpciBncmlkc1xuICAgICAgICAgICAgLy9pZiBub3QgaXQgbG9vcHMgYXJvdW5kXG4gICAgICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe2NlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdGFydEdhbWUpfVxuICAgICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLmxvb3ApIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wKCl7XG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjQpe1xuXG4gICAgICAgIC8vVGhpcyBmdW5jdGlvbiB0dXJucyB0aGUgc2VsZWN0aW9uIHByb2Nlc3Mgb3ZlciB0byBlaXRoZXIgYSBjb21wdXRlciBvciBwbGF5ZXIgMlxuICAgIC8vanVzdCBkb2luZyBwbGF5ZXIgMiBpbXBsZW1ldGF0aW9uIGZvciBub3dcbiAgICBjaGFuUGxheWVyKCk7XG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgIFxuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLmxvb3ApIFxuICAgICAgICAgICAgY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuICAgIH1cbnNlbGVjdGlvbk1vZHVsZS5wMWNhcnJpZXJTaGlwKCk7XG59XG4gICAgfVxuXG5cbiAgICBcbiAgICAgICAgcmV0dXJue3AxY2FycmllclNoaXAscDFiYXR0bGVTaGlwLHAxY3J1aXNlclNoaXAscDFzdWJtYXJpbmVTaGlwLHAxZGVzdHJveWVyU2hpcCxsb29wfVxuICAgIFxuICAgIH0pKCk7XG5cblxuXG5cblxuICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHYW1lYm9hcmQoKTtcbnNlbGVjdGlvbk1vZHVsZS5wMWNhcnJpZXJTaGlwKCk7XG4vL3Rlc3RpbmcgaGl0IGZ1bmN0aW9uXG4vL3BsYXlHYW1lKCk7XG5cblxuXG5leHBvcnQge1BoaXQsc3EsZGlyZWN0aW9uLHBpcCxwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBsYXllckJhc2UsY2hhblBsYXllcixwbGF5ZXIxU3Vua1NoaXBzLHBsYXllcjJTdW5rU2hpcHMscGxheWVyMXN0cmlrZXMscGxheWVyMnN0cmlrZXN9XG5cblxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJHYW1lYm9hcmRNb2R1bGUiLCJjcmVhdGVHcmlkcyIsImx0ciIsIm5vIiwiaWQiLCJncmlkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwYWRkaW5nIiwiYm9yZGVyIiwidGV4dENvbnRlbnQiLCJ0ZXh0QWxpZ24iLCJkYXRhc2V0IiwiaGl0IiwiUDFoaXQiLCJQMmhpdCIsImxldHRlciIsIm51bWJlciIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVHYW1lYm9hcmQiLCJpIiwiY2hvb3NlQ3JkbnRzIiwiU3RydEx0dHJzIiwiU3RydE5vIiwibGVuZ3RoIiwiVm9ySCIsImNvb3JkIiwib3ZlciIsInB1c2giLCJMdHJOdW1iZXIiLCJjaGFyQ29kZUF0IiwiY29uc29sZSIsImxvZyIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIm92ZXJMYXAiLCJhIiwiYiIsInBsYyIsImNyZCIsIm92cmxhcCIsInoiLCJwIiwiY29vcmRpbmF0ZXMiLCJzaGlwZmFjdG9yeSIsIm5hbWUiLCJ0aGlzIiwiaGl0U2hpcCIsImFsZXJ0IiwiaXNTdW5rIiwiY29vcmRpZCIsImNhcnJpZXIiLCJ0IiwidGFyZ2V0IiwiYmFja2dyb3VuZENvbG9yIiwiUEMiLCJndW5uIiwiZGlyZWN0aW9uIiwicGlwIiwicGxheWVyQmFzZSIsInBsYXllcjFjb29yZCIsInBsYXllcjJjb29yZCIsImJhdHRsZXNoaXAiLCJjcnVpc2VyIiwic3VibWFyaW5lIiwiZGVzdHJveWVyIiwiZG9tTW9kdWxlIiwibnVtYiIsImxldHRlcnIiLCJjb2xvciIsInNxIiwic3RyaWtlIiwicGxheWVyMXN0cmlrZXMiLCJwbGF5ZXIyc3RyaWtlcyIsImNlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsIlBoaXQiLCJzaG93IiwiaWkiLCJtb2RhbE1vZHVsZSIsIm1vZGFsIiwiYnRuIiwic3BhbiIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJvbmNsaWNrIiwiZGlzcGxheSIsIndpbmRvdyIsImV2ZW50Iiwic2hvd01vZHVsZSIsIlBjcmQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2hhblBsYXllciIsIkwiLCJOIiwiaGl0Q29vcmQiLCJzcGxpY2UiLCJnYW1lT3ZlciIsInBsciIsImNvdW50Iiwic3RhcnRHYW1lIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInBsYXlHYW1lIiwic2VsZWN0aW9uTW9kdWxlIiwicDFjYXJyaWVyU2hpcCIsInAxYmF0dGxlU2hpcCIsInAxY3J1aXNlclNoaXAiLCJwMXN1Ym1hcmluZVNoaXAiLCJwMWRlc3Ryb3llclNoaXAiLCJsb29wIl0sInNvdXJjZVJvb3QiOiIifQ==