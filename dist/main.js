(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{jK:()=>d,o7:()=>u,P4:()=>y,VL:()=>s,hJ:()=>i,yR:()=>c,He:()=>g,w7:()=>m,sq:()=>a});const t={createGrids:(e,t,o)=>{let n=document.createElement("div");n.style.padding="10px",n.style.border=0===o||0===t?"none":"solid black 2px",n.textContent=o,n.style.textAlign="center",0===o&&"0"===e?n.textContent=t:0===t&&"0"!=e&&(n.textContent=e),n.dataset.hit="No",n.dataset.P1hit="N",n.dataset.P2hit="N",n.dataset.letter=e,n.dataset.number=t,n.classList.add("cell"),n.setAttribute("id",n.dataset.letter+n.dataset.number),document.getElementById("gameboard1").appendChild(n)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}},o=function(){let e=i;y===m[0]?e=i:y===m[1]&&(e=g);for(let t=0;t<e.length;t++)console.log(e[t]),document.getElementById(e[t]).style.backgroundColor="red"},n=function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white"},r=function(e){"0"===e.target.dataset.number?e.target.style.backgroundColor="white":e.target.style.backgroundColor="red"},l=function(e){y===m[0]?d=e.target.dataset.P1hit:y===m[1]&&(d=e.target.dataset.P2hit),console.log(d),"Y"===d?e.target.style.backgroundColor="red":"N"===d&&(e.target.style.backgroundColor="white")};let a,d,s=[],c=[],i=[],g=[],u="V",m=["player1","player2"],y=m[0],h=s;y===m[0]?h=s:y===m[1]&&(h=c),document.getElementById("pip").textContent=y,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===u?(u="H",document.getElementById("position").textContent="Horizontal"):"H"===u&&(u="V",document.getElementById("position").textContent="Vertical")})),document.getElementById("shwshipos").addEventListener("click",o);function p(e){console.log(e.target.dataset.letter);let t=s,r=i,l=e.target.dataset.letter,a=e.target.dataset.number,u=l+a;if(console.log(u),console.log(t.length),"0"===a)console.log("Stay in the grid.");else{y===m[0]?(t=c,r=i,d=e.target.dataset.P1hit="Y"):y===m[1]&&(t=s,r=g,d=e.target.dataset.P2hit="Y");for(let e=0;e<t.length;e++)for(let o=0;o<t[e].coordinates.length;o++)t[e].coordinates[o]===u&&(console.log(t[e].coordinates),t[e].coordinates.splice(o,1),t[e].hitShip(),t[e].isSunk(),b(),console.log(t[e].coordinates),console.log("Player one sunk ships: 0"),console.log("Player two sunk ships: 0"));r.push(u),console.log("P1 strikes: "+i),console.log("P2 strikes: "+g),y===m[0]?(y=m[1],h=c,document.getElementById("pip").textContent=y):y===m[1]?(y=m[0],h=s,document.getElementById("pip").textContent=y):(y=m[0],h=c,document.getElementById("pip").textContent=y),n(),o()}}function b(){let e,t=0,o=s;y===m[0]?(o=c,e="Player One"):y===m[1]&&(o=s,e="Player Two");for(let e=0;e<o.length;e++)0===o[e].coordinates.length&&++t;console.log(t),5===t&&alert(e+" has won!")}t.createGameboard(),function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",p),e[t].style.backgroundColor="white",e[t].addEventListener("mouseover",r),e[t].addEventListener("mouseleave",l)}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTK0IsaUJBQWlCLFNBQ3pDLElBQUksSUFBSVosRUFBRSxFQUFFQSxFQUFFVyxFQUFNSixPQUFPUCxJQUUzQlcsRUFBTVgsR0FBR3FCLGlCQUFpQixRQUFRaEMsR0FDbENzQixFQUFNWCxHQUFHakIsTUFBTTJCLGdCQUFrQixRQUNqQ0MsRUFBTVgsR0FBR3FCLGlCQUFpQixZQUFZcEIsR0FDdENVLEVBQU1YLEdBQUdxQixpQkFBaUIsYUFBYXBCLEdBNEl2Q21DLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiY29uc3QgR2FtZWJvYXJkTW9kdWxlID0gKCgpID0+IHtcblxuICAgIGxldCBib3JkID0gXCJzb2xpZCBibGFjayAycHhcIjtcbiAgICBsZXQgbm9ib3JkID0gXCJub25lXCI7XG4gICAgXG4gICAgXG4gICAgY29uc3QgY3JlYXRlR3JpZHMgPSAobHRyLG5vLGlkKSA9PntcbiAgICBsZXQgZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICBncmlkLnN0eWxlLnBhZGRpbmcgPSBcIjEwcHhcIjtcbiAgICAvL3RyeWluZyB0byB0YWtlIG91dCB0aGUgYm9yZGVyaW5nIG9mIHRoZSBub3QgaW4gcGxheSBjZWxsc1xuICAgIGlmKGlkPT09IDApe2dyaWQuc3R5bGUuYm9yZGVyPW5vYm9yZH1cbiAgICBlbHNlIGlmKG5vPT09MCl7Z3JpZC5zdHlsZS5ib3JkZXIgPSBub2JvcmQ7fVxuICAgIGVsc2V7Z3JpZC5zdHlsZS5ib3JkZXIgPSBib3JkO31cbiAgICBcbiAgICBcbiAgICBncmlkLnRleHRDb250ZW50ID0gaWQ7XG4gICAgZ3JpZC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgIGlmKGlkPT09MCAmJiBsdHI9PT1cIjBcIil7Z3JpZC50ZXh0Q29udGVudCA9IG5vfVxuICAgIGVsc2UgaWYobm89PT0wICYmIGx0ciE9XCIwXCIpe2dyaWQudGV4dENvbnRlbnQgPSBsdHJ9XG4gICAgZ3JpZC5kYXRhc2V0LmhpdCA9IFwiTm9cIlxuICAgIGdyaWQuZGF0YXNldC5QMWhpdD1cIk5cIlxuICAgIGdyaWQuZGF0YXNldC5QMmhpdD1cIk5cIlxuICAgIGxldCBsZXR0ZXIgPSBncmlkLmRhdGFzZXQubGV0dGVyID0gbHRyO1xuICAgIGxldCBudW1iZXIgPSBncmlkLmRhdGFzZXQubnVtYmVyID0gbm87XG4gICAgLy9zaG93cyB3aGljaCBwbGF5ZXIgb3ducyB0aGUgY2VsbC8vXG4gICAgLy9sZXQgcGxheWVyID0gZ3JpZC5kYXRhc2V0LnBsYXllcmNlbGwgPSBcInBsYXllclwiK3BseXI7XG4gICAgXG4gICAgLy9jcmVhdGluZyBhIGNsYXNzIGZvciBlYWNoIGdyaWQgc28gd2UgY2FuIGFjY2VzcyBpdCBmcm9tIHRoZSBmdW5jdGlvbnNcbiAgICBncmlkLmNsYXNzTGlzdC5hZGQoXCJjZWxsXCIpO1xuICAgIC8vY3JlYXRpbmcgYW4gaWQgdGhhdCBtYXRjaGVzIGl0cyBjb29yZGluYXRlc1xuICAgIGdyaWQuc2V0QXR0cmlidXRlKCdpZCcsZ3JpZC5kYXRhc2V0LmxldHRlcitncmlkLmRhdGFzZXQubnVtYmVyKVxuICAgIFxuICAgICAgICAgXG4gICAgbGV0IGdhbWVib2FyZCA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVib2FyZDFcIik7XG4gICAgXG4gICAgZ2FtZWJvYXJkLmFwcGVuZENoaWxkKGdyaWQpO1xuICAgIFxuICAgIH1cbiAgICBcbiAgICAvL2NyZWF0ZSB0aGUgd2hvbGUgZ3JpZCB3aXRoIGJlbG93IGZ1bmN0aW9uXG4gICAgY29uc3QgY3JlYXRlR2FtZWJvYXJkID0gKCkgPT57XG4gICAgXG4gICAgZm9yKGxldCBpPTA7aTwxMTtpKyspe1xuICAgICAgICBcbiAgICBcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiMFwiLDAsaSlcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJCXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkNcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRFwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJFXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkZcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiR1wiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJIXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIklcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSlwiLGkpO1xuICAgIFxuICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtjcmVhdGVHcmlkcyxjcmVhdGVHYW1lYm9hcmR9XG4gICAgfSkoKTtcblxuICAgIGV4cG9ydHtHYW1lYm9hcmRNb2R1bGV9OyIsImltcG9ydCB7c3EsZGlyZWN0aW9uLHBsYXllcjFjb29yZCxwbGF5ZXIyY29vcmQscGlwLHBsYXllcjFzdHJpa2VzLHBsYXllcjJzdHJpa2VzLHBsYXllckJhc2UsUGhpdH0gZnJvbSAnLi9pbmRleCdcbmNvbnN0IGRvbU1vZHVsZSA9ICgoKSA9Pntcbi8vZnVuY3Rpb24gZm9yIGhpZ2hsaWdodGluZyBzcXVhcmVzIHdoZW4gaG92ZXJpbmdcbmZ1bmN0aW9uIGhvdmVyKHQpe1xubGV0IG51bWIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbmxldCBsZXR0ZXJyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG5sZXQgY29sb3IgPSBcImJsdWVcIjtcblxuaWYoZGlyZWN0aW9uPT09XCJWXCIpe1xuICAgIGxldCBvdmVyID0gMTEtc3E7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYobnVtYj5vdmVyKXtudW1iID0gb3Zlcn1cbiAgICBpZihudW1iPT09XCIwXCIpe2NvbG9yID0gXCJ3aGl0ZVwifVxuICAgIGVsc2V7Y29sb3I9XCJncmV5XCJ9XG5mb3IobGV0IGk9MDtpPHNxO2krKyl7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXR0ZXJyKygrbnVtYitpKSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3J9fVxuZWxzZSBpZihkaXJlY3Rpb249PT1cIkhcIil7XG4gICAgbGV0IEx0ck51bWJlciA9bGV0dGVyci5jaGFyQ29kZUF0KDApXG4gICAgbGV0IG92ZXIgPSA3NS1zcTtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihMdHJOdW1iZXI+b3Zlcil7THRyTnVtYmVyID0gb3Zlcn1cbiAgICBmb3IobGV0IGk9MDtpPHNxO2krKyl7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBudW1iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJncmV5XCJ9XG59XG59XG5cbi8vZnVuY3Rpb24gZm9yIHJldHVybmluZyBzcXVhcmUgY29sb3IgdG8gd2hpdGUgYWZ0ZXIgbGVhdmluZ1xuZnVuY3Rpb24gbGVhdmUodCl7dC50YXJnZXQuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIlxubGV0IG51bWIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbmxldCBsZXR0ZXJyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG5sZXQgaGl0ID0gbGV0dGVycitudW1iO1xuY29uc29sZS5sb2coaGl0KTtcbmNvbG9yPVwid2hpdGVcIlxuXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1zcTtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihudW1iPm92ZXIpe251bWIgPSBvdmVyfVxuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXR0ZXJyKygrbnVtYitpKSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3J9fVxuICAgIGVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgICAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICAgICAgbGV0IG92ZXIgPSA3NS1zcTtcbiAgICAgICAgXG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBudW1iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9Y29sb3J9XG4gICAgfVxuXG4gICAgXG4gICAgfVxuXG4gICAgLy9yZW1lbWJlciB0byBpbXBsZW1lbnQgdGhpcyBiZWZvcmUgZmluaXNoaW5nIHVwIHRoZSBwcm9qZWN0XG4gICAgLy8qKipcbiAgICBmdW5jdGlvbiBzaG93Q29vcmRwKCl7XG4gICAgZm9yKGxldCBpPTA7aTxwbGF5ZXIxY29vcmQubGVuZ3RoO2krKyl7XG4gICAgICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgICAgcC50ZXh0Q29udGVudCA9IHBsYXllcjFjb29yZFtpXS5uYW1lICsnLScrcGxheWVyMWNvb3JkW2ldLmNvb3JkaW5hdGVzO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAxY1wiKS5hcHBlbmRDaGlsZChwKTtcbiAgICAgIH1cblxuICAgICAgZm9yKGxldCBpPTA7aTxwbGF5ZXIyY29vcmQubGVuZ3RoO2krKyl7XG4gICAgICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgICAgcC50ZXh0Q29udGVudCA9IHBsYXllcjJjb29yZFtpXS5uYW1lICsnLScrcGxheWVyMmNvb3JkW2ldLmNvb3JkaW5hdGVzO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAyY1wiKS5hcHBlbmRDaGlsZChwKTtcbiAgICAgIH19XG4gICBcbiAgICAgIC8vZnVuY3Rpb24gdGhhdCBhbGxvd3MgdXMgdG8gdXBkYXRlIHRpbGVzIHdpdGhvdXQgY2FycnlpbmcgcHJldmlvdXMgdGlsZXMgb3ZlclxuICAgICAgZnVuY3Rpb24gd2hpdGVPdXQoKXtcbiAgICAgICAgbGV0IGNlbGxzPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIik7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7fVxuICAgICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIGF0dGFja0JvYXJkKCl7XG4gICAgICAgIGxldCBzdHJpa2UgPSBwbGF5ZXIxc3RyaWtlcztcbiAgICAgICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtzdHJpa2U9cGxheWVyMXN0cmlrZXN9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe3N0cmlrZT1wbGF5ZXIyc3RyaWtlc30gICAgXG4gICAgZm9yKGxldCBpPTA7aTxzdHJpa2UubGVuZ3RoO2krKyl7XG4gICAgICAgIGNvbnNvbGUubG9nKHN0cmlrZVtpXSlcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RyaWtlW2ldKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIH1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBsYXllckJvYXJkKCl7XG4gICAgICAgIFxuICAgIH1cblxuICAgIC8vZnVuY3Rpb25zIGZvciB3aGVuIHRoZSBoaXQgZnVuY3Rpb24gaXMgaW4gcGxheVxuICAgIGZ1bmN0aW9uIGhpdEhvdmVyKHQpe1xuICAgICAgICBpZih0LnRhcmdldC5kYXRhc2V0Lm51bWJlcj09PVwiMFwiKVxue3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJ9ZWxzZXt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJyZWRcIn1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhpdExlYXZlKHQpe1xuICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BoaXQ9dC50YXJnZXQuZGF0YXNldC5QMWhpdH1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0fSAgXG4gICAgY29uc29sZS5sb2coUGhpdClcbiAgICAgICAgaWYoUGhpdD09PVwiWVwiKXt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJyZWRcIn1cbiAgICAgICAgZWxzZSBpZihQaGl0PT09XCJOXCIpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIn1cbiAgICB9XG5cbnJldHVybiB7aG92ZXIsbGVhdmUsc2hvd0Nvb3JkcCxhdHRhY2tCb2FyZCx3aGl0ZU91dCxoaXRIb3ZlcixoaXRMZWF2ZX1cbn0pKCk7XG5cblxuZXhwb3J0e2RvbU1vZHVsZX0iLCJpbXBvcnQge0dhbWVib2FyZE1vZHVsZX0gZnJvbSAnLi9nYW1lYm9hcmQnXG5pbXBvcnQge2NhcnJpZXIsYmF0dGxlc2hpcCxjcnVpc2VyLHN1Ym1hcmluZSxkZXN0cm95ZXJ9IGZyb20gJy4vc2hpcHMnXG5pbXBvcnQge2RvbU1vZHVsZX0gZnJvbSAnLi9kb20nXG5cblxuICAvL2Nvb3JkaW5hdGVzIG9mIGVhY2ggcGxheWVycyBzaGlwXG4gIGxldCBwbGF5ZXIxY29vcmQ9W107XG4gIGxldCBwbGF5ZXIyY29vcmQ9W107XG4gIC8vYW1vdW50IG9mIHN1bmsgc2hpcHMgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgZ2FtZSBpcyBvdmVyIG9yIG5vdFxuICBsZXQgcGxheWVyMVN1bmtTaGlwcz0wO1xuICBsZXQgcGxheWVyMlN1bmtTaGlwcz0wO1xuICAvL2Nvb3JkaW5hdGVzIG9mIGVhY2ggdGlsZSBoaXQgYnkgZWFjaCBwbGF5ZXJcbiAgbGV0IHBsYXllcjFzdHJpa2VzPVtdXG4gIGxldCBwbGF5ZXIyc3RyaWtlcz1bXVxuICAvL1Y9VmVydGljYWwsIEg9SG9yaXpvbnRhbFxuICBsZXQgZGlyZWN0aW9uID0gXCJWXCJcbiAgLy9wbGF5ZXIgaW4gcGxheVxuICBsZXQgcGxheWVyQmFzZSA9IFtcInBsYXllcjFcIixcInBsYXllcjJcIl07XG4gIGxldCBwaXAgPSBwbGF5ZXJCYXNlWzBdO1xuICBsZXQgUGNyZCA9IHBsYXllcjFjb29yZDtcbiAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQY3JkID0gcGxheWVyMWNvb3JkO31cbiAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BjcmQgPSBwbGF5ZXIyY29vcmQ7fVxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDtcbiAgLy90aGUgc3F1YXJlcyB0aGF0IG5lZWQgaGlnaGxpZ2h0aW5nIGZvciB0aGUgZG9tXG4gIGxldCBzcTtcbiAgbGV0IFBoaXQ7XG5cblxuICBcbiAgXG5cbi8vYnV0dG9uIHRvIGNoYW5nZSB0aGUgcG9zaXRpb25pbmcgb2YgdGhlIHBsYWNlbWVudFxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJDaG5nZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntpZihkaXJlY3Rpb249PT1cIlZcIil7ZGlyZWN0aW9uPVwiSFwiO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25cIikudGV4dENvbnRlbnQ9XCJIb3Jpem9udGFsXCI7fWVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe2RpcmVjdGlvbj1cIlZcIjtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uXCIpLnRleHRDb250ZW50PVwiVmVydGljYWxcIn19KVxuLy9hdHRhY2tib2FyZCBidXR0b24gdGhhdCBzaG93cyBwb3NpdGlvbnMgd2hlcmUgdGhlIHBsYXllciBoYXMgYXR0YWNrZWRcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2h3c2hpcG9zXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkb21Nb2R1bGUuYXR0YWNrQm9hcmQpXG5cbi8vZnVuY3Rpb24gY2hhbmdlcyBwbGF5ZXJcbmNvbnN0IGNoYW5QbGF5ZXIgPSAoKT0+e1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7cGlwID0gcGxheWVyQmFzZVsxXTtcbiAgICAgICAgUGNyZCA9IHBsYXllcjJjb29yZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtwaXAgPSBwbGF5ZXJCYXNlWzBdO1xuICAgICAgICBQY3JkID0gcGxheWVyMWNvb3JkO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG4gICAgZWxzZXtwaXAgPSBwbGF5ZXJCYXNlWzBdO1xuICAgICAgICBQY3JkPXBsYXllcjJjb29yZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgICAgICBkb21Nb2R1bGUud2hpdGVPdXQoKTtcbiAgICAgICAgZG9tTW9kdWxlLmF0dGFja0JvYXJkKCk7XG5cbn1cblxuXG4vL2JlbG93IGZ1bmN0aW9ucyBuZWVkIHRvIGJlIGdyb3VwZWQgaW50byBhIG1vZHVsZVxuXG5mdW5jdGlvbiBoaXQodCl7Y29uc29sZS5sb2codC50YXJnZXQuZGF0YXNldC5sZXR0ZXIpO1xuICAgIGxldCBQQyA9IHBsYXllcjFjb29yZDtcbiAgICBsZXQgc3RyaWtlID0gcGxheWVyMXN0cmlrZXM7XG4gICAgbGV0IEwgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgTiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgICBsZXQgaGl0Q29vcmQgPSBMK047XG4gICAgY29uc29sZS5sb2coaGl0Q29vcmQpO1xuICAgIGNvbnNvbGUubG9nKFBDLmxlbmd0aCk7XG4gICAgaWYoTj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2V7ICAgICAgIFxuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIyY29vcmQ7c3RyaWtlPXBsYXllcjFzdHJpa2VzO1BoaXQ9dC50YXJnZXQuZGF0YXNldC5QMWhpdD1cIllcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIxY29vcmQ7c3RyaWtlPXBsYXllcjJzdHJpa2VzO1BoaXQ9dC50YXJnZXQuZGF0YXNldC5QMmhpdD1cIllcIn1cbiAgICBmb3IobGV0IHA9MDtwPFBDLmxlbmd0aDtwKyspe1xuICAgICAgICBmb3IobGV0IGk9MDtpPFBDW3BdLmNvb3JkaW5hdGVzLmxlbmd0aDtpKyspe1xuICAgICAgICBpZihQQ1twXS5jb29yZGluYXRlc1tpXT09PWhpdENvb3JkKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFBDW3BdLmNvb3JkaW5hdGVzKVxuICAgICAgICAgICAgUENbcF0uY29vcmRpbmF0ZXMuc3BsaWNlKGksMSlcbiAgICAgICAgUENbcF0uaGl0U2hpcCgpO1xuICAgICAgICBQQ1twXS5pc1N1bmsoKTsgICAgXG4gICAgICAgIFxuICAgICAgICBnYW1lT3ZlcigpO1xuICAgICAgICBjb25zb2xlLmxvZyhQQ1twXS5jb29yZGluYXRlcylcbiAgICAgICAgY29uc29sZS5sb2coXCJQbGF5ZXIgb25lIHN1bmsgc2hpcHM6IFwiKyBwbGF5ZXIxU3Vua1NoaXBzKSAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUGxheWVyIHR3byBzdW5rIHNoaXBzOiBcIisgcGxheWVyMlN1bmtTaGlwcykgIFxuICAgICAgICBcbiAgICAgICAgfX1cbiAgICB9c3RyaWtlLnB1c2goaGl0Q29vcmQpICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIlAxIHN0cmlrZXM6IFwiKyBwbGF5ZXIxc3RyaWtlcylcbiAgICAgICAgY29uc29sZS5sb2coXCJQMiBzdHJpa2VzOiBcIisgcGxheWVyMnN0cmlrZXMpXG4gICAgICAgIFxuICAgIGNoYW5QbGF5ZXIoKX19XG5cblxuIGZ1bmN0aW9uIGdhbWVPdmVyKCl7XG4gICAgbGV0IGNvdW50ID0wO1xuICAgIGxldCBQQyA9IHBsYXllcjFjb29yZDtcbiAgICBsZXQgcGxyO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IHBscj1cIlBsYXllciBPbmVcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IHBscj1cIlBsYXllciBUd29cIn1cbiAgICBmb3IobGV0IGkgPTA7aTxQQy5sZW5ndGg7aSsrKXtcbiAgICAgICBpZihQQ1tpXS5jb29yZGluYXRlcy5sZW5ndGg9PT0wKXsrK2NvdW50fVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhjb3VudCk7XG4gICAgaWYoY291bnQ9PT01KXthbGVydCggcGxyKyBcIiBoYXMgd29uIVwiKX1cbiAgICB9XG4gICAgXG5cbmZ1bmN0aW9uIHN0YXJ0R2FtZSgpe1xuICAgIGlmKFBjcmQubGVuZ3RoPjQpe1xuICAgIHNxPTFcbiAgICBjaGFuUGxheWVyKCk7XG4gICAgbGV0IGNlbGxzPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIik7XG5mb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkZXN0cm95ZXIpIFxuY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHN0YXJ0R2FtZSlcbmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5nYW1lYnV0dG9uc1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xufVxucGxheUdhbWUoKX19XG4gICAgXG4gICAgXG5mdW5jdGlvbiBwbGF5R2FtZSgpe1xuICAgIFxuICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcblxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGhpdClcbmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhpdEhvdmVyKVxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmhpdExlYXZlKVxuXG5cbn1cbn1cblxuXG5cbi8vU2VsZWN0aW9uIG1vZHVsZVxuY29uc3Qgc2VsZWN0aW9uTW9kdWxlID0gKCgpID0+e1xuICAgIFxuICAgIFxuXG4gICAgICAgIFxuICAgIC8vYWRkcyBhbiBldmVudCBsaXN0ZW5lciB0byBldmVyeSBncmlkIGNlbGwgYWxsb3dpbmcgdXMgdG8gY2hvb3NlIG91ciBjb29yZGluYXRlcyxtYXAgdGhlbSB0byB0aGUgYXJyYXkgdGhlbiBjaGFuZ2UgcGxheWVyXG4gICAgZnVuY3Rpb24gcDFjYXJyaWVyU2hpcCgpe1xuICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT0yO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWJhdHRsZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgZnVuY3Rpb24gcDFiYXR0bGVTaGlwKCl7ICAgXG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+MCl7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9MztcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYXJyaWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFiYXR0bGVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxiYXR0bGVzaGlwKSBcbiAgICAgICAgICAgIC8vaWYgY29vcmRpbmF0ZXMgbWF0Y2ggbGVuZ3RoIG5lZWRlZCBtb3ZlIG9udG8gbmV4dCBwYXJ0XG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxY3J1aXNlclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgZnVuY3Rpb24gcDFjcnVpc2VyU2hpcCgpe1xuXG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjEpe1xuICAgICAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhQY3JkKVxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9NDtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxiYXR0bGVzaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFjcnVpc2VyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY3J1aXNlcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxc3VibWFyaW5lU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHAxc3VibWFyaW5lU2hpcCgpe1xuXG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjIpe1xuICAgICAgICBcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTU7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsY3J1aXNlcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxc3VibWFyaW5lU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc3VibWFyaW5lKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFkZXN0cm95ZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcDFkZXN0cm95ZXJTaGlwKCl7XG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+Myl7XG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT02O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHN1Ym1hcmluZSkgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxZGVzdHJveWVyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbiAgICAgICAgICAgIC8vdGhpcyBkZWNpZGVzIHdoZXRoZXIgdGhlIGdhbWUgc3RhcnRzIGFmdGVyIHBsYXllciB0d28gb3IgdGhlIGNvbXB1dGVyIGhhcyBzZWxlY3RlZCB0aGVpciBncmlkc1xuICAgICAgICAgICAgLy9pZiBub3QgaXQgbG9vcHMgYXJvdW5kXG4gICAgICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe2NlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdGFydEdhbWUpfVxuICAgICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLmxvb3ApIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wKCl7XG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjQpe1xuXG4gICAgICAgIC8vVGhpcyBmdW5jdGlvbiB0dXJucyB0aGUgc2VsZWN0aW9uIHByb2Nlc3Mgb3ZlciB0byBlaXRoZXIgYSBjb21wdXRlciBvciBwbGF5ZXIgMlxuICAgIC8vanVzdCBkb2luZyBwbGF5ZXIgMiBpbXBsZW1ldGF0aW9uIGZvciBub3dcbiAgICBjaGFuUGxheWVyKCk7XG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgIFxuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLmxvb3ApIFxuICAgICAgICAgICAgY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuICAgIH1cbnNlbGVjdGlvbk1vZHVsZS5wMWNhcnJpZXJTaGlwKCk7XG59XG4gICAgfVxuXG5cbiAgICBcbiAgICAgICAgcmV0dXJue3AxY2FycmllclNoaXAscDFiYXR0bGVTaGlwLHAxY3J1aXNlclNoaXAscDFzdWJtYXJpbmVTaGlwLHAxZGVzdHJveWVyU2hpcCxsb29wfVxuICAgIFxuICAgIH0pKCk7XG5cblxuXG5cblxuICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHYW1lYm9hcmQoKTtcbi8vc2VsZWN0aW9uTW9kdWxlLnAxY2FycmllclNoaXAoKTtcbi8vdGVzdGluZyBoaXQgZnVuY3Rpb25cbnBsYXlHYW1lKCk7XG5cblxuZXhwb3J0IHtQaGl0LHNxLGRpcmVjdGlvbixwaXAscGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwbGF5ZXJCYXNlLGNoYW5QbGF5ZXIscGxheWVyMVN1bmtTaGlwcyxwbGF5ZXIyU3Vua1NoaXBzLHBsYXllcjFzdHJpa2VzLHBsYXllcjJzdHJpa2VzfVxuXG5cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiR2FtZWJvYXJkTW9kdWxlIiwiY3JlYXRlR3JpZHMiLCJsdHIiLCJubyIsImlkIiwiZ3JpZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicGFkZGluZyIsImJvcmRlciIsInRleHRDb250ZW50IiwidGV4dEFsaWduIiwiZGF0YXNldCIsImhpdCIsIlAxaGl0IiwiUDJoaXQiLCJsZXR0ZXIiLCJudW1iZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiY3JlYXRlR2FtZWJvYXJkIiwiaSIsImRvbU1vZHVsZSIsInN0cmlrZSIsInBsYXllcjFzdHJpa2VzIiwicGlwIiwicGxheWVyQmFzZSIsInBsYXllcjJzdHJpa2VzIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsImJhY2tncm91bmRDb2xvciIsImNlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsInQiLCJ0YXJnZXQiLCJQaGl0Iiwic3EiLCJwbGF5ZXIxY29vcmQiLCJwbGF5ZXIyY29vcmQiLCJkaXJlY3Rpb24iLCJQY3JkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlBDIiwiTCIsIk4iLCJoaXRDb29yZCIsInAiLCJjb29yZGluYXRlcyIsInNwbGljZSIsImhpdFNoaXAiLCJpc1N1bmsiLCJnYW1lT3ZlciIsInB1c2giLCJwbHIiLCJjb3VudCIsImFsZXJ0IiwicGxheUdhbWUiXSwic291cmNlUm9vdCI6IiJ9