(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Rd:()=>p,o7:()=>u,P4:()=>g,VL:()=>c,yR:()=>i,w7:()=>m,sq:()=>s});const t={createGrids:(e,t,r)=>{let n=document.createElement("div");n.style.padding="10px",n.style.border=0===r||0===t?"none":"solid black 2px",n.textContent=r,n.style.textAlign="center",0===r&&"0"===e?n.textContent=t:0===t&&"0"!=e&&(n.textContent=e),n.dataset.hit="No",n.dataset.hit,n.dataset.letter=e,n.dataset.number=t,n.classList.add("cell"),n.setAttribute("id",n.dataset.letter+n.dataset.number),document.getElementById("gameboard1").appendChild(n)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function r(e,t,r,n){let l=[];if("V"===n){let n=11-r;t>n&&(t=n);for(let n=1;n<r+1;n++)l.push(e+t++)}else if("H"===n){let n=e.charCodeAt(0),o=107-r;n>o&&(n=o);for(let e=1;e<r+1;e++)l.push(String.fromCharCode(n++)+t)}return l}function n(e,t){this.name=e,this.coordinates=t}const l=e=>{e.target.style.backgroundColor="red";let t,l=e.target.dataset.letter,o=e.target.dataset.number,a=new n("Carrier",r(l,o,2,u));g===m[0]?t=c:g===m[1]&&(t=i),t.push(a);let d=document.createElement("p");return d.textContent="Carrier-"+r(l,o,2,u),document.getElementById("p1c").appendChild(d),t},o=e=>{e.target.style.backgroundColor="red";let t,l=e.target.dataset.letter,o=e.target.dataset.number,a=new n("Battleship",r(l,o,3,u));g===m[0]?t=c:g===m[1]&&(t=i),t.push(a),p();let d=document.createElement("p");return d.textContent="BattleShip-"+r(l,o,3,u),document.getElementById("p1c").appendChild(d),t},a=function(e){e.target.style.backgroundColor="green";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===u)for(let e=0;e<s;e++)document.getElementById(r+(+t+e)).style.backgroundColor="green";else if("H"===u){let e=r.charCodeAt(0);for(let r=0;r<s;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="green"}},d=function(e){e.target.style.backgroundColor="white";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===u)for(let e=0;e<s;e++)document.getElementById(r+(+t+e)).style.backgroundColor="white";else if("H"===u){let e=r.charCodeAt(0);for(let r=0;r<s;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}};let c=[],i=[];document.getElementById("p2c").textContent=i;let s,u="V",m=["player1","player2"],g=m[0];document.getElementById("pip").textContent=g,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===u?(u="H",document.getElementById("position").textContent="Horizontal"):"H"===u&&(u="V",document.getElementById("position").textContent="Vertical")}));const p=()=>{document.getElementById("p2c").textContent=i,g===m[0]?(g=m[1],document.getElementById("pip").textContent=g):(m[1],g=m[0],document.getElementById("pip").textContent=g)};function y(e){let t=c,r=e.target.dataset.letter+e.target.dataset.number;console.log(r),g===m[0]?t=i:g===m[1]&&(t=c);for(let e=0;e<t[0].length;e++)t[0][e]===r&&(alert("HIT"),t[0].splice(e,1),console.log(t[0]),console.log(c[0]),0===c[0].length?alert("Player two wins"):0===i[0].length&&alert("Player one wins"));return p(),t}function C(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)s=2,e[t].removeEventListener("click",l),e[t].removeEventListener("click",C),e[t].addEventListener("click",h)}function h(e){e.target.style.backgroundColor="red";let t=e.target.dataset.letter,n=e.target.dataset.number;i.push(r(t,n,2,u)),document.getElementById("p2c").textContent=i,p(),function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",h),e[t].removeEventListener("mouseover",a),e[t].removeEventListener("mouseleave",d)}(),function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",y),e[t].style.backgroundColor="white",e[t].addEventListener("mouseover",(e=>{e.target.style.backgroundColor="red"})),e[t].addEventListener("mouseleave",(e=>{e.target.style.backgroundColor="white"}))}()}const E={p1carrierShip:function(){t.createGameboard();let e=document.querySelectorAll(".cell");s=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",l),e[t].addEventListener("click",E.p1battleShip),e[t].addEventListener("mouseover",a),e[t].addEventListener("mouseleave",d)},p1battleShip:function(){let e=document.querySelectorAll(".cell");s=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",l),e[t].removeEventListener("click",E.p1battleShip),e[t].addEventListener("click",o),e[t].addEventListener("click",C),e[t].addEventListener("mouseover",a),e[t].addEventListener("mouseleave",d)}};E.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWdCRSxjQUNyRFIsRUFBTXpDLEdBQUdrQyxpQkFBaUIsUUFBUU4sR0FDbENhLEVBQU16QyxHQUFHa0MsaUJBQWlCLFFBQVFNLEdBQ2xDQyxFQUFNekMsR0FBR2tDLGlCQUFpQixZQUFZSixHQUMxQ1csRUFBTXpDLEdBQUdrQyxpQkFBaUIsYUFBYUosS0FhL0NpQixFQUFnQkMsaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvY2hvb3NlQ29vcmRpbmF0ZXMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvc2hpcHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiY29uc3QgR2FtZWJvYXJkTW9kdWxlID0gKCgpID0+IHtcblxuICAgIGxldCBib3JkID0gXCJzb2xpZCBibGFjayAycHhcIjtcbiAgICBsZXQgbm9ib3JkID0gXCJub25lXCI7XG4gICAgXG4gICAgXG4gICAgY29uc3QgY3JlYXRlR3JpZHMgPSAobHRyLG5vLGlkKSA9PntcbiAgICBsZXQgZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICBncmlkLnN0eWxlLnBhZGRpbmcgPSBcIjEwcHhcIjtcbiAgICAvL3RyeWluZyB0byB0YWtlIG91dCB0aGUgYm9yZGVyaW5nIG9mIHRoZSBub3QgaW4gcGxheSBjZWxsc1xuICAgIGlmKGlkPT09IDApe2dyaWQuc3R5bGUuYm9yZGVyPW5vYm9yZH1cbiAgICBlbHNlIGlmKG5vPT09MCl7Z3JpZC5zdHlsZS5ib3JkZXIgPSBub2JvcmQ7fVxuICAgIGVsc2V7Z3JpZC5zdHlsZS5ib3JkZXIgPSBib3JkO31cbiAgICBcbiAgICBcbiAgICBncmlkLnRleHRDb250ZW50ID0gaWQ7XG4gICAgZ3JpZC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgIGlmKGlkPT09MCAmJiBsdHI9PT1cIjBcIil7Z3JpZC50ZXh0Q29udGVudCA9IG5vfVxuICAgIGVsc2UgaWYobm89PT0wICYmIGx0ciE9XCIwXCIpe2dyaWQudGV4dENvbnRlbnQgPSBsdHJ9XG4gICAgZ3JpZC5kYXRhc2V0LmhpdCA9IFwiTm9cIlxuICAgIGxldCBncmRhdGEgPSBncmlkLmRhdGFzZXQuaGl0O1xuICAgIGxldCBsZXR0ZXIgPSBncmlkLmRhdGFzZXQubGV0dGVyID0gbHRyO1xuICAgIGxldCBudW1iZXIgPSBncmlkLmRhdGFzZXQubnVtYmVyID0gbm87XG4gICAgLy9zaG93cyB3aGljaCBwbGF5ZXIgb3ducyB0aGUgY2VsbC8vXG4gICAgLy9sZXQgcGxheWVyID0gZ3JpZC5kYXRhc2V0LnBsYXllcmNlbGwgPSBcInBsYXllclwiK3BseXI7XG4gICAgXG4gICAgLy9jcmVhdGluZyBhIGNsYXNzIGZvciBlYWNoIGdyaWQgc28gd2UgY2FuIGFjY2VzcyBpdCBmcm9tIHRoZSBmdW5jdGlvbnNcbiAgICBncmlkLmNsYXNzTGlzdC5hZGQoXCJjZWxsXCIpO1xuICAgIC8vY3JlYXRpbmcgYW4gaWQgdGhhdCBtYXRjaGVzIGl0cyBjb29yZGluYXRlc1xuICAgIGdyaWQuc2V0QXR0cmlidXRlKCdpZCcsZ3JpZC5kYXRhc2V0LmxldHRlcitncmlkLmRhdGFzZXQubnVtYmVyKVxuICAgIFxuICAgICAgICAgXG4gICAgbGV0IGdhbWVib2FyZCA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVib2FyZDFcIik7XG4gICAgXG4gICAgZ2FtZWJvYXJkLmFwcGVuZENoaWxkKGdyaWQpO1xuICAgIFxuICAgIH1cbiAgICBcbiAgICAvL2NyZWF0ZSB0aGUgd2hvbGUgZ3JpZCB3aXRoIGJlbG93IGZ1bmN0aW9uXG4gICAgY29uc3QgY3JlYXRlR2FtZWJvYXJkID0gKCkgPT57XG4gICAgXG4gICAgZm9yKGxldCBpPTA7aTwxMTtpKyspe1xuICAgICAgICBcbiAgICBcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiMFwiLDAsaSlcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJCXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkNcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRFwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJFXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkZcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiR1wiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJIXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIklcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSlwiLGkpO1xuICAgIFxuICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtjcmVhdGVHcmlkcyxjcmVhdGVHYW1lYm9hcmR9XG4gICAgfSkoKTtcblxuICAgIGV4cG9ydHtHYW1lYm9hcmRNb2R1bGV9OyIsIi8vdGhlIGNob29vc2UgY29vcmRpbmF0ZXMgZnVuY3Rpb25cbmZ1bmN0aW9uIGNob29zZUNyZG50cyhTdHJ0THR0cnMsU3RydE5vLGxlbmd0aCxWb3JIKXtcbiAgICBsZXQgY29vcmQgPSBbXTtcbiAgICBcbiAgICBpZihWb3JIPT09XCJWXCIpe1xuICAgIGxldCBvdmVyID0gMTEtbGVuZ3RoO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKFN0cnRObz5vdmVyKXtTdHJ0Tm8gPSBvdmVyfVxuICAgIC8vaWYoVm9ySD09PVwiVmVydGljYWxcIil7fSBXaWxsIGJlIHRyZWF0aW5nIHRoaXMgdGVzdGluZyBhcyBjb21wbGV0ZSB2ZXJ0aWNhbCBwb3NpdGlvbmluZ1xuICAgIGZvcihsZXQgaT0xO2k8bGVuZ3RoKzE7aSsrKXtcbiAgICAgICAgY29vcmQucHVzaChTdHJ0THR0cnMgKyBTdHJ0Tm8rKylcbiAgICB9XG59XG5cbmVsc2UgaWYoVm9ySD09PVwiSFwiKXtcbiAgICBsZXQgTHRyTnVtYmVyID0gU3RydEx0dHJzLmNoYXJDb2RlQXQoMClcbiAgICBsZXQgb3ZlciA9IDEwNy1sZW5ndGg7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgXG4gICAgZm9yKGxldCBpPTE7aTxsZW5ndGgrMTtpKyspe1xuICAgICAgICBjb29yZC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgU3RydE5vKVxuICAgIH1cblxufVxuICAgIHJldHVybiBjb29yZDtcblxufVxuXG5leHBvcnQge2Nob29zZUNyZG50c30iLCJpbXBvcnR7cGlwLGRpcmVjdGlvbixwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBsYXllckJhc2UsY2hhblBsYXllcn0gZnJvbSAnLi9pbmRleCdcbmltcG9ydHtjaG9vc2VDcmRudHN9IGZyb20gJy4vY2hvb3NlQ29vcmRpbmF0ZXMnXG5cblxuZnVuY3Rpb24gc2hpcGZhY3RvcnkobmFtZSxjb29yZGluYXRlcyl7XG4gICAgdGhpcy5uYW1lID0gbmFtZVxuICAgIHRoaXMuY29vcmRpbmF0ZXMgPSBjb29yZGluYXRlc1xuICAgIFxuICB9XG5cblxuICBjb25zdCBjYXJyaWVyID0gKHQpID0+eyAgICBcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQ2FycmllclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDIsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDt9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkO31cbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgICAgICBcbiAgICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgIHAudGV4dENvbnRlbnQgPSAnQ2FycmllcicgK1wiLVwiKyBjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbilcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicDFjXCIpLmFwcGVuZENoaWxkKHApO1xuICAgIFxuICAgIHJldHVybiBQQztcbiAgICB9XG5cbiAgY29uc3QgYmF0dGxlc2hpcCA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQmF0dGxlc2hpcFwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDt9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkO31cbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgIGNoYW5QbGF5ZXIoKTtcblxuICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgIHAudGV4dENvbnRlbnQgPSAnQmF0dGxlU2hpcCcgK1wiLVwiKyBjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbilcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicDFjXCIpLmFwcGVuZENoaWxkKHApO1xuICAgIFxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBjcnVpc2VyID0gKCkgPT57fVxuICBjb25zdCBzdWJtYXJpbmUgPSAoKSA9Pnt9XG4gIGNvbnN0IGRlc3Ryb3llciA9ICgpID0+e31cblxuICBleHBvcnQge3NoaXBmYWN0b3J5LGNhcnJpZXIsYmF0dGxlc2hpcH0iLCJpbXBvcnQge3NxLGRpcmVjdGlvbn0gZnJvbSAnLi9pbmRleCdcbmNvbnN0IGRvbU1vZHVsZSA9ICgoKSA9Pntcbi8vZnVuY3Rpb24gZm9yIGhpZ2hsaWdodGluZyBzcXVhcmVzIHdoZW4gaG92ZXJpbmdcbmZ1bmN0aW9uIGhvdmVyKHQpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZWVuXCI7XG5sZXQgbnVtYiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xubGV0IGxldHRlcnIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlclxuaWYoZGlyZWN0aW9uPT09XCJWXCIpe1xuZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGV0dGVycisoK251bWIraSkpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiZ3JlZW5cIn19XG5lbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtcbiAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICBmb3IobGV0IGk9MDtpPHNxO2krKyl7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBudW1iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJncmVlblwifVxufVxufVxuXG4vL2Z1bmN0aW9uIGZvciByZXR1cm5pbmcgc3F1YXJlIGNvbG9yIHRvIHdoaXRlIGFmdGVyIGxlYXZpbmdcbmZ1bmN0aW9uIGxlYXZlKHQpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCI7XG5sZXQgbnVtYiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xubGV0IGxldHRlcnIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlclxuaWYoZGlyZWN0aW9uPT09XCJWXCIpe1xuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXR0ZXJyKygrbnVtYitpKSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwifX1cbiAgICBlbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtcbiAgICAgICAgbGV0IEx0ck51bWJlciA9bGV0dGVyci5jaGFyQ29kZUF0KDApXG4gICAgICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBudW1iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwifVxuICAgIH1cbiAgICB9XG5cbiAgICAvL3B1cmVseSBmb3IgYnVpbGRpbmcgcHVycG9zZXNcbmZ1bmN0aW9uIHNob3dDb29yZHAxKCl7XG4gICAgZm9yKGxldCBpPTA7aTxwbGF5ZXIxY29vcmQubGVuZ3RoO2krKyl7XG4gICAgICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgICAgcC50ZXh0Q29udGVudCA9IHBsYXllcjFjb29yZFtpXS5uYW1lICsnLScrcGxheWVyMWNvb3JkW2ldLmNvb3JkaW5hdGVzO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAxY1wiKS5hcHBlbmRDaGlsZChwKTtcbiAgICAgIH19XG5cbnJldHVybntob3ZlcixsZWF2ZSxzaG93Q29vcmRwMX1cbn0pKCk7XG5cblxuZXhwb3J0e2RvbU1vZHVsZX0iLCJpbXBvcnQge0dhbWVib2FyZE1vZHVsZX0gZnJvbSAnLi9nYW1lYm9hcmQnXG5pbXBvcnQge2Nob29zZUNyZG50c30gZnJvbSAnLi9jaG9vc2VDb29yZGluYXRlcydcbmltcG9ydCB7c2hpcGZhY3RvcnksY2FycmllcixiYXR0bGVzaGlwfSBmcm9tICcuL3NoaXBzJ1xuaW1wb3J0IHtkb21Nb2R1bGV9IGZyb20gJy4vZG9tJ1xuXG5cblxuXG4gIC8vY29vcmRpbmF0ZXMgb2YgZWFjaCBwbGF5ZXJzIHNoaXAsIGp1c3QgZm9yIHRlc3RpbmcgdW50aWwgd2UgdXNlIG11bHRpcGxlIHNoaXBzXG4gIFxuICBsZXQgcGxheWVyMWNvb3JkPVtdO1xuXG4gIFxuICBsZXQgcGxheWVyMmNvb3JkPVtdO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAyY1wiKS50ZXh0Q29udGVudCA9IHBsYXllcjJjb29yZDtcbiAgLy9WPVZlcnRpY2FsLCBIPUhvcml6b250YWxcbiAgbGV0IGRpcmVjdGlvbiA9IFwiVlwiXG4gIC8vcGxheWVyIGluIHBsYXlcbiAgbGV0IHBsYXllckJhc2UgPSBbXCJwbGF5ZXIxXCIsXCJwbGF5ZXIyXCJdO1xuICBsZXQgcGlwID0gcGxheWVyQmFzZVswXTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7XG4gIC8vdGhlIHNxdWFyZXMgdGhhdCBuZWVkIGhpZ2hsaWdodGluZyBmb3IgdGhlIGRvbVxuICBsZXQgc3E7XG4gIFxuXG4vL2J1dHRvbiB0byBjaGFuZ2UgdGhlIHBvc2l0aW9uaW5nIG9mIHRoZSBwbGFjZW1lbnRcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQ2huZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57aWYoZGlyZWN0aW9uPT09XCJWXCIpe2RpcmVjdGlvbj1cIkhcIjtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uXCIpLnRleHRDb250ZW50PVwiSG9yaXpvbnRhbFwiO31lbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtkaXJlY3Rpb249XCJWXCI7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblwiKS50ZXh0Q29udGVudD1cIlZlcnRpY2FsXCJ9fSlcblxuXG4vL2Z1bmN0aW9uIGNoYW5nZXMgcGxheWVyXG5jb25zdCBjaGFuUGxheWVyID0gKCk9PntcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicDJjXCIpLnRleHRDb250ZW50ID0gcGxheWVyMmNvb3JkO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7cGlwID0gcGxheWVyQmFzZVsxXTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtwaXAgPSBwbGF5ZXJCYXNlWzBdO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICBlbHNle3BpcCA9IHBsYXllckJhc2VbMF07ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuXG59XG5cblxuXG5cblxuXG4vL2hpdCBmdW5jdGlvbiBmb3IgdGhlIG1haW4gZ2FtZSBsb29wXG4vL2luIGZ1dHVyZSB3aWxsIG1hcmsgdGhlZSBzcXVhcmUgYXMgaGl0IG5vdCBhbGxvd2luZyB0aGUgcGxheWVyIHRvIGhpdCBhZ2FpblxuLy90YWtlcyB0aGUgY29vcmRpbmF0ZXMgb3V0IG9mIHRoZSBwbGF5ZXJzIGFycmF5XG5mdW5jdGlvbiBoaXQodCl7XG4gICAgbGV0IFBDID0gcGxheWVyMWNvb3JkO1xuICAgIGxldCBMID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IE4gPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICBsZXQgaGl0Q29vcmQgPSBMK047XG4gICAgY29uc29sZS5sb2coaGl0Q29vcmQpO1xuICAgIFxuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIyY29vcmQ7fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjFjb29yZDt9XG5mb3IobGV0IGk9MDtpPFBDWzBdLmxlbmd0aDtpKyspe1xuICAgIGlmKFBDWzBdW2ldPT09aGl0Q29vcmQpe1xuICAgICAgICBhbGVydChcIkhJVFwiKTtcbiAgICBQQ1swXS5zcGxpY2UoaSwxKTtcbiAgICBjb25zb2xlLmxvZyhQQ1swXSk7XG4gICAgZ2FtZU92ZXIoKTtcbiAgICB9fWNoYW5QbGF5ZXIoKTtcbiAgICByZXR1cm4gUEN9XG5cbiAgICBmdW5jdGlvbiBnYW1lT3Zlcigpe1xuICAgICAgICBjb25zb2xlLmxvZyhwbGF5ZXIxY29vcmRbMF0pXG4gICAgICAgIGlmKHBsYXllcjFjb29yZFswXS5sZW5ndGggPT09IDApe2FsZXJ0KFwiUGxheWVyIHR3byB3aW5zXCIpO31cbiAgICAgICAgZWxzZSBpZihwbGF5ZXIyY29vcmRbMF0ubGVuZ3RoID09PSAwKXthbGVydChcIlBsYXllciBvbmUgd2luc1wiKX1cbiAgICB9XG4gICAgXG5cbi8vYmFzaWNhbGx5IGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgYSAyIHNxdWFyZSBzaGlwXG4vKmNvbW1lbnRlZCBvdXQgdG8gdGVzdCBjcm9zcyB3ZWJwYWNrXG5mdW5jdGlvbiBidHRsc2hpcDEodCl7XG4gICAgXG50LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xubGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xubGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpXG5sZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkd1bm5lclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDIsZGlyZWN0aW9uKSlcbnBsYXllcjFjb29yZC5wdXNoKGd1bm4pO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMWNcIikudGV4dENvbnRlbnQgPSBwbGF5ZXIxY29vcmQ7XG5jaGFuUGxheWVyKCk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAxY1wiKS50ZXh0Q29udGVudCA9IHBsYXllcjFjb29yZFswXS5uYW1lICtcIi1cIisgcGxheWVyMWNvb3JkWzBdLmNvb3JkaW5hdGVzO1xucmV0dXJuIHBsYXllcjFjb29yZDtcbn0qL1xuXG4vL3RvIGJlIGFibGUgdG8gaW52b2tlIGJvdGggZnVuY3Rpb25zIGFuZCB0byByZW1vdmUgaXRcbi8vbmVlZCB0byBnZXQgcmlkIG9mIHRoaXMgYW5kIGNhbGwgaXQgYWxsIGluIHRoZSBsaXN0ZW5lclxuXG5cblxuXG5cbmZ1bmN0aW9uIHBiMigpe1xuICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuXG5mb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgIHNxPTI7XG4gICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxwYjIpXG4gICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGJ0dGxzaGlwMilcbn1cbn1cblxuZnVuY3Rpb24gYnR0bHNoaXAyKHQpe1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgICAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAgICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpXG4gICAgICAgICBwbGF5ZXIyY29vcmQucHVzaChjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpO1xuICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMmNcIikudGV4dENvbnRlbnQgPSBwbGF5ZXIyY29vcmQ7XG4gICAgICAgICBjaGFuUGxheWVyKCk7XG4gICAgICAgICBybXZldmVuKCk7XG4gICAgICAgICBwbGF5R2FtZSgpO31cblxuLy9yZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG5mdW5jdGlvbiBybXZldmVuKCl7XG4gICAgbGV0IGNlbGxzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxidHRsc2hpcDIpXG4gICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxufVxufVxuXG5cblxuICAgIFxuICAgIFxuZnVuY3Rpb24gcGxheUdhbWUoKXtcbiAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbmZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG5cbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxoaXQpXG5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5jZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCh0KT0+e3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInJlZFwifSlcbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCh0KT0+e3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJ9KVxufVxuXG59XG5cblxuY29uc3Qgc2VsZWN0aW9uTW9kdWxlID0gKCgpID0+e1xuXG4gICAgICAgIFxuICAgIC8vYWRkcyBhbiBldmVudCBsaXN0ZW5lciB0byBldmVyeSBncmlkIGNlbGwgYWxsb3dpbmcgdXMgdG8gY2hvb3NlIG91ciBjb29yZGluYXRlcyxtYXAgdGhlbSB0byB0aGUgYXJyYXkgdGhlbiBjaGFuZ2UgcGxheWVyXG4gICAgZnVuY3Rpb24gcDFjYXJyaWVyU2hpcCgpe1xuICAgICAgIFxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR2FtZWJvYXJkKCk7XG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTI7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY2FycmllcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxYmF0dGxlU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgICAgIH1cbiAgICBmdW5jdGlvbiBwMWJhdHRsZVNoaXAoKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT0zO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWJhdHRsZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGJhdHRsZXNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHBiMikgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgICAgICByZXR1cm57cDFjYXJyaWVyU2hpcCxwMWJhdHRsZVNoaXB9XG4gICAgXG4gICAgfSkoKTtcblxuXG5cblxuXG5cbnNlbGVjdGlvbk1vZHVsZS5wMWNhcnJpZXJTaGlwKCk7XG5cblxuXG5cbmV4cG9ydCB7c3EsZGlyZWN0aW9uLHBpcCxwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBsYXllckJhc2UsY2hhblBsYXllcn1cblxuXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkdhbWVib2FyZE1vZHVsZSIsImNyZWF0ZUdyaWRzIiwibHRyIiwibm8iLCJpZCIsImdyaWQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBhZGRpbmciLCJib3JkZXIiLCJ0ZXh0Q29udGVudCIsInRleHRBbGlnbiIsImRhdGFzZXQiLCJoaXQiLCJsZXR0ZXIiLCJudW1iZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiY3JlYXRlR2FtZWJvYXJkIiwiaSIsImNob29zZUNyZG50cyIsIlN0cnRMdHRycyIsIlN0cnRObyIsImxlbmd0aCIsIlZvckgiLCJjb29yZCIsIm92ZXIiLCJwdXNoIiwiTHRyTnVtYmVyIiwiY2hhckNvZGVBdCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInNoaXBmYWN0b3J5IiwibmFtZSIsImNvb3JkaW5hdGVzIiwidGhpcyIsImNhcnJpZXIiLCJ0IiwidGFyZ2V0IiwiYmFja2dyb3VuZENvbG9yIiwiUEMiLCJndW5uIiwiZGlyZWN0aW9uIiwicGlwIiwicGxheWVyQmFzZSIsInBsYXllcjJjb29yZCIsInAiLCJiYXR0bGVzaGlwIiwiY2hhblBsYXllciIsImRvbU1vZHVsZSIsIm51bWIiLCJsZXR0ZXJyIiwic3EiLCJhZGRFdmVudExpc3RlbmVyIiwiaGl0Q29vcmQiLCJjb25zb2xlIiwibG9nIiwiYWxlcnQiLCJzcGxpY2UiLCJwYjIiLCJjZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYnR0bHNoaXAyIiwicm12ZXZlbiIsInBsYXlHYW1lIiwic2VsZWN0aW9uTW9kdWxlIiwicDFjYXJyaWVyU2hpcCIsInAxYmF0dGxlU2hpcCJdLCJzb3VyY2VSb290IjoiIn0=