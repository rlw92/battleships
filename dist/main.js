(()=>{"use strict";var e={d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{jK:()=>b,zf:()=>C,o7:()=>w,P4:()=>P,VL:()=>L,hJ:()=>B,yR:()=>S,He:()=>I,w7:()=>A,sq:()=>k,t:()=>H});const t={createGrids:(e,t,n)=>{let l=document.createElement("div");l.style.padding="10px",l.style.border=0===n||0===t?"none":"solid black 2px",l.textContent=n,l.style.textAlign="center",0===n&&"0"===e?l.textContent=t:0===t&&"0"!=e&&(l.textContent=e),l.dataset.hit="No",l.dataset.P1hit="N",l.dataset.P2hit="N",l.dataset.letter=e,l.dataset.number=t,l.classList.add("cell"),l.setAttribute("id",l.dataset.letter+l.dataset.number),document.getElementById("gameboard1").appendChild(l)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function n(e,t,n,l){let o=[];if("V"===l){let l=11-n;t>l&&(t=l);for(let l=1;l<n+1;l++)o.push(e+t++)}else if("H"===l){let l=e.charCodeAt(0),r=75-n;l>r&&(l=r),console.log(l),console.log(r);for(let e=1;e<n+1;e++)o.push(String.fromCharCode(l++)+t)}return o}function l(e,t){let n=e,l=t,o=0;for(let e=0;e<l.length;e++)for(let t=0;t<n.length;t++)for(let r=0;r<n[t].coordinates.length;r++)n[t].coordinates[r]===l[e]&&o++;return o=o>0?"Y":"N",o}function o(e,t){this.name=e,this.coordinates=t,this.hitShip=()=>{alert("You struck the "+e+" ship")},this.isSunk=()=>{0===t.length&&alert("You sunk the "+e+" ship")}}let r;const a=e=>{e.target.style.backgroundColor="red";let t,l=e.target.dataset.letter,a=e.target.dataset.number,s=new o("Carrier",n(l,a,2,w));return"0"===a?console.log("Stay in the grid."):(P===A[0]?(t=L,r="p1c"):P===A[1]&&(t=S,r="p2c"),t.push(s)),t},s=e=>{e.target.style.backgroundColor="red";let t,a=e.target.dataset.letter,s=e.target.dataset.number,i=new o("Battleship",n(a,s,3,w));return"0"===s?console.log("Stay in the grid."):(P===A[0]?(t=L,r="p1c"):P===A[1]&&(t=S,r="p2c"),"Y"===l(t,n(a,s,3,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},i=e=>{e.target.style.backgroundColor="red";let t,a=e.target.dataset.letter,s=e.target.dataset.number,i=new o("Cruiser",n(a,s,4,w));return"0"===s?console.log("Stay in the grid."):(P===A[0]?(t=L,r="p1c"):P===A[1]&&(t=S,r="p2c"),"Y"===l(t,n(a,s,4,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},d=e=>{e.target.style.backgroundColor="red";let t,a=e.target.dataset.letter,s=e.target.dataset.number,i=new o("Submarine",n(a,s,5,w));return"0"===s?console.log("Stay in the grid."):(P===A[0]?(t=L,r="p1c"):P===A[1]&&(t=S,r="p2c"),"Y"===l(t,n(a,s,5,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},c=e=>{e.target.style.backgroundColor="red";let t,a=e.target.dataset.letter,s=e.target.dataset.number,i=new o("Destroyer",n(a,s,6,w));return"0"===s?console.log("Stay in the grid."):(P===A[0]?(t=L,r="p1c"):P===A[1]&&(t=S,r="p2c"),"Y"===l(t,n(a,s,6,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},u=function(e){let t=e.target.dataset.number,n=e.target.dataset.letter,l="blue";if("V"===w){let e=11-k;t>e&&(t=e),l="0"===t?"white":"grey";for(let e=0;e<k;e++)document.getElementById(n+(+t+e)).style.backgroundColor=l}else if("H"===w){let e=n.charCodeAt(0),l=75-k;e>l&&(e=l);for(let n=0;n<k;n++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="grey"}},g=function(e){e.target.backgroundColor="white";let t=e.target.dataset.number,n=e.target.dataset.letter,l=n+t;if(console.log(l),"V"===w){let e=11-k;t>e&&(t=e);for(let e=0;e<k;e++)document.getElementById(n+(+t+e)).style.backgroundColor="white"}else if("H"===w){let e=n.charCodeAt(0),l=75-k;e>l&&(e=l);for(let n=0;n<k;n++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}},h=function(){let e=B;P===A[0]?e=B:P===A[1]&&(e=I);for(let t=0;t<e.length;t++)console.log(e[t]),document.getElementById(e[t]).style.backgroundColor="red"},m=function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white"},y=function(e){"0"===e.target.dataset.number?e.target.style.backgroundColor="white":e.target.style.backgroundColor="red"},p=function(e){P===A[0]?b=e.target.dataset.P1hit:P===A[1]&&(b=e.target.dataset.P2hit),console.log(b),"Y"===b?e.target.style.backgroundColor="red":"N"===b&&(e.target.style.backgroundColor="white")},f=function(){let e=L;P===A[0]?(e=L,console.log(e)):P===A[1]&&(e=S,console.log(e));for(let t=0;t<e.length;t++)for(let n=0;n<e[t].coordinates.length;n++)document.getElementById(e[t].coordinates[n]).style.backgroundColor="grey"},v=(()=>{var e=document.getElementById("myModal"),t=document.getElementById("myBtn");let n=document.getElementById("para1"),l=document.getElementById("para2");document.getElementsByClassName("close")[0];let o=document.getElementById("PSbuttons");o.style.display="none",t.onclick=function(){e.style.display="None"};let r=document.getElementById("frnd"),a=document.getElementById("comp");return{showModule:function(){e.style.display="block",n.textContent="CHANGE PLACES!",l.textContent="Click button when ready.",o.style.display="none",t.style.display="block"},playerSelect:function(){e.style.display="block",n.textContent="Are you playing with a friend or against our AI?",t.style.display="none",document.querySelector(".close").style.display="none",o.style.display="block",r.addEventListener("click",(()=>{C="N",e.style.display="none"})),a.addEventListener("click",(()=>{C="Y",e.style.display="none"}))}}})(),E=(()=>{function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}return{test:function(){alert("TEST")},selectCarrier:function(){let t=e(65,74),r=String.fromCharCode(t),a=Math.floor(10*Math.random()+1),s="V";s=1===e(1,2)?"V":"H";let i=S,d=new o("Carrier",n(r,a,2,s));"Y"===l(i,n(r,a,2,s))?E.selectCarrier():(i.push(d),H())}}})();let k,b,C="N",L=[],S=[],B=[],I=[],w="V",A=["player1","player2"],P=A[0],G=L;P===A[0]?G=L:P===A[1]&&(G=S),document.getElementById("pip").textContent=P,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===w?(w="H",document.getElementById("position").textContent="Horizontal"):"H"===w&&(w="V",document.getElementById("position").textContent="Vertical")})),document.getElementById("shwshipos").addEventListener("mouseover",(()=>{m(),f()})),document.getElementById("shwshipos").addEventListener("mouseleave",(()=>{m(),h()}));const x=()=>{v.showModule(),P===A[0]?(P=A[1],G=S,document.getElementById("pip").textContent=P):P===A[1]?(P=A[0],G=L,document.getElementById("pip").textContent=P):(P=A[0],G=S,document.getElementById("pip").textContent=P),m(),h()};function Y(e){console.log(e.target.dataset.letter);let t=L,n=B,l=e.target.dataset.letter,o=e.target.dataset.number,r=l+o;if(console.log(r),console.log(t.length),P===A[0]?(t=S,n=B,b=e.target.dataset.P1hit):P===A[1]&&(t=L,n=I,b=e.target.dataset.P2hit),"0"===o)console.log("Stay in the grid.");else if("Y"===b)console.log("Already been hit, try again.");else{P===A[0]?(t=S,n=B,b=e.target.dataset.P1hit="Y"):P===A[1]&&(t=L,n=I,b=e.target.dataset.P2hit="Y");for(let e=0;e<t.length;e++)for(let n=0;n<t[e].coordinates.length;n++)t[e].coordinates[n]===r&&(console.log(t[e].coordinates),t[e].coordinates.splice(n,1),t[e].hitShip(),t[e].isSunk(),q(),console.log(t[e].coordinates),console.log("Player one sunk ships: 0"),console.log("Player two sunk ships: 0"));n.push(r),console.log("P1 strikes: "+B),console.log("P2 strikes: "+I),x()}}function q(){let e,t=0,n=L;P===A[0]?(n=S,e="Player One"):P===A[1]&&(n=L,e="Player Two");for(let e=0;e<n.length;e++)0===n[e].coordinates.length&&++t;console.log(t),5===t&&alert(e+" has won!")}function H(){if(G.length>4){k=1,x();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",H),e[t].style.backgroundColor="white",document.getElementById("ingamebuttons").style.display="block",document.getElementById("positionPara").style.display="none",document.getElementById("Chnge").style.display="none";!function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",Y),e[t].style.backgroundColor="white",e[t].removeEventListener("mouseover",u),e[t].removeEventListener("mouseleave",g),e[t].addEventListener("mouseover",y),e[t].addEventListener("mouseleave",p)}()}}const N={p1carrierShip:function(){let e=document.querySelectorAll(".cell");k=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",a),e[t].addEventListener("click",N.p1battleShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)},p1battleShip:function(){if(G.length>0){let e=document.querySelectorAll(".cell");k=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",a),e[t].removeEventListener("click",N.p1battleShip),e[t].addEventListener("click",s),e[t].addEventListener("click",N.p1cruiserShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1cruiserShip:function(){if(G.length>1){console.log(G);let e=document.querySelectorAll(".cell");k=4;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",s),e[t].removeEventListener("click",N.p1cruiserShip),e[t].addEventListener("click",i),e[t].addEventListener("click",N.p1submarineShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1submarineShip:function(){if(G.length>2){let e=document.querySelectorAll(".cell");k=5;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",N.p1submarineShip),e[t].addEventListener("click",d),e[t].addEventListener("click",N.p1destroyerShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1destroyerShip:function(){if(G.length>3){let e=document.querySelectorAll(".cell");k=6;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",N.p1destroyerShip),e[t].addEventListener("click",c),P===A[1]?e[t].addEventListener("click",H):P===A[0]&&e[t].addEventListener("click",N.loop),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},loop:function(){if(G.length>4)if("Y"===C)E.selectCarrier();else{x();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",N.loop),e[t].style.backgroundColor="white";N.p1carrierShip()}}};v.playerSelect(),t.createGameboard(),N.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixZQUFZM0IsR0FDMUNRLEVBQU10RCxHQUFHeUUsaUJBQWlCLGFBQWEzQixLQTJCeUN5RCxLQXRCcEYsV0FDSSxHQUFHakIsRUFBS2xGLE9BQU8sRUFFWCxHQUFTLE1BQU5zRSxFQUFXQyxFQUFXUSxvQkFDckIsQ0FJWkksSUFDSSxJQUFJakMsRUFBUXpFLFNBQVMwRSxpQkFBaUIsU0FFdEMsSUFBSSxJQUFJdkQsRUFBRSxFQUFFQSxFQUFFc0QsRUFBTWxELE9BQU9KLElBQ3ZCc0QsRUFBTXRELEdBQUcrRixvQkFBb0IsUUFBUWxELEdBQ3JDUyxFQUFNdEQsR0FBRytGLG9CQUFvQixRQUFRRSxFQUFnQk0sTUFDckRqRCxFQUFNdEQsR0FBR2pCLE1BQU1tRCxnQkFBa0IsUUFFN0MrRCxFQUFnQkMsbUJBYWJ2QyxFQUFZWSxlQUNYaEcsRUFBZ0J3QixrQkFDcEJrRyxFQUFnQkMsaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvY2hvb3NlQ29vcmRpbmF0ZXMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvb3ZlckxhcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9zaGlwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvY29tcHV0ZXJBSS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IEdhbWVib2FyZE1vZHVsZSA9ICgoKSA9PiB7XG5cbiAgICBsZXQgYm9yZCA9IFwic29saWQgYmxhY2sgMnB4XCI7XG4gICAgbGV0IG5vYm9yZCA9IFwibm9uZVwiO1xuICAgIFxuICAgIFxuICAgIGNvbnN0IGNyZWF0ZUdyaWRzID0gKGx0cixubyxpZCkgPT57XG4gICAgbGV0IGdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgZ3JpZC5zdHlsZS5wYWRkaW5nID0gXCIxMHB4XCI7XG4gICAgLy90cnlpbmcgdG8gdGFrZSBvdXQgdGhlIGJvcmRlcmluZyBvZiB0aGUgbm90IGluIHBsYXkgY2VsbHNcbiAgICBpZihpZD09PSAwKXtncmlkLnN0eWxlLmJvcmRlcj1ub2JvcmR9XG4gICAgZWxzZSBpZihubz09PTApe2dyaWQuc3R5bGUuYm9yZGVyID0gbm9ib3JkO31cbiAgICBlbHNle2dyaWQuc3R5bGUuYm9yZGVyID0gYm9yZDt9XG4gICAgXG4gICAgXG4gICAgZ3JpZC50ZXh0Q29udGVudCA9IGlkO1xuICAgIGdyaWQuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICBpZihpZD09PTAgJiYgbHRyPT09XCIwXCIpe2dyaWQudGV4dENvbnRlbnQgPSBub31cbiAgICBlbHNlIGlmKG5vPT09MCAmJiBsdHIhPVwiMFwiKXtncmlkLnRleHRDb250ZW50ID0gbHRyfVxuICAgIGdyaWQuZGF0YXNldC5oaXQgPSBcIk5vXCJcbiAgICBncmlkLmRhdGFzZXQuUDFoaXQ9XCJOXCJcbiAgICBncmlkLmRhdGFzZXQuUDJoaXQ9XCJOXCJcbiAgICBsZXQgbGV0dGVyID0gZ3JpZC5kYXRhc2V0LmxldHRlciA9IGx0cjtcbiAgICBsZXQgbnVtYmVyID0gZ3JpZC5kYXRhc2V0Lm51bWJlciA9IG5vO1xuICAgIC8vc2hvd3Mgd2hpY2ggcGxheWVyIG93bnMgdGhlIGNlbGwvL1xuICAgIC8vbGV0IHBsYXllciA9IGdyaWQuZGF0YXNldC5wbGF5ZXJjZWxsID0gXCJwbGF5ZXJcIitwbHlyO1xuICAgIFxuICAgIC8vY3JlYXRpbmcgYSBjbGFzcyBmb3IgZWFjaCBncmlkIHNvIHdlIGNhbiBhY2Nlc3MgaXQgZnJvbSB0aGUgZnVuY3Rpb25zXG4gICAgZ3JpZC5jbGFzc0xpc3QuYWRkKFwiY2VsbFwiKTtcbiAgICAvL2NyZWF0aW5nIGFuIGlkIHRoYXQgbWF0Y2hlcyBpdHMgY29vcmRpbmF0ZXNcbiAgICBncmlkLnNldEF0dHJpYnV0ZSgnaWQnLGdyaWQuZGF0YXNldC5sZXR0ZXIrZ3JpZC5kYXRhc2V0Lm51bWJlcilcbiAgICBcbiAgICAgICAgIFxuICAgIGxldCBnYW1lYm9hcmQgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lYm9hcmQxXCIpO1xuICAgIFxuICAgIGdhbWVib2FyZC5hcHBlbmRDaGlsZChncmlkKTtcbiAgICBcbiAgICB9XG4gICAgXG4gICAgLy9jcmVhdGUgdGhlIHdob2xlIGdyaWQgd2l0aCBiZWxvdyBmdW5jdGlvblxuICAgIGNvbnN0IGNyZWF0ZUdhbWVib2FyZCA9ICgpID0+e1xuICAgIFxuICAgIGZvcihsZXQgaT0wO2k8MTE7aSsrKXtcbiAgICAgICAgXG4gICAgXG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIjBcIiwwLGkpXG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkFcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQlwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJDXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkRcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJGXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkdcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSFwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJJXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkpcIixpKTtcbiAgICBcbiAgICB9XG4gICAgfVxuICAgIHJldHVybiB7Y3JlYXRlR3JpZHMsY3JlYXRlR2FtZWJvYXJkfVxuICAgIH0pKCk7XG5cbiAgICBleHBvcnR7R2FtZWJvYXJkTW9kdWxlfTsiLCIvL3RoZSBjaG9vb3NlIGNvb3JkaW5hdGVzIGZ1bmN0aW9uXG5mdW5jdGlvbiBjaG9vc2VDcmRudHMoU3RydEx0dHJzLFN0cnRObyxsZW5ndGgsVm9ySCl7XG4gICAgbGV0IGNvb3JkID0gW107XG4gICAgXG4gICAgaWYoVm9ySD09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLWxlbmd0aDtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihTdHJ0Tm8+b3Zlcil7U3RydE5vID0gb3Zlcn1cbiAgICAvL2lmKFZvckg9PT1cIlZlcnRpY2FsXCIpe30gV2lsbCBiZSB0cmVhdGluZyB0aGlzIHRlc3RpbmcgYXMgY29tcGxldGUgdmVydGljYWwgcG9zaXRpb25pbmdcbiAgICBmb3IobGV0IGk9MTtpPGxlbmd0aCsxO2krKyl7XG4gICAgICAgIGNvb3JkLnB1c2goU3RydEx0dHJzICsgU3RydE5vKyspXG4gICAgfVxufVxuXG5lbHNlIGlmKFZvckg9PT1cIkhcIil7XG4gICAgbGV0IEx0ck51bWJlciA9IFN0cnRMdHRycy5jaGFyQ29kZUF0KDApXG4gICAgbGV0IG92ZXIgPSA3NS1sZW5ndGg7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgY29uc29sZS5sb2coTHRyTnVtYmVyKVxuICAgIGNvbnNvbGUubG9nKG92ZXIpXG4gICAgXG4gICAgZm9yKGxldCBpPTE7aTxsZW5ndGgrMTtpKyspe1xuICAgICAgICBjb29yZC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgU3RydE5vKVxuICAgIH1cblxufVxuICAgIHJldHVybiBjb29yZDtcblxufVxuXG5leHBvcnQge2Nob29zZUNyZG50c30iLCIvL2NvZGUgZm9yIGlkZW50aWZ5aW5nIHdoZW4gdGhlIGNob3NlbiBjb29yZGluYXRlcyBvdmVybGFwIFxuLy93aXRoIGNvb3JkaW5hdGVzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWRcblxuXG5cblxuXG5mdW5jdGlvbiBvdmVyTGFwKGEsYil7XG4vL1BsYz0gcGxheWVyIGNvb3JkaW5hdGVzICAgIFxubGV0IHBsYz1hO1xuLy9jcmQgaXMgdGhlIG5ldyBjb29yZGluYXRlc1xubGV0IGNyZCA9Yjtcbi8vdmFyaWFibGUgdG8gcmV0dXJuXG5sZXQgb3ZybGFwPTA7XG5cbmZvcihsZXQgej0wO3o8Y3JkLmxlbmd0aDt6Kyspe1xuZm9yKGxldCBwPTA7cDxwbGMubGVuZ3RoO3ArKyl7XG4gICAgZm9yKGxldCBpPTA7aTxwbGNbcF0uY29vcmRpbmF0ZXMubGVuZ3RoO2krKyl7XG4gICAgaWYocGxjW3BdLmNvb3JkaW5hdGVzW2ldPT09Y3JkW3pdKXtvdnJsYXArK31cbiAgICBcbn1cbn1cbn1cbmlmKG92cmxhcD4wKXtvdnJsYXA9XCJZXCJ9XG4gICAgZWxzZXtvdnJsYXA9XCJOXCJ9XG5yZXR1cm4gb3ZybGFwXG59XG5cbi8qXG5cbi8vc2Vjb25kIGF0dGVtcHQgZHVtYmluZyBpdCBkb3duXG5mdW5jdGlvbiBvdmVyTGFwKGEsYil7XG4gICAgLy9QbGM9IHBsYXllciBjb29yZGluYXRlcyAgICBcbiAgICBsZXQgcGxjPWE7XG4gICAgLy9jcmQgaXMgdGhlIG5ldyBjb29yZGluYXRlc1xuICAgIGxldCBjcmQgPWI7XG4gICAgLy92YXJpYWJsZSB0byByZXR1cm5cbiAgICBsZXQgb3ZybGFwID0wO1xuICAgIFxuICAgIGZvcihsZXQgcD0wO3A8cGxjLmxlbmd0aDtwKyspe1xuICAgIGZvcihsZXQgej0wO3o8Y3JkLmxlbmd0aDt6Kyspe1xuICAgICAgICBpZihwbGNbcF09PT1jcmRbel0pe292cmxhcCsrfVxuICAgICAgICBcbiAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmKG92cmxhcD4wKXtvdnJsYXA9XCJZXCJ9XG4gICAgZWxzZXtvdnJsYXA9XCJOXCJ9XG4gICAgcmV0dXJuIG92cmxhcFxuICAgIH1cbiAgICAqL1xuXG5leHBvcnQge292ZXJMYXB9IiwiaW1wb3J0e3BpcCxkaXJlY3Rpb24scGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwbGF5ZXJCYXNlfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0e2Nob29zZUNyZG50c30gZnJvbSAnLi9jaG9vc2VDb29yZGluYXRlcydcbmltcG9ydHtvdmVyTGFwfSBmcm9tICcuL292ZXJMYXAnXG5cblxuXG5mdW5jdGlvbiBzaGlwZmFjdG9yeShuYW1lLGNvb3JkaW5hdGVzKXtcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy5jb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzXG4gICAgdGhpcy5oaXRTaGlwID0gKCk9PnthbGVydChcIllvdSBzdHJ1Y2sgdGhlIFwiICsgbmFtZSArIFwiIHNoaXBcIil9XG4gICAgdGhpcy5pc1N1bmsgPSAoKSA9PntpZihjb29yZGluYXRlcy5sZW5ndGg9PT0wKXthbGVydChcIllvdSBzdW5rIHRoZSBcIisgbmFtZSArXCIgc2hpcFwiKTt9fVxuICAgIFxuICB9XG5cbiAgbGV0IGNvb3JkaWQ7XG5cblxuICBjb25zdCBjYXJyaWVyID0gKHQpID0+eyAgICBcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQ2FycmllclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDIsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuIFxuICAgIFBDLnB1c2goZ3Vubik7XG4gIFxuICAgICAgXG4gICAgfVxuICAgIHJldHVybiBQQztcbiAgICB9XG5cbiAgY29uc3QgYmF0dGxlc2hpcCA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQmF0dGxlc2hpcFwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMyxkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgZWxzZXsgXG4gICAgUEMucHVzaChndW5uKTtcbiAgICBcblxuICAgIFxuICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBjcnVpc2VyID0gKHQpID0+e1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDcnVpc2VyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihudW1iZXI9PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNle1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw0LGRpcmVjdGlvbikpPT09XCJZXCIpe2FsZXJ0KFwiVGhlc2UgdGlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWQsIHBsZWFzZSBjaG9vc2UgZGlmZmVyZW50IHRpbGVzXCIpfVxuICAgIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgXG5cbiAgICBcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBzdWJtYXJpbmUgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIlN1Ym1hcmluZVwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDUsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNSxkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgIFxuICAgIFxuICAgIH19XG4gICAgcmV0dXJuIFBDO1xuICB9XG4gIGNvbnN0IGRlc3Ryb3llciA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiRGVzdHJveWVyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihudW1iZXI9PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNle1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw2LGRpcmVjdGlvbikpPT09XCJZXCIpe2FsZXJ0KFwiVGhlc2UgdGlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWQsIHBsZWFzZSBjaG9vc2UgZGlmZmVyZW50IHRpbGVzXCIpfVxuICAgIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG5cbiAgICBcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuXG4gIGV4cG9ydCB7c2hpcGZhY3RvcnksY2FycmllcixiYXR0bGVzaGlwLGNydWlzZXIsc3VibWFyaW5lLGRlc3Ryb3llcn0iLCJpbXBvcnQge3NxLGRpcmVjdGlvbixwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBpcCxwbGF5ZXIxc3RyaWtlcyxwbGF5ZXIyc3RyaWtlcyxwbGF5ZXJCYXNlLFBoaXR9IGZyb20gJy4vaW5kZXgnXG5jb25zdCBkb21Nb2R1bGUgPSAoKCkgPT57XG4vL2Z1bmN0aW9uIGZvciBoaWdobGlnaHRpbmcgc3F1YXJlcyB3aGVuIGhvdmVyaW5nXG5mdW5jdGlvbiBob3Zlcih0KXtcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xubGV0IGNvbG9yID0gXCJibHVlXCI7XG5cbmlmKGRpcmVjdGlvbj09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKG51bWI+b3Zlcil7bnVtYiA9IG92ZXJ9XG4gICAgaWYobnVtYj09PVwiMFwiKXtjb2xvciA9IFwid2hpdGVcIn1cbiAgICBlbHNle2NvbG9yPVwiZ3JleVwifVxuZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGV0dGVycisoK251bWIraSkpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yfX1cbmVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPWxldHRlcnIuY2hhckNvZGVBdCgwKVxuICAgIGxldCBvdmVyID0gNzUtc3E7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgbnVtYikuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwiZ3JleVwifVxufVxufVxuXG4vL2Z1bmN0aW9uIGZvciByZXR1cm5pbmcgc3F1YXJlIGNvbG9yIHRvIHdoaXRlIGFmdGVyIGxlYXZpbmdcbmZ1bmN0aW9uIGxlYXZlKHQpe3QudGFyZ2V0LmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xubGV0IGhpdCA9IGxldHRlcnIrbnVtYjtcbmNvbnNvbGUubG9nKGhpdCk7XG5cbmlmKGRpcmVjdGlvbj09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKG51bWI+b3Zlcil7bnVtYiA9IG92ZXJ9XG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCJ9fVxuICAgIGVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgICAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICAgICAgbGV0IG92ZXIgPSA3NS1zcTtcbiAgICAgICAgXG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBudW1iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwifVxuICAgIH1cblxuICAgIFxuICAgIH1cblxuICAgIFxuICAgXG4gICAgICAvL2Z1bmN0aW9uIHRoYXQgYWxsb3dzIHVzIHRvIHVwZGF0ZSB0aWxlcyB3aXRob3V0IGNhcnJ5aW5nIHByZXZpb3VzIHRpbGVzIG92ZXJcbiAgICAgIGZ1bmN0aW9uIHdoaXRlT3V0KCl7XG4gICAgICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO31cbiAgICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBhdHRhY2tCb2FyZCgpe1xuICAgICAgICBsZXQgc3RyaWtlID0gcGxheWVyMXN0cmlrZXM7XG4gICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7c3RyaWtlPXBsYXllcjFzdHJpa2VzfVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtzdHJpa2U9cGxheWVyMnN0cmlrZXN9ICAgIFxuICAgIGZvcihsZXQgaT0wO2k8c3RyaWtlLmxlbmd0aDtpKyspe1xuICAgICAgICBjb25zb2xlLmxvZyhzdHJpa2VbaV0pXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0cmlrZVtpXSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwbGF5ZXJCb2FyZCgpe1xuICAgICAgICBsZXQgc2hvdyA9IHBsYXllcjFjb29yZDtcbiAgICAgICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtzaG93PXBsYXllcjFjb29yZDtjb25zb2xlLmxvZyhzaG93KX1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7c2hvdz1wbGF5ZXIyY29vcmQ7IGNvbnNvbGUubG9nKHNob3cpfSBcbiAgICBmb3IobGV0IGk9MDtpPHNob3cubGVuZ3RoO2krKyl7XG4gICAgICAgIGZvcihsZXQgaWk9MDtpaTxzaG93W2ldLmNvb3JkaW5hdGVzLmxlbmd0aDtpaSsrKXtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2hvd1tpXS5jb29yZGluYXRlc1tpaV0pLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZXlcIjtcbiAgICAgICAgICAgIFxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgICAgXG4gICAgfVxuXG4gICAgLy9mdW5jdGlvbnMgZm9yIHdoZW4gdGhlIGhpdCBmdW5jdGlvbiBpcyBpbiBwbGF5XG4gICAgZnVuY3Rpb24gaGl0SG92ZXIodCl7XG4gICAgICAgIGlmKHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyPT09XCIwXCIpXG57dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIn1lbHNle3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInJlZFwifVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGl0TGVhdmUodCl7XG4gICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAxaGl0fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDJoaXR9ICBcbiAgICBjb25zb2xlLmxvZyhQaGl0KVxuICAgICAgICBpZihQaGl0PT09XCJZXCIpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInJlZFwifVxuICAgICAgICBlbHNlIGlmKFBoaXQ9PT1cIk5cIil7dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwifVxuICAgIH1cblxucmV0dXJuIHtob3ZlcixsZWF2ZSxhdHRhY2tCb2FyZCx3aGl0ZU91dCxoaXRIb3ZlcixoaXRMZWF2ZSxwbGF5ZXJCb2FyZH1cbn0pKCk7XG5cblxuZXhwb3J0e2RvbU1vZHVsZX0iLCJpbXBvcnQge2NpcCxzZWxlY3Rpb25Nb2R1bGV9IGZyb20gJy4vaW5kZXgnXG5cbmNvbnN0IG1vZGFsTW9kdWxlID0gKCgpID0+e1xuLy8gR2V0IHRoZSBtb2RhbFxudmFyIG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteU1vZGFsXCIpO1xuXG4vLyBHZXQgdGhlIGJ1dHRvbiB0aGF0IG9wZW5zIHRoZSBtb2RhbFxudmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlCdG5cIik7XG5cbi8vZ2V0IHRoZSBjb250ZW50IG9mIHRoZSBwYXJhZ3JhcGhcbmxldCBwYXJhMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFyYTFcIik7XG5sZXQgcGFyYTIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhcmEyXCIpXG5cbi8vIEdldCB0aGUgPHNwYW4+IGVsZW1lbnQgdGhhdCBjbG9zZXMgdGhlIG1vZGFsXG52YXIgc3BhbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjbG9zZVwiKVswXTtcblxuLy9wbGF5ZXIgc2VsZWN0IGJ1dHRvbnNcbmxldCBwc2J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlBTYnV0dG9uc1wiKTtcbnBzYnRucy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcblxuLy8gV2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGJ1dHRvbiwgY2xvc2VzIHRoZSBtb2RhbFxuYnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiTm9uZVwiO1xufVxuXG5cblxuLy9wbGF5ZXIgc2VsZWN0IGJ1dHRvbnNcbmxldCBmcm5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcm5kXCIpO1xubGV0IGNvbXAgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wXCIpO1xuZnVuY3Rpb24gc2hvd01vZHVsZSgpe1xuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgcGFyYTEudGV4dENvbnRlbnQgPSBcIkNIQU5HRSBQTEFDRVMhXCJcbiAgICBwYXJhMi50ZXh0Q29udGVudCA9IFwiQ2xpY2sgYnV0dG9uIHdoZW4gcmVhZHkuXCJcbiAgICBwc2J0bnMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG5cbiBcbn1cblxuZnVuY3Rpb24gcGxheWVyU2VsZWN0KCl7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgcGFyYTEudGV4dENvbnRlbnQgPSBcIkFyZSB5b3UgcGxheWluZyB3aXRoIGEgZnJpZW5kIG9yIGFnYWluc3Qgb3VyIEFJP1wiXG4gICAgYnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgIHBzYnRucy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgZnJuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcbiAgICAgIGNpcCA9IFwiTlwiXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBcblxuICAgIH0pXG5cbiAgIGNvbXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XG4gICAgICBjaXAgPSBcIllcIlxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgXG5cbiAgICB9KVxufVxuXG5yZXR1cm4ge3Nob3dNb2R1bGUscGxheWVyU2VsZWN0fVxufSkoKTtcblxuZXhwb3J0IHttb2RhbE1vZHVsZX1cbiIsImltcG9ydCB7IGNob29zZUNyZG50cyB9IGZyb20gXCIuL2Nob29zZUNvb3JkaW5hdGVzXCI7XG5pbXBvcnQgeyBwbGF5ZXIyY29vcmQsc3RhcnRHYW1lIH0gZnJvbSBcIi4vaW5kZXhcIlxuaW1wb3J0IHsgb3ZlckxhcCB9IGZyb20gXCIuL292ZXJMYXBcIjtcbmltcG9ydCB7IHNoaXBmYWN0b3J5IH0gZnJvbSBcIi4vc2hpcHNcIjtcblxuXG4vKiBcblRoZSBjb21wdXRlciBBSSBuZWVkcyB0byBiZSBhYmxlIHRvIHJhbmRvbWx5IHNlbGVjdCBpdHMnIHNoaXAgcG9zaXRpb25zLlxuUmFuZG9tbHkgc2VsZWN0IGl0cycgaGl0IHBvaW50cy5cblxucmFuZG9tIG51bWJlciBiZXR3ZWVuIG9uZSBhbmQgdGVuXG5NYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApICsgMSk7XG5cbkEgbW9yZSBhZHZhbmNlZCBBSSB3b3VsZCB0aGVuIGJlIGFibGUgdG8gaGl0IGFkamFjZW50IGdyaWRzIHdoZW4gaXQgZGV0ZWN0cyBhIGhpdC5cbiovXG5cblxuLy9XZSBuZWVkIHRoZSBjb21wdXRlciB0byBnZW5lcmF0ZSBpdHMgY29vcmRpbmF0ZXMgcmFuZG9tbHkgdGhlbiBzdGFydCB0aGUgZ2FtZSBcblxuY29uc3QgY29tcHV0ZXJBSSA9ICgoKSA9PntcblxuZnVuY3Rpb24gdGVzdCgpe1xuICAgIGFsZXJ0KFwiVEVTVFwiKTs7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbUludEZyb21JbnRlcnZhbChtaW4sIG1heCkgeyAvLyBtaW4gYW5kIG1heCBpbmNsdWRlZCBcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSArIG1pbilcbn1cblxuLy93b3JrIGNsb3NlbHkgd2l0aCBzaGlwcy5qcyB0byBjcmFmdCB0aGlzXG5mdW5jdGlvbiBzZWxlY3RDYXJyaWVyKCl7XG4gICAgLy9sZXR0ZXIgbmVlZHMgdG8gYmUgbW9kaWZpZWQgdG8gY2h1cm4gb3V0IGxldHRlciBiZXR3ZWVuIGEgYW5kIGpcbiAgICBsZXQgcmFuZG9tTm8gPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoNjUsNzQpO1xuICAgIGxldCBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHJhbmRvbU5vKTtcbiAgICBsZXQgbnVtYmVyID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwKSArIDEpO1xuICAgIGxldCBkaXIgPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoMSwyKTtcbiAgICBsZXQgZGlyZWN0aW9uID0gXCJWXCJcbiAgICBpZihkaXI9PT0xKXtkaXJlY3Rpb249XCJWXCJ9ZWxzZXtkaXJlY3Rpb249XCJIXCJ9XG4gICAgbGV0IFBDID0gcGxheWVyMmNvb3JkO1xuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQ2FycmllclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDIsZGlyZWN0aW9uKSlcbiAgICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDIsZGlyZWN0aW9uKSk9PT1cIllcIil7Y29tcHV0ZXJBSS5zZWxlY3RDYXJyaWVyKCl9XG4gIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgLy90ZXN0aW5nIGZpcnN0XG4gICAgLy9jb21wdXRlckFJLnNlbGVjdEJhdHRsZXNoaXAoKTtcbiAgICBzdGFydEdhbWUoKVxufVxufVxucmV0dXJuIHt0ZXN0LHNlbGVjdENhcnJpZXJ9XG59KSgpO1xuXG5cbmV4cG9ydCB7Y29tcHV0ZXJBSX0iLCJpbXBvcnQge0dhbWVib2FyZE1vZHVsZX0gZnJvbSAnLi9nYW1lYm9hcmQnXG5pbXBvcnQge2NhcnJpZXIsYmF0dGxlc2hpcCxjcnVpc2VyLHN1Ym1hcmluZSxkZXN0cm95ZXJ9IGZyb20gJy4vc2hpcHMnXG5pbXBvcnQge2RvbU1vZHVsZX0gZnJvbSAnLi9kb20nXG5pbXBvcnQge21vZGFsTW9kdWxlfSBmcm9tICcuL21vZGFsJ1xuaW1wb3J0IHtjb21wdXRlckFJfSBmcm9tICcuL2NvbXB1dGVyQUknXG5cbi8vY29tcHV0ZXIgaW4gcGxheVxubGV0IGNpcCA9IFwiTlwiXG4gIC8vY29vcmRpbmF0ZXMgb2YgZWFjaCBwbGF5ZXJzIHNoaXBcbiAgbGV0IHBsYXllcjFjb29yZD1bXTtcbiAgbGV0IHBsYXllcjJjb29yZD1bXTtcbiAgLy9hbW91bnQgb2Ygc3VuayBzaGlwcyBkZXRlcm1pbmluZyB3aGV0aGVyIHRoZSBnYW1lIGlzIG92ZXIgb3Igbm90XG4gIGxldCBwbGF5ZXIxU3Vua1NoaXBzPTA7XG4gIGxldCBwbGF5ZXIyU3Vua1NoaXBzPTA7XG4gIC8vY29vcmRpbmF0ZXMgb2YgZWFjaCB0aWxlIGhpdCBieSBlYWNoIHBsYXllclxuICBsZXQgcGxheWVyMXN0cmlrZXM9W11cbiAgbGV0IHBsYXllcjJzdHJpa2VzPVtdXG4gIC8vVj1WZXJ0aWNhbCwgSD1Ib3Jpem9udGFsXG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICAvL3BsYXllciBpbiBwbGF5XG4gIGxldCBwbGF5ZXJCYXNlID0gW1wicGxheWVyMVwiLFwicGxheWVyMlwiXTtcbiAgbGV0IHBpcCA9IHBsYXllckJhc2VbMF07XG4gIGxldCBQY3JkID0gcGxheWVyMWNvb3JkO1xuICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BjcmQgPSBwbGF5ZXIxY29vcmQ7fVxuICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UGNyZCA9IHBsYXllcjJjb29yZDt9XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO1xuICAvL3RoZSBzcXVhcmVzIHRoYXQgbmVlZCBoaWdobGlnaHRpbmcgZm9yIHRoZSBkb21cbiAgbGV0IHNxO1xuICBsZXQgUGhpdDtcblxuXG4gIFxuICBcblxuLy9idXR0b24gdG8gY2hhbmdlIHRoZSBwb3NpdGlvbmluZyBvZiB0aGUgcGxhY2VtZW50XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e2lmKGRpcmVjdGlvbj09PVwiVlwiKXtkaXJlY3Rpb249XCJIXCI7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblwiKS50ZXh0Q29udGVudD1cIkhvcml6b250YWxcIjt9ZWxzZSBpZihkaXJlY3Rpb249PT1cIkhcIil7ZGlyZWN0aW9uPVwiVlwiO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25cIikudGV4dENvbnRlbnQ9XCJWZXJ0aWNhbFwifX0pXG4vL2F0dGFja2JvYXJkIGJ1dHRvbiB0aGF0IHNob3dzIHBvc2l0aW9ucyB3aGVyZSB0aGUgcGxheWVyIGhhcyBhdHRhY2tlZFxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaHdzaGlwb3NcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywoKT0+e2RvbU1vZHVsZS53aGl0ZU91dCgpO1xuICAgIGRvbU1vZHVsZS5wbGF5ZXJCb2FyZCgpO1xuICAgIH0pXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNod3NoaXBvc1wiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywoKT0+e2RvbU1vZHVsZS53aGl0ZU91dCgpO1xuICAgIGRvbU1vZHVsZS5hdHRhY2tCb2FyZCgpO30pXG5cbi8vZnVuY3Rpb24gY2hhbmdlcyBwbGF5ZXJcbmNvbnN0IGNoYW5QbGF5ZXIgPSAoKT0+e1xuICAgIG1vZGFsTW9kdWxlLnNob3dNb2R1bGUoKTtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe3BpcCA9IHBsYXllckJhc2VbMV07XG4gICAgICAgIFBjcmQgPSBwbGF5ZXIyY29vcmQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7cGlwID0gcGxheWVyQmFzZVswXTtcbiAgICAgICAgUGNyZCA9IHBsYXllcjFjb29yZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgIGVsc2V7cGlwID0gcGxheWVyQmFzZVswXTtcbiAgICAgICAgUGNyZD1wbGF5ZXIyY29vcmQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICAgICAgZG9tTW9kdWxlLndoaXRlT3V0KCk7XG4gICAgICAgIGRvbU1vZHVsZS5hdHRhY2tCb2FyZCgpO1xuXG59XG5cblxuLy9iZWxvdyBmdW5jdGlvbnMgbmVlZCB0byBiZSBncm91cGVkIGludG8gYSBtb2R1bGVcblxuZnVuY3Rpb24gaGl0KHQpe2NvbnNvbGUubG9nKHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyKTtcbiAgICBsZXQgUEMgPSBwbGF5ZXIxY29vcmQ7XG4gICAgbGV0IHN0cmlrZSA9IHBsYXllcjFzdHJpa2VzO1xuICAgIGxldCBMID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IE4gPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAgbGV0IGhpdENvb3JkID0gTCtOO1xuICAgIGNvbnNvbGUubG9nKGhpdENvb3JkKTtcbiAgICBjb25zb2xlLmxvZyhQQy5sZW5ndGgpOyBcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkO3N0cmlrZT1wbGF5ZXIxc3RyaWtlcztQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDFoaXR9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMWNvb3JkO3N0cmlrZT1wbGF5ZXIyc3RyaWtlcztQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDJoaXR9XG4gICAgaWYoTj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2UgaWYoUGhpdD09PVwiWVwiKXtjb25zb2xlLmxvZyhcIkFscmVhZHkgYmVlbiBoaXQsIHRyeSBhZ2Fpbi5cIil9XG4gICAgZWxzZXsgICAgICAgXG4gICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIyY29vcmQ7c3RyaWtlPXBsYXllcjFzdHJpa2VzO1BoaXQ9dC50YXJnZXQuZGF0YXNldC5QMWhpdD1cIllcIn1cbiAgICAgICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMWNvb3JkO3N0cmlrZT1wbGF5ZXIyc3RyaWtlcztQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDJoaXQ9XCJZXCJ9XG4gICAgZm9yKGxldCBwPTA7cDxQQy5sZW5ndGg7cCsrKXtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxQQ1twXS5jb29yZGluYXRlcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgaWYoUENbcF0uY29vcmRpbmF0ZXNbaV09PT1oaXRDb29yZCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhQQ1twXS5jb29yZGluYXRlcylcbiAgICAgICAgICAgIFBDW3BdLmNvb3JkaW5hdGVzLnNwbGljZShpLDEpXG4gICAgICAgIFBDW3BdLmhpdFNoaXAoKTtcbiAgICAgICAgUENbcF0uaXNTdW5rKCk7ICAgIFxuICAgICAgICBcbiAgICAgICAgZ2FtZU92ZXIoKTtcbiAgICAgICAgY29uc29sZS5sb2coUENbcF0uY29vcmRpbmF0ZXMpXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUGxheWVyIG9uZSBzdW5rIHNoaXBzOiBcIisgcGxheWVyMVN1bmtTaGlwcykgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIlBsYXllciB0d28gc3VuayBzaGlwczogXCIrIHBsYXllcjJTdW5rU2hpcHMpICBcbiAgICAgICAgXG4gICAgICAgIH19XG4gICAgfXN0cmlrZS5wdXNoKGhpdENvb3JkKSAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJQMSBzdHJpa2VzOiBcIisgcGxheWVyMXN0cmlrZXMpXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUDIgc3RyaWtlczogXCIrIHBsYXllcjJzdHJpa2VzKVxuICAgICAgICBcbiAgICBjaGFuUGxheWVyKCl9fVxuXG5cbiBmdW5jdGlvbiBnYW1lT3Zlcigpe1xuICAgIGxldCBjb3VudCA9MDtcbiAgICBsZXQgUEMgPSBwbGF5ZXIxY29vcmQ7XG4gICAgbGV0IHBscjtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkOyBwbHI9XCJQbGF5ZXIgT25lXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMWNvb3JkOyBwbHI9XCJQbGF5ZXIgVHdvXCJ9XG4gICAgZm9yKGxldCBpID0wO2k8UEMubGVuZ3RoO2krKyl7XG4gICAgICAgaWYoUENbaV0uY29vcmRpbmF0ZXMubGVuZ3RoPT09MCl7Kytjb3VudH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coY291bnQpO1xuICAgIGlmKGNvdW50PT09NSl7YWxlcnQoIHBscisgXCIgaGFzIHdvbiFcIil9XG4gICAgfVxuICAgIFxuXG5mdW5jdGlvbiBzdGFydEdhbWUoKXtcbiAgICBpZihQY3JkLmxlbmd0aD40KXtcbiAgICBzcT0xXG4gICAgY2hhblBsYXllcigpO1xuICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbmNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdGFydEdhbWUpXG5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluZ2FtZWJ1dHRvbnNcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25QYXJhXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQ2huZ2VcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xufVxucGxheUdhbWUoKX19XG4gICAgXG4gICAgXG5mdW5jdGlvbiBwbGF5R2FtZSgpe1xuICAgIFxuICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcblxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGhpdClcbmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbmNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaGl0SG92ZXIpXG5jZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUuaGl0TGVhdmUpXG5cblxufVxufVxuXG5cblxuLy9TZWxlY3Rpb24gbW9kdWxlXG5jb25zdCBzZWxlY3Rpb25Nb2R1bGUgPSAoKCkgPT57XG4gICAgXG4gICAgXG5cbiAgICAgICAgXG4gICAgLy9hZGRzIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGV2ZXJ5IGdyaWQgY2VsbCBhbGxvd2luZyB1cyB0byBjaG9vc2Ugb3VyIGNvb3JkaW5hdGVzLG1hcCB0aGVtIHRvIHRoZSBhcnJheSB0aGVuIGNoYW5nZSBwbGF5ZXJcbiAgICBmdW5jdGlvbiBwMWNhcnJpZXJTaGlwKCl7XG4gICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTI7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY2FycmllcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxYmF0dGxlU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgICAgIH1cbiAgICBmdW5jdGlvbiBwMWJhdHRsZVNoaXAoKXsgICBcbiAgICAgICAgXG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjApe1xuICAgICAgICBcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTM7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsY2FycmllcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxYmF0dGxlU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsYmF0dGxlc2hpcCkgXG4gICAgICAgICAgICAvL2lmIGNvb3JkaW5hdGVzIG1hdGNoIGxlbmd0aCBuZWVkZWQgbW92ZSBvbnRvIG5leHQgcGFydFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWNydWlzZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcblxuICAgIGZ1bmN0aW9uIHAxY3J1aXNlclNoaXAoKXtcblxuICAgICAgICBpZihQY3JkLmxlbmd0aD4xKXtcbiAgICAgICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coUGNyZClcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTQ7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsYmF0dGxlc2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxY3J1aXNlclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNydWlzZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMXN1Ym1hcmluZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwMXN1Ym1hcmluZVNoaXAoKXtcblxuICAgICAgICBpZihQY3JkLmxlbmd0aD4yKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT01O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGNydWlzZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMXN1Ym1hcmluZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHN1Ym1hcmluZSkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxZGVzdHJveWVyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHAxZGVzdHJveWVyU2hpcCgpe1xuXG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjMpe1xuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9NjtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdWJtYXJpbmUpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWRlc3Ryb3llclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG4gICAgICAgICAgICAvL3RoaXMgZGVjaWRlcyB3aGV0aGVyIHRoZSBnYW1lIHN0YXJ0cyBhZnRlciBwbGF5ZXIgdHdvIG9yIHRoZSBjb21wdXRlciBoYXMgc2VsZWN0ZWQgdGhlaXIgZ3JpZHNcbiAgICAgICAgICAgIC8vaWYgbm90IGl0IGxvb3BzIGFyb3VuZFxuICAgICAgICAgICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc3RhcnRHYW1lKX1cbiAgICAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7Y2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5sb29wKSB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9vcCgpe1xuICAgICAgICBpZihQY3JkLmxlbmd0aD40KXtcblxuICAgICAgICAgICAgaWYoY2lwPT09XCJZXCIpe2NvbXB1dGVyQUkuc2VsZWN0Q2FycmllcigpO31cbiAgICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgLy9UaGlzIGZ1bmN0aW9uIHR1cm5zIHRoZSBzZWxlY3Rpb24gcHJvY2VzcyBvdmVyIHRvIGVpdGhlciBhIGNvbXB1dGVyIG9yIHBsYXllciAyXG4gICAgLy9qdXN0IGRvaW5nIHBsYXllciAyIGltcGxlbWV0YXRpb24gZm9yIG5vd1xuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgXG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUubG9vcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgfVxuc2VsZWN0aW9uTW9kdWxlLnAxY2FycmllclNoaXAoKTtcbn1cbiAgICB9fVxuXG5cbiAgICBcbiAgICAgICAgcmV0dXJue3AxY2FycmllclNoaXAscDFiYXR0bGVTaGlwLHAxY3J1aXNlclNoaXAscDFzdWJtYXJpbmVTaGlwLHAxZGVzdHJveWVyU2hpcCxsb29wfVxuICAgIFxuICAgIH0pKCk7XG5cblxuXG5cbiAgIG1vZGFsTW9kdWxlLnBsYXllclNlbGVjdCgpO1xuICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHYW1lYm9hcmQoKTtcbnNlbGVjdGlvbk1vZHVsZS5wMWNhcnJpZXJTaGlwKCk7XG4vL3Rlc3RpbmcgaGl0IGZ1bmN0aW9uXG4vL3BsYXlHYW1lKCk7XG5cblxuXG5leHBvcnQge3N0YXJ0R2FtZSxzZWxlY3Rpb25Nb2R1bGUsY2lwLFBoaXQsc3EsZGlyZWN0aW9uLHBpcCxwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBsYXllckJhc2UsY2hhblBsYXllcixwbGF5ZXIxU3Vua1NoaXBzLHBsYXllcjJTdW5rU2hpcHMscGxheWVyMXN0cmlrZXMscGxheWVyMnN0cmlrZXN9XG5cblxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJHYW1lYm9hcmRNb2R1bGUiLCJjcmVhdGVHcmlkcyIsImx0ciIsIm5vIiwiaWQiLCJncmlkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwYWRkaW5nIiwiYm9yZGVyIiwidGV4dENvbnRlbnQiLCJ0ZXh0QWxpZ24iLCJkYXRhc2V0IiwiaGl0IiwiUDFoaXQiLCJQMmhpdCIsImxldHRlciIsIm51bWJlciIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVHYW1lYm9hcmQiLCJpIiwiY2hvb3NlQ3JkbnRzIiwiU3RydEx0dHJzIiwiU3RydE5vIiwibGVuZ3RoIiwiVm9ySCIsImNvb3JkIiwib3ZlciIsInB1c2giLCJMdHJOdW1iZXIiLCJjaGFyQ29kZUF0IiwiY29uc29sZSIsImxvZyIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIm92ZXJMYXAiLCJhIiwiYiIsInBsYyIsImNyZCIsIm92cmxhcCIsInoiLCJwIiwiY29vcmRpbmF0ZXMiLCJzaGlwZmFjdG9yeSIsIm5hbWUiLCJ0aGlzIiwiaGl0U2hpcCIsImFsZXJ0IiwiaXNTdW5rIiwiY29vcmRpZCIsImNhcnJpZXIiLCJ0IiwidGFyZ2V0IiwiYmFja2dyb3VuZENvbG9yIiwiUEMiLCJndW5uIiwiZGlyZWN0aW9uIiwicGlwIiwicGxheWVyQmFzZSIsInBsYXllcjFjb29yZCIsInBsYXllcjJjb29yZCIsImJhdHRsZXNoaXAiLCJjcnVpc2VyIiwic3VibWFyaW5lIiwiZGVzdHJveWVyIiwiZG9tTW9kdWxlIiwibnVtYiIsImxldHRlcnIiLCJjb2xvciIsInNxIiwic3RyaWtlIiwicGxheWVyMXN0cmlrZXMiLCJwbGF5ZXIyc3RyaWtlcyIsImNlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsIlBoaXQiLCJzaG93IiwiaWkiLCJtb2RhbE1vZHVsZSIsIm1vZGFsIiwiYnRuIiwicGFyYTEiLCJwYXJhMiIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJwc2J0bnMiLCJkaXNwbGF5Iiwib25jbGljayIsImZybmQiLCJjb21wIiwic2hvd01vZHVsZSIsInBsYXllclNlbGVjdCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiY2lwIiwiY29tcHV0ZXJBSSIsInJhbmRvbUludEZyb21JbnRlcnZhbCIsIm1pbiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRlc3QiLCJzZWxlY3RDYXJyaWVyIiwicmFuZG9tTm8iLCJzdGFydEdhbWUiLCJQY3JkIiwiY2hhblBsYXllciIsIkwiLCJOIiwiaGl0Q29vcmQiLCJzcGxpY2UiLCJnYW1lT3ZlciIsInBsciIsImNvdW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInBsYXlHYW1lIiwic2VsZWN0aW9uTW9kdWxlIiwicDFjYXJyaWVyU2hpcCIsInAxYmF0dGxlU2hpcCIsInAxY3J1aXNlclNoaXAiLCJwMXN1Ym1hcmluZVNoaXAiLCJwMWRlc3Ryb3llclNoaXAiLCJsb29wIl0sInNvdXJjZVJvb3QiOiIifQ==