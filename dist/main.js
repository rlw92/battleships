(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{o7:()=>v,P4:()=>E,VL:()=>p,yR:()=>g,w7:()=>h,sq:()=>m});const t={createGrids:(e,t,r)=>{let n=document.createElement("div");n.style.padding="10px",n.style.border=0===r||0===t?"none":"solid black 2px",n.textContent=r,n.style.textAlign="center",0===r&&"0"===e?n.textContent=t:0===t&&"0"!=e&&(n.textContent=e),n.dataset.hit="No",n.dataset.hit,n.dataset.letter=e,n.dataset.number=t,n.classList.add("cell"),n.setAttribute("id",n.dataset.letter+n.dataset.number),document.getElementById("gameboard1").appendChild(n)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function r(e,t,r,n){let l=[];if("V"===n){let n=11-r;t>n&&(t=n);for(let n=1;n<r+1;n++)l.push(e+t++)}else if("H"===n){let n=e.charCodeAt(0),o=75-r;n>o&&(n=o),console.log(n),console.log(o);for(let e=1;e<r+1;e++)l.push(String.fromCharCode(n++)+t)}return l}function n(e,t){this.name=e,this.coordinates=t}let l;const o=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,a=e.target.dataset.number,d=new n("Carrier",r(o,a,2,v));E===h[0]?(t=p,l="p1c"):E===h[1]&&(t=g,l="p2c"),t.push(d);let c=document.createElement("p");return c.textContent="Carrier-"+r(o,a,2,v),document.getElementById(l).appendChild(c),t},a=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,a=e.target.dataset.number,d=new n("Battleship",r(o,a,3,v));E===h[0]?(t=p,l="p1c"):E===h[1]&&(t=g,l="p2c"),t.push(d);let c=document.createElement("p");return c.textContent="BattleShip-"+r(o,a,3,v),document.getElementById(l).appendChild(c),t},d=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,a=e.target.dataset.number,d=new n("Cruiser",r(o,a,4,v));E===h[0]?(t=p,l="p1c"):E===h[1]&&(t=g,l="p2c"),t.push(d);let c=document.createElement("p");return c.textContent="Cruiser-"+r(o,a,4,v),document.getElementById(l).appendChild(c),t},c=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,a=e.target.dataset.number,d=new n("Submarine",r(o,a,5,v));E===h[0]?(t=p,l="p1c"):E===h[1]&&(t=g,l="p2c"),t.push(d);let c=document.createElement("p");return c.textContent="Submarine-"+r(o,a,5,v),document.getElementById(l).appendChild(c),t},i=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,a=e.target.dataset.number,d=new n("Destroyer",r(o,a,6,v));E===h[0]?(t=p,l="p1c"):E===h[1]&&(t=g,l="p2c"),t.push(d);let c=document.createElement("p");return c.textContent="Destroyer-"+r(o,a,6,v),document.getElementById(l).appendChild(c),t},s=function(e){e.target.style.backgroundColor="green";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===v)for(let e=0;e<m;e++)document.getElementById(r+(+t+e)).style.backgroundColor="green";else if("H"===v){let e=r.charCodeAt(0);for(let r=0;r<m;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="green"}},u=function(e){e.target.style.backgroundColor="white";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===v)for(let e=0;e<m;e++)document.getElementById(r+(+t+e)).style.backgroundColor="white";else if("H"===v){let e=r.charCodeAt(0);for(let r=0;r<m;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}};let m,p=[],g=[],v="V",h=["player1","player2"],E=h[0];document.getElementById("pip").textContent=E,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===v?(v="H",document.getElementById("position").textContent="Horizontal"):"H"===v&&(v="V",document.getElementById("position").textContent="Vertical")}));const y=()=>{E===h[0]?(E=h[1],document.getElementById("pip").textContent=E):(h[1],E=h[0],document.getElementById("pip").textContent=E)};function C(e){let t=p,r=e.target.dataset.letter+e.target.dataset.number;console.log(r),E===h[0]?t=g:E===h[1]&&(t=p);for(let e=0;e<t[0].length;e++)t[0][e]===r&&(alert("HIT"),t[0].splice(e,1),console.log(t[0]),console.log(p[0]),0===p[0].length?alert("Player two wins"):0===g[0].length&&alert("Player one wins"));return y(),t}function b(){m=1,y();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",b),e[t].style.backgroundColor="white";!function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",C),e[t].style.backgroundColor="white",e[t].addEventListener("mouseover",(e=>{e.target.style.backgroundColor="red"})),e[t].addEventListener("mouseleave",(e=>{e.target.style.backgroundColor="white"}))}()}const k={p1carrierShip:function(){t.createGameboard();let e=document.querySelectorAll(".cell");m=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",o),e[t].addEventListener("click",k.p1battleShip),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},p1battleShip:function(){let e=document.querySelectorAll(".cell");m=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",o),e[t].removeEventListener("click",k.p1battleShip),e[t].addEventListener("click",a),e[t].addEventListener("click",k.p1cruiserShip),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},p1cruiserShip:function(){let e=document.querySelectorAll(".cell");m=4;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",a),e[t].removeEventListener("click",k.p1cruiserShip),e[t].addEventListener("click",d),e[t].addEventListener("click",k.p1submarineShip),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},p1submarineShip:function(){let e=document.querySelectorAll(".cell");m=5;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",k.p1submarineShip),e[t].addEventListener("click",c),e[t].addEventListener("click",k.p1destroyerShip),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},p1destroyerShip:function(){let e=document.querySelectorAll(".cell");m=6;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",k.p1destroyerShip),e[t].addEventListener("click",i),E===h[1]?e[t].addEventListener("click",b):E===h[0]&&e[t].addEventListener("click",k.loop),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},loop:function(){y();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",k.loop),e[t].style.backgroundColor="white";k.p1carrierShip()}};k.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3JDWSxFQUFNN0MsR0FBRytDLG9CQUFvQixRQUFRRSxFQUFnQkssaUJBQ3JEVCxFQUFNN0MsR0FBR3VDLGlCQUFpQixRQUFRTCxHQUcvQlAsSUFBUUMsRUFBVyxHQUFJaUIsRUFBTTdDLEdBQUd1QyxpQkFBaUIsUUFBUUssR0FDekRqQixJQUFRQyxFQUFXLElBQUlpQixFQUFNN0MsR0FBR3VDLGlCQUFpQixRQUFRVSxFQUFnQk0sTUFFNUVWLEVBQU03QyxHQUFHdUMsaUJBQWlCLFlBQVlKLEdBQzFDVSxFQUFNN0MsR0FBR3VDLGlCQUFpQixhQUFhSixJQXFCeUNvQixLQWpCcEYsV0FJQWYsSUFDSSxJQUFJSyxFQUFROUQsU0FBUytELGlCQUFpQixTQUV0QyxJQUFJLElBQUk5QyxFQUFFLEVBQUVBLEVBQUU2QyxFQUFNekMsT0FBT0osSUFDdkI2QyxFQUFNN0MsR0FBRytDLG9CQUFvQixRQUFRYixHQUNyQ1csRUFBTTdDLEdBQUcrQyxvQkFBb0IsUUFBUUUsRUFBZ0JNLE1BQ3JEVixFQUFNN0MsR0FBR2YsTUFBTXNDLGdCQUFrQixRQUU3QzBCLEVBQWdCQyxrQkFjaEJELEVBQWdCQyxpQiIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9jaG9vc2VDb29yZGluYXRlcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9zaGlwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCBHYW1lYm9hcmRNb2R1bGUgPSAoKCkgPT4ge1xuXG4gICAgbGV0IGJvcmQgPSBcInNvbGlkIGJsYWNrIDJweFwiO1xuICAgIGxldCBub2JvcmQgPSBcIm5vbmVcIjtcbiAgICBcbiAgICBcbiAgICBjb25zdCBjcmVhdGVHcmlkcyA9IChsdHIsbm8saWQpID0+e1xuICAgIGxldCBncmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIGdyaWQuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuICAgIC8vdHJ5aW5nIHRvIHRha2Ugb3V0IHRoZSBib3JkZXJpbmcgb2YgdGhlIG5vdCBpbiBwbGF5IGNlbGxzXG4gICAgaWYoaWQ9PT0gMCl7Z3JpZC5zdHlsZS5ib3JkZXI9bm9ib3JkfVxuICAgIGVsc2UgaWYobm89PT0wKXtncmlkLnN0eWxlLmJvcmRlciA9IG5vYm9yZDt9XG4gICAgZWxzZXtncmlkLnN0eWxlLmJvcmRlciA9IGJvcmQ7fVxuICAgIFxuICAgIFxuICAgIGdyaWQudGV4dENvbnRlbnQgPSBpZDtcbiAgICBncmlkLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgaWYoaWQ9PT0wICYmIGx0cj09PVwiMFwiKXtncmlkLnRleHRDb250ZW50ID0gbm99XG4gICAgZWxzZSBpZihubz09PTAgJiYgbHRyIT1cIjBcIil7Z3JpZC50ZXh0Q29udGVudCA9IGx0cn1cbiAgICBncmlkLmRhdGFzZXQuaGl0ID0gXCJOb1wiXG4gICAgbGV0IGdyZGF0YSA9IGdyaWQuZGF0YXNldC5oaXQ7XG4gICAgbGV0IGxldHRlciA9IGdyaWQuZGF0YXNldC5sZXR0ZXIgPSBsdHI7XG4gICAgbGV0IG51bWJlciA9IGdyaWQuZGF0YXNldC5udW1iZXIgPSBubztcbiAgICAvL3Nob3dzIHdoaWNoIHBsYXllciBvd25zIHRoZSBjZWxsLy9cbiAgICAvL2xldCBwbGF5ZXIgPSBncmlkLmRhdGFzZXQucGxheWVyY2VsbCA9IFwicGxheWVyXCIrcGx5cjtcbiAgICBcbiAgICAvL2NyZWF0aW5nIGEgY2xhc3MgZm9yIGVhY2ggZ3JpZCBzbyB3ZSBjYW4gYWNjZXNzIGl0IGZyb20gdGhlIGZ1bmN0aW9uc1xuICAgIGdyaWQuY2xhc3NMaXN0LmFkZChcImNlbGxcIik7XG4gICAgLy9jcmVhdGluZyBhbiBpZCB0aGF0IG1hdGNoZXMgaXRzIGNvb3JkaW5hdGVzXG4gICAgZ3JpZC5zZXRBdHRyaWJ1dGUoJ2lkJyxncmlkLmRhdGFzZXQubGV0dGVyK2dyaWQuZGF0YXNldC5udW1iZXIpXG4gICAgXG4gICAgICAgICBcbiAgICBsZXQgZ2FtZWJvYXJkID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZWJvYXJkMVwiKTtcbiAgICBcbiAgICBnYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ3JpZCk7XG4gICAgXG4gICAgfVxuICAgIFxuICAgIC8vY3JlYXRlIHRoZSB3aG9sZSBncmlkIHdpdGggYmVsb3cgZnVuY3Rpb25cbiAgICBjb25zdCBjcmVhdGVHYW1lYm9hcmQgPSAoKSA9PntcbiAgICBcbiAgICBmb3IobGV0IGk9MDtpPDExO2krKyl7XG4gICAgICAgIFxuICAgIFxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCIwXCIsMCxpKVxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJBXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkJcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQ1wiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJEXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkVcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRlwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJHXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkhcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJKXCIsaSk7XG4gICAgXG4gICAgfVxuICAgIH1cbiAgICByZXR1cm4ge2NyZWF0ZUdyaWRzLGNyZWF0ZUdhbWVib2FyZH1cbiAgICB9KSgpO1xuXG4gICAgZXhwb3J0e0dhbWVib2FyZE1vZHVsZX07IiwiLy90aGUgY2hvb29zZSBjb29yZGluYXRlcyBmdW5jdGlvblxuZnVuY3Rpb24gY2hvb3NlQ3JkbnRzKFN0cnRMdHRycyxTdHJ0Tm8sbGVuZ3RoLFZvckgpe1xuICAgIGxldCBjb29yZCA9IFtdO1xuICAgIFxuICAgIGlmKFZvckg9PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1sZW5ndGg7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoU3RydE5vPm92ZXIpe1N0cnRObyA9IG92ZXJ9XG4gICAgLy9pZihWb3JIPT09XCJWZXJ0aWNhbFwiKXt9IFdpbGwgYmUgdHJlYXRpbmcgdGhpcyB0ZXN0aW5nIGFzIGNvbXBsZXRlIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gICAgZm9yKGxldCBpPTE7aTxsZW5ndGgrMTtpKyspe1xuICAgICAgICBjb29yZC5wdXNoKFN0cnRMdHRycyArIFN0cnRObysrKVxuICAgIH1cbn1cblxuZWxzZSBpZihWb3JIPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPSBTdHJ0THR0cnMuY2hhckNvZGVBdCgwKVxuICAgIGxldCBvdmVyID0gNzUtbGVuZ3RoO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKEx0ck51bWJlcj5vdmVyKXtMdHJOdW1iZXIgPSBvdmVyfVxuICAgIGNvbnNvbGUubG9nKEx0ck51bWJlcilcbiAgICBjb25zb2xlLmxvZyhvdmVyKVxuICAgIFxuICAgIGZvcihsZXQgaT0xO2k8bGVuZ3RoKzE7aSsrKXtcbiAgICAgICAgY29vcmQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIFN0cnRObylcbiAgICB9XG5cbn1cbiAgICByZXR1cm4gY29vcmQ7XG5cbn1cblxuZXhwb3J0IHtjaG9vc2VDcmRudHN9IiwiaW1wb3J0e3BpcCxkaXJlY3Rpb24scGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwbGF5ZXJCYXNlLGNoYW5QbGF5ZXJ9IGZyb20gJy4vaW5kZXgnXG5pbXBvcnR7Y2hvb3NlQ3JkbnRzfSBmcm9tICcuL2Nob29zZUNvb3JkaW5hdGVzJ1xuXG5cbmZ1bmN0aW9uIHNoaXBmYWN0b3J5KG5hbWUsY29vcmRpbmF0ZXMpe1xuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLmNvb3JkaW5hdGVzID0gY29vcmRpbmF0ZXNcbiAgICBcbiAgfVxuXG4gIGxldCBjb29yZGlkO1xuXG5cbiAgY29uc3QgY2FycmllciA9ICh0KSA9PnsgICAgXG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkNhcnJpZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgUEMucHVzaChndW5uKTtcbiAgICAgICAgXG4gICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICBwLnRleHRDb250ZW50ID0gJ0NhcnJpZXInICtcIi1cIisgY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb29yZGlkKS5hcHBlbmRDaGlsZChwKTtcbiAgICBcbiAgICByZXR1cm4gUEM7XG4gICAgfVxuXG4gIGNvbnN0IGJhdHRsZXNoaXAgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkJhdHRsZXNoaXBcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgUEMucHVzaChndW5uKTtcbiAgICBcblxuICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgIHAudGV4dENvbnRlbnQgPSAnQmF0dGxlU2hpcCcgK1wiLVwiKyBjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbilcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvb3JkaWQpLmFwcGVuZENoaWxkKHApO1xuICAgIFxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBjcnVpc2VyID0gKHQpID0+e1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDcnVpc2VyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgXG5cbiAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICBwLnRleHRDb250ZW50ID0gJ0NydWlzZXInICtcIi1cIisgY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb29yZGlkKS5hcHBlbmRDaGlsZChwKTtcbiAgICBcbiAgICByZXR1cm4gUEM7XG4gIH1cbiAgY29uc3Qgc3VibWFyaW5lID0gKHQpID0+e1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJTdWJtYXJpbmVcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw1LGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgUEMucHVzaChndW5uKTtcbiAgICBcblxuICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgIHAudGV4dENvbnRlbnQgPSAnU3VibWFyaW5lJyArXCItXCIrIGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDUsZGlyZWN0aW9uKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29vcmRpZCkuYXBwZW5kQ2hpbGQocCk7XG4gICAgXG4gICAgcmV0dXJuIFBDO1xuICB9XG4gIGNvbnN0IGRlc3Ryb3llciA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiRGVzdHJveWVyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIFBDLnB1c2goZ3Vubik7XG5cbiAgICBcbiAgICBcblxuICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgIHAudGV4dENvbnRlbnQgPSAnRGVzdHJveWVyJyArXCItXCIrIGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDYsZGlyZWN0aW9uKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29vcmRpZCkuYXBwZW5kQ2hpbGQocCk7XG4gICAgXG4gICAgcmV0dXJuIFBDO1xuICB9XG5cbiAgZXhwb3J0IHtzaGlwZmFjdG9yeSxjYXJyaWVyLGJhdHRsZXNoaXAsY3J1aXNlcixzdWJtYXJpbmUsZGVzdHJveWVyfSIsImltcG9ydCB7c3EsZGlyZWN0aW9ufSBmcm9tICcuL2luZGV4J1xuY29uc3QgZG9tTW9kdWxlID0gKCgpID0+e1xuLy9mdW5jdGlvbiBmb3IgaGlnaGxpZ2h0aW5nIHNxdWFyZXMgd2hlbiBob3ZlcmluZ1xuZnVuY3Rpb24gaG92ZXIodCl7dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwiZ3JlZW5cIjtcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG5mb3IobGV0IGk9MDtpPHNxO2krKyl7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXR0ZXJyKygrbnVtYitpKSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmVlblwifX1cbmVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPWxldHRlcnIuY2hhckNvZGVBdCgwKVxuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIG51bWIpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZWVuXCJ9XG59XG59XG5cbi8vZnVuY3Rpb24gZm9yIHJldHVybmluZyBzcXVhcmUgY29sb3IgdG8gd2hpdGUgYWZ0ZXIgbGVhdmluZ1xuZnVuY3Rpb24gbGVhdmUodCl7dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIjtcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCJ9fVxuICAgIGVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgICAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICAgICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIG51bWIpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJ9XG4gICAgfVxuICAgIH1cblxuICAgIC8vcHVyZWx5IGZvciBidWlsZGluZyBwdXJwb3Nlc1xuZnVuY3Rpb24gc2hvd0Nvb3JkcDEoKXtcbiAgICBmb3IobGV0IGk9MDtpPHBsYXllcjFjb29yZC5sZW5ndGg7aSsrKXtcbiAgICAgICAgbGV0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuICAgICAgICBwLnRleHRDb250ZW50ID0gcGxheWVyMWNvb3JkW2ldLm5hbWUgKyctJytwbGF5ZXIxY29vcmRbaV0uY29vcmRpbmF0ZXM7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicDFjXCIpLmFwcGVuZENoaWxkKHApO1xuICAgICAgfX1cblxucmV0dXJue2hvdmVyLGxlYXZlLHNob3dDb29yZHAxfVxufSkoKTtcblxuXG5leHBvcnR7ZG9tTW9kdWxlfSIsImltcG9ydCB7R2FtZWJvYXJkTW9kdWxlfSBmcm9tICcuL2dhbWVib2FyZCdcbmltcG9ydCB7Y2FycmllcixiYXR0bGVzaGlwLGNydWlzZXIsc3VibWFyaW5lLGRlc3Ryb3llcn0gZnJvbSAnLi9zaGlwcydcbmltcG9ydCB7ZG9tTW9kdWxlfSBmcm9tICcuL2RvbSdcblxuXG5cblxuICAvL2Nvb3JkaW5hdGVzIG9mIGVhY2ggcGxheWVycyBzaGlwLCBqdXN0IGZvciB0ZXN0aW5nIHVudGlsIHdlIHVzZSBtdWx0aXBsZSBzaGlwc1xuICBsZXQgcGxheWVyMWNvb3JkPVtdO1xuICBsZXQgcGxheWVyMmNvb3JkPVtdO1xuICAvL1Y9VmVydGljYWwsIEg9SG9yaXpvbnRhbFxuICBsZXQgZGlyZWN0aW9uID0gXCJWXCJcbiAgLy9wbGF5ZXIgaW4gcGxheVxuICBsZXQgcGxheWVyQmFzZSA9IFtcInBsYXllcjFcIixcInBsYXllcjJcIl07XG4gIGxldCBwaXAgPSBwbGF5ZXJCYXNlWzBdO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDtcbiAgLy90aGUgc3F1YXJlcyB0aGF0IG5lZWQgaGlnaGxpZ2h0aW5nIGZvciB0aGUgZG9tXG4gIGxldCBzcTtcbiAgXG5cbi8vYnV0dG9uIHRvIGNoYW5nZSB0aGUgcG9zaXRpb25pbmcgb2YgdGhlIHBsYWNlbWVudFxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJDaG5nZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntpZihkaXJlY3Rpb249PT1cIlZcIil7ZGlyZWN0aW9uPVwiSFwiO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25cIikudGV4dENvbnRlbnQ9XCJIb3Jpem9udGFsXCI7fWVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe2RpcmVjdGlvbj1cIlZcIjtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uXCIpLnRleHRDb250ZW50PVwiVmVydGljYWxcIn19KVxuXG5cbi8vZnVuY3Rpb24gY2hhbmdlcyBwbGF5ZXJcbmNvbnN0IGNoYW5QbGF5ZXIgPSAoKT0+e1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7cGlwID0gcGxheWVyQmFzZVsxXTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtwaXAgPSBwbGF5ZXJCYXNlWzBdO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICBlbHNle3BpcCA9IHBsYXllckJhc2VbMF07ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuXG59XG5cblxuLy9oaXQgZnVuY3Rpb24gZm9yIHRoZSBtYWluIGdhbWUgbG9vcFxuLy9pbiBmdXR1cmUgd2lsbCBtYXJrIHRoZWUgc3F1YXJlIGFzIGhpdCBub3QgYWxsb3dpbmcgdGhlIHBsYXllciB0byBoaXQgYWdhaW5cbi8vdGFrZXMgdGhlIGNvb3JkaW5hdGVzIG91dCBvZiB0aGUgcGxheWVycyBhcnJheVxuZnVuY3Rpb24gaGl0KHQpe1xuICAgIGxldCBQQyA9IHBsYXllcjFjb29yZDtcbiAgICBsZXQgTCA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBOID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgbGV0IGhpdENvb3JkID0gTCtOO1xuICAgIGNvbnNvbGUubG9nKGhpdENvb3JkKTtcbiAgICBcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkO31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIxY29vcmQ7fVxuXG5cbmZvcihsZXQgaT0wO2k8UENbMF0ubGVuZ3RoO2krKyl7XG4gICAgaWYoUENbMF1baV09PT1oaXRDb29yZCl7XG4gICAgICAgIGFsZXJ0KFwiSElUXCIpO1xuICAgIFBDWzBdLnNwbGljZShpLDEpO1xuICAgIGNvbnNvbGUubG9nKFBDWzBdKTtcbiAgICBnYW1lT3ZlcigpO1xuICAgIH19Y2hhblBsYXllcigpO1xuICAgIHJldHVybiBQQ31cblxuICAgIGZ1bmN0aW9uIGdhbWVPdmVyKCl7XG4gICAgICAgIGNvbnNvbGUubG9nKHBsYXllcjFjb29yZFswXSlcbiAgICAgICAgaWYocGxheWVyMWNvb3JkWzBdLmxlbmd0aCA9PT0gMCl7YWxlcnQoXCJQbGF5ZXIgdHdvIHdpbnNcIik7fVxuICAgICAgICBlbHNlIGlmKHBsYXllcjJjb29yZFswXS5sZW5ndGggPT09IDApe2FsZXJ0KFwiUGxheWVyIG9uZSB3aW5zXCIpfVxuICAgIH1cbiAgICBcblxuZnVuY3Rpb24gc3RhcnRHYW1lKCl7XG4gICAgc3E9MVxuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbmZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG5jZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc3RhcnRHYW1lKVxuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xufVxucGxheUdhbWUoKTt9XG4gICAgXG4gICAgXG5mdW5jdGlvbiBwbGF5R2FtZSgpe1xuICAgIFxuICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcblxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGhpdClcbmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsKHQpPT57dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwicmVkXCJ9KVxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsKHQpPT57dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIn0pXG59XG5cbn1cblxuXG5cblxuLy9TZWxlY3Rpb24gbW9kdWxlXG5jb25zdCBzZWxlY3Rpb25Nb2R1bGUgPSAoKCkgPT57XG5cbiAgICAgICAgXG4gICAgLy9hZGRzIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGV2ZXJ5IGdyaWQgY2VsbCBhbGxvd2luZyB1cyB0byBjaG9vc2Ugb3VyIGNvb3JkaW5hdGVzLG1hcCB0aGVtIHRvIHRoZSBhcnJheSB0aGVuIGNoYW5nZSBwbGF5ZXJcbiAgICBmdW5jdGlvbiBwMWNhcnJpZXJTaGlwKCl7XG4gICAgICAgXG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHYW1lYm9hcmQoKTtcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9MjtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYXJyaWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFiYXR0bGVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICAgICAgfVxuICAgIGZ1bmN0aW9uIHAxYmF0dGxlU2hpcCgpe1xuICAgICAgICBcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTM7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsY2FycmllcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxYmF0dGxlU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsYmF0dGxlc2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxY3J1aXNlclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHAxY3J1aXNlclNoaXAoKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT00O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGJhdHRsZXNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWNydWlzZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjcnVpc2VyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFzdWJtYXJpbmVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwMXN1Ym1hcmluZVNoaXAoKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT01O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGNydWlzZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMXN1Ym1hcmluZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHN1Ym1hcmluZSkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxZGVzdHJveWVyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcDFkZXN0cm95ZXJTaGlwKCl7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9NjtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdWJtYXJpbmUpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWRlc3Ryb3llclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG4gICAgICAgICAgICAvL3RoaXMgZGVjaWRlcyB3aGV0aGVyIHRoZSBnYW1lIHN0YXJ0cyBhZnRlciBwbGF5ZXIgdHdvIG9yIHRoZSBjb21wdXRlciBoYXMgc2VsZWN0ZWQgdGhlaXIgZ3JpZHNcbiAgICAgICAgICAgIC8vaWYgbm90IGl0IGxvb3BzIGFyb3VuZFxuICAgICAgICAgICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc3RhcnRHYW1lKX1cbiAgICAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7Y2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5sb29wKSB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wKCl7XG5cbiAgICAgICAgLy9UaGlzIGZ1bmN0aW9uIHR1cm5zIHRoZSBzZWxlY3Rpb24gcHJvY2VzcyBvdmVyIHRvIGVpdGhlciBhIGNvbXB1dGVyIG9yIHBsYXllciAyXG4gICAgLy9qdXN0IGRvaW5nIHBsYXllciAyIGltcGxlbWV0YXRpb24gZm9yIG5vd1xuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgXG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUubG9vcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgfVxuc2VsZWN0aW9uTW9kdWxlLnAxY2FycmllclNoaXAoKTtcbn1cblxuXG4gICAgXG4gICAgICAgIHJldHVybntwMWNhcnJpZXJTaGlwLHAxYmF0dGxlU2hpcCxwMWNydWlzZXJTaGlwLHAxc3VibWFyaW5lU2hpcCxwMWRlc3Ryb3llclNoaXAsbG9vcH1cbiAgICBcbiAgICB9KSgpO1xuXG5cblxuXG5cblxuc2VsZWN0aW9uTW9kdWxlLnAxY2FycmllclNoaXAoKTtcblxuXG5cblxuZXhwb3J0IHtzcSxkaXJlY3Rpb24scGlwLHBsYXllcjFjb29yZCxwbGF5ZXIyY29vcmQscGxheWVyQmFzZSxjaGFuUGxheWVyfVxuXG5cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiR2FtZWJvYXJkTW9kdWxlIiwiY3JlYXRlR3JpZHMiLCJsdHIiLCJubyIsImlkIiwiZ3JpZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicGFkZGluZyIsImJvcmRlciIsInRleHRDb250ZW50IiwidGV4dEFsaWduIiwiZGF0YXNldCIsImhpdCIsImxldHRlciIsIm51bWJlciIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVHYW1lYm9hcmQiLCJpIiwiY2hvb3NlQ3JkbnRzIiwiU3RydEx0dHJzIiwiU3RydE5vIiwibGVuZ3RoIiwiVm9ySCIsImNvb3JkIiwib3ZlciIsInB1c2giLCJMdHJOdW1iZXIiLCJjaGFyQ29kZUF0IiwiY29uc29sZSIsImxvZyIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInNoaXBmYWN0b3J5IiwibmFtZSIsImNvb3JkaW5hdGVzIiwidGhpcyIsImNvb3JkaWQiLCJjYXJyaWVyIiwidCIsInRhcmdldCIsImJhY2tncm91bmRDb2xvciIsIlBDIiwiZ3VubiIsImRpcmVjdGlvbiIsInBpcCIsInBsYXllckJhc2UiLCJwbGF5ZXIyY29vcmQiLCJwIiwiYmF0dGxlc2hpcCIsImNydWlzZXIiLCJzdWJtYXJpbmUiLCJkZXN0cm95ZXIiLCJkb21Nb2R1bGUiLCJudW1iIiwibGV0dGVyciIsInNxIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNoYW5QbGF5ZXIiLCJoaXRDb29yZCIsImFsZXJ0Iiwic3BsaWNlIiwic3RhcnRHYW1lIiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInBsYXlHYW1lIiwic2VsZWN0aW9uTW9kdWxlIiwicDFjYXJyaWVyU2hpcCIsInAxYmF0dGxlU2hpcCIsInAxY3J1aXNlclNoaXAiLCJwMXN1Ym1hcmluZVNoaXAiLCJwMWRlc3Ryb3llclNoaXAiLCJsb29wIl0sInNvdXJjZVJvb3QiOiIifQ==