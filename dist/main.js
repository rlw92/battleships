(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{o7:()=>v,P4:()=>h,VL:()=>p,yR:()=>g,w7:()=>E,sq:()=>m});const t={createGrids:(e,t,r)=>{let n=document.createElement("div");n.style.padding="10px",n.style.border=0===r||0===t?"none":"solid black 2px",n.textContent=r,n.style.textAlign="center",0===r&&"0"===e?n.textContent=t:0===t&&"0"!=e&&(n.textContent=e),n.dataset.hit="No",n.dataset.hit,n.dataset.letter=e,n.dataset.number=t,n.classList.add("cell"),n.setAttribute("id",n.dataset.letter+n.dataset.number),document.getElementById("gameboard1").appendChild(n)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function r(e,t,r,n){let l=[];if("V"===n){let n=11-r;t>n&&(t=n);for(let n=1;n<r+1;n++)l.push(e+t++)}else if("H"===n){let n=e.charCodeAt(0),o=75-r;n>o&&(n=o),console.log(n),console.log(o);for(let e=1;e<r+1;e++)l.push(String.fromCharCode(n++)+t)}return l}function n(e,t){this.name=e,this.coordinates=t}let l;const o=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,d=e.target.dataset.number,c=new n("Carrier",r(o,d,2,v));h===E[0]?(t=p,l="p1c"):h===E[1]&&(t=g,l="p2c"),t.push(c);let a=document.createElement("p");return a.textContent="Carrier-"+r(o,d,2,v),document.getElementById(l).appendChild(a),t},d=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,d=e.target.dataset.number,c=new n("Battleship",r(o,d,3,v));h===E[0]?(t=p,l="p1c"):h===E[1]&&(t=g,l="p2c"),t.push(c);let a=document.createElement("p");return a.textContent="BattleShip-"+r(o,d,3,v),document.getElementById(l).appendChild(a),t},c=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,d=e.target.dataset.number,c=new n("Cruiser",r(o,d,4,v));h===E[0]?(t=p,l="p1c"):h===E[1]&&(t=g,l="p2c"),t.push(c);let a=document.createElement("p");return a.textContent="Cruiser-"+r(o,d,4,v),document.getElementById(l).appendChild(a),t},a=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,d=e.target.dataset.number,c=new n("Submarine",r(o,d,5,v));h===E[0]?(t=p,l="p1c"):h===E[1]&&(t=g,l="p2c"),t.push(c);let a=document.createElement("p");return a.textContent="Submarine-"+r(o,d,5,v),document.getElementById(l).appendChild(a),t},i=e=>{e.target.style.backgroundColor="red";let t,o=e.target.dataset.letter,d=e.target.dataset.number,c=new n("Destroyer",r(o,d,6,v));h===E[0]?(t=p,l="p1c"):h===E[1]&&(t=g,l="p2c"),t.push(c);let a=document.createElement("p");return a.textContent="Destroyer-"+r(o,d,6,v),document.getElementById(l).appendChild(a),t},s=function(e){e.target.style.backgroundColor="green";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===v)for(let e=0;e<m;e++)document.getElementById(r+(+t+e)).style.backgroundColor="green";else if("H"===v){let e=r.charCodeAt(0);for(let r=0;r<m;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="green"}},u=function(e){e.target.style.backgroundColor="white";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===v)for(let e=0;e<m;e++)document.getElementById(r+(+t+e)).style.backgroundColor="white";else if("H"===v){let e=r.charCodeAt(0);for(let r=0;r<m;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}};console.log("HI");let m,p=[],g=[],v="V",E=["player1","player2"],h=E[0];document.getElementById("pip").textContent=h,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===v?(v="H",document.getElementById("position").textContent="Horizontal"):"H"===v&&(v="V",document.getElementById("position").textContent="Vertical")}));const y=()=>{h===E[0]?(h=E[1],document.getElementById("pip").textContent=h):(E[1],h=E[0],document.getElementById("pip").textContent=h)};function C(e){console.log(e.target.dataset.letter)}function b(){m=1,y();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",b),e[t].style.backgroundColor="white";!function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",C),e[t].style.backgroundColor="white",e[t].addEventListener("mouseover",(e=>{e.target.style.backgroundColor="red"})),e[t].addEventListener("mouseleave",(e=>{e.target.style.backgroundColor="white"}))}()}const k={p1carrierShip:function(){t.createGameboard();let e=document.querySelectorAll(".cell");m=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",o),e[t].addEventListener("click",k.p1battleShip),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},p1battleShip:function(){let e=document.querySelectorAll(".cell");m=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",o),e[t].removeEventListener("click",k.p1battleShip),e[t].addEventListener("click",d),e[t].addEventListener("click",k.p1cruiserShip),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},p1cruiserShip:function(){let e=document.querySelectorAll(".cell");m=4;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",k.p1cruiserShip),e[t].addEventListener("click",c),e[t].addEventListener("click",k.p1submarineShip),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},p1submarineShip:function(){let e=document.querySelectorAll(".cell");m=5;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",k.p1submarineShip),e[t].addEventListener("click",a),e[t].addEventListener("click",k.p1destroyerShip),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},p1destroyerShip:function(){let e=document.querySelectorAll(".cell");m=6;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",a),e[t].removeEventListener("click",k.p1destroyerShip),e[t].addEventListener("click",i),h===E[1]?e[t].addEventListener("click",b):h===E[0]&&e[t].addEventListener("click",k.loop),e[t].addEventListener("mouseover",s),e[t].addEventListener("mouseleave",u)},loop:function(){y();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",k.loop),e[t].style.backgroundColor="white";k.p1carrierShip()}};k.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUJBLEVBQXdCLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEYsRUFBb0JJLEVBQUVGLEVBQVlDLEtBQVNILEVBQW9CSSxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFSCxFQUF3QixDQUFDUyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxJLGdFQ0FsRixNQUFNSSxFQTBESyxDQUFDQyxZQXBEWSxDQUFDQyxFQUFJQyxFQUFHQyxLQUM1QixJQUFJQyxFQUFPQyxTQUFTQyxjQUFjLE9BQ2xDRixFQUFLRyxNQUFNQyxRQUFVLE9BRVRKLEVBQUtHLE1BQU1FLE9BQWQsSUFBTk4sR0FDVSxJQUFMRCxFQVJLLE9BREYsa0JBYVhFLEVBQUtNLFlBQWNQLEVBQ25CQyxFQUFLRyxNQUFNSSxVQUFZLFNBQ2YsSUFBTFIsR0FBZ0IsTUFBTkYsRUFBV0csRUFBS00sWUFBY1IsRUFDOUIsSUFBTEEsR0FBZSxLQUFMRCxJQUFVRyxFQUFLTSxZQUFjVCxHQUMvQ0csRUFBS1EsUUFBUUMsSUFBTSxLQUNOVCxFQUFLUSxRQUFRQyxJQUNiVCxFQUFLUSxRQUFRRSxPQUFTYixFQUN0QkcsRUFBS1EsUUFBUUcsT0FBU2IsRUFLbkNFLEVBQUtZLFVBQVVDLElBQUksUUFFbkJiLEVBQUtjLGFBQWEsS0FBS2QsRUFBS1EsUUFBUUUsT0FBT1YsRUFBS1EsUUFBUUcsUUFHdkNWLFNBQVNjLGVBQWUsY0FFL0JDLFlBQVloQixJQXdCRmlCLGdCQW5CSSxLQUV4QixJQUFJLElBQUlDLEVBQUUsRUFBRUEsRUFBRSxHQUFHQSxJQUdidkIsRUFBZ0JDLFlBQVksSUFBSSxFQUFFc0IsR0FDbEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsR0FDaEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsR0FDaEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsR0FDaEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsR0FDaEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsR0FDaEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsR0FDaEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsR0FDaEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsR0FDaEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsR0FDaEN2QixFQUFnQkMsWUFBWSxJQUFJc0IsS0NyRHhDLFNBQVNDLEVBQWFDLEVBQVVDLEVBQU9DLEVBQU9DLEdBQzFDLElBQUlDLEVBQVEsR0FFWixHQUFVLE1BQVBELEVBQVcsQ0FDZCxJQUFJRSxFQUFPLEdBQUdILEVBRVhELEVBQU9JLElBQU1KLEVBQVNJLEdBRXpCLElBQUksSUFBSVAsRUFBRSxFQUFFQSxFQUFFSSxFQUFPLEVBQUVKLElBQ25CTSxFQUFNRSxLQUFLTixFQUFZQyxVQUkxQixHQUFVLE1BQVBFLEVBQVcsQ0FDZixJQUFJSSxFQUFZUCxFQUFVUSxXQUFXLEdBQ2pDSCxFQUFPLEdBQUdILEVBRVhLLEVBQVVGLElBQU1FLEVBQVlGLEdBQy9CSSxRQUFRQyxJQUFJSCxHQUNaRSxRQUFRQyxJQUFJTCxHQUVaLElBQUksSUFBSVAsRUFBRSxFQUFFQSxFQUFFSSxFQUFPLEVBQUVKLElBQ25CTSxFQUFNRSxLQUFLSyxPQUFPQyxhQUFhTCxLQUFlTixHQUlsRCxPQUFPRyxFQ3ZCWCxTQUFTUyxFQUFZQyxFQUFLQyxHQUN0QkMsS0FBS0YsS0FBT0EsRUFDWkUsS0FBS0QsWUFBY0EsRUFJckIsSUFBSUUsRUFHSixNQUFNQyxFQUFXQyxJQUNmQSxFQUFFQyxPQUFPckMsTUFBTXNDLGdCQUFrQixNQUNqQyxJQUlJQyxFQUpBaEMsRUFBUzZCLEVBQUVDLE9BQU9oQyxRQUFRRSxPQUMxQkMsRUFBUzRCLEVBQUVDLE9BQU9oQyxRQUFRRyxPQUUxQmdDLEVBQU8sSUFBSVYsRUFBWSxVQUFVZCxFQUFhVCxFQUFPQyxFQUFPLEVBQUVpQyxJQUUvREMsSUFBUUMsRUFBVyxJQUFJSixFQUFLSyxFQUFjVixFQUFVLE9BQy9DUSxJQUFRQyxFQUFXLEtBQUlKLEVBQUtNLEVBQWNYLEVBQVUsT0FDNURLLEVBQUdoQixLQUFLaUIsR0FFTixJQUFJTSxFQUFJaEQsU0FBU0MsY0FBYyxLQUlqQyxPQUhFK0MsRUFBRTNDLFlBQWMsV0FBZ0JhLEVBQWFULEVBQU9DLEVBQU8sRUFBRWlDLEdBQzdEM0MsU0FBU2MsZUFBZXNCLEdBQVNyQixZQUFZaUMsR0FFeENQLEdBR0hRLEVBQWNYLElBQ2xCQSxFQUFFQyxPQUFPckMsTUFBTXNDLGdCQUFrQixNQUNqQyxJQUlJQyxFQUpBaEMsRUFBUzZCLEVBQUVDLE9BQU9oQyxRQUFRRSxPQUMxQkMsRUFBUzRCLEVBQUVDLE9BQU9oQyxRQUFRRyxPQUUxQmdDLEVBQU8sSUFBSVYsRUFBWSxhQUFhZCxFQUFhVCxFQUFPQyxFQUFPLEVBQUVpQyxJQUVsRUMsSUFBUUMsRUFBVyxJQUFJSixFQUFLSyxFQUFjVixFQUFVLE9BQy9DUSxJQUFRQyxFQUFXLEtBQUlKLEVBQUtNLEVBQWNYLEVBQVUsT0FDNURLLEVBQUdoQixLQUFLaUIsR0FHUixJQUFJTSxFQUFJaEQsU0FBU0MsY0FBYyxLQUkvQixPQUhFK0MsRUFBRTNDLFlBQWMsY0FBbUJhLEVBQWFULEVBQU9DLEVBQU8sRUFBRWlDLEdBQ2hFM0MsU0FBU2MsZUFBZXNCLEdBQVNyQixZQUFZaUMsR0FFeENQLEdBRUhTLEVBQVdaLElBQ2ZBLEVBQUVDLE9BQU9yQyxNQUFNc0MsZ0JBQWtCLE1BQ2pDLElBSUlDLEVBSkFoQyxFQUFTNkIsRUFBRUMsT0FBT2hDLFFBQVFFLE9BQzFCQyxFQUFTNEIsRUFBRUMsT0FBT2hDLFFBQVFHLE9BRTFCZ0MsRUFBTyxJQUFJVixFQUFZLFVBQVVkLEVBQWFULEVBQU9DLEVBQU8sRUFBRWlDLElBRS9EQyxJQUFRQyxFQUFXLElBQUlKLEVBQUtLLEVBQWNWLEVBQVUsT0FDL0NRLElBQVFDLEVBQVcsS0FBSUosRUFBS00sRUFBY1gsRUFBVSxPQUM1REssRUFBR2hCLEtBQUtpQixHQUdSLElBQUlNLEVBQUloRCxTQUFTQyxjQUFjLEtBSS9CLE9BSEUrQyxFQUFFM0MsWUFBYyxXQUFnQmEsRUFBYVQsRUFBT0MsRUFBTyxFQUFFaUMsR0FDN0QzQyxTQUFTYyxlQUFlc0IsR0FBU3JCLFlBQVlpQyxHQUV4Q1AsR0FFSFUsRUFBYWIsSUFDakJBLEVBQUVDLE9BQU9yQyxNQUFNc0MsZ0JBQWtCLE1BQ2pDLElBSUlDLEVBSkFoQyxFQUFTNkIsRUFBRUMsT0FBT2hDLFFBQVFFLE9BQzFCQyxFQUFTNEIsRUFBRUMsT0FBT2hDLFFBQVFHLE9BRTFCZ0MsRUFBTyxJQUFJVixFQUFZLFlBQVlkLEVBQWFULEVBQU9DLEVBQU8sRUFBRWlDLElBRWpFQyxJQUFRQyxFQUFXLElBQUlKLEVBQUtLLEVBQWNWLEVBQVUsT0FDL0NRLElBQVFDLEVBQVcsS0FBSUosRUFBS00sRUFBY1gsRUFBVSxPQUM1REssRUFBR2hCLEtBQUtpQixHQUdSLElBQUlNLEVBQUloRCxTQUFTQyxjQUFjLEtBSS9CLE9BSEUrQyxFQUFFM0MsWUFBYyxhQUFrQmEsRUFBYVQsRUFBT0MsRUFBTyxFQUFFaUMsR0FDL0QzQyxTQUFTYyxlQUFlc0IsR0FBU3JCLFlBQVlpQyxHQUV4Q1AsR0FFSFcsRUFBYWQsSUFDakJBLEVBQUVDLE9BQU9yQyxNQUFNc0MsZ0JBQWtCLE1BQ2pDLElBSUlDLEVBSkFoQyxFQUFTNkIsRUFBRUMsT0FBT2hDLFFBQVFFLE9BQzFCQyxFQUFTNEIsRUFBRUMsT0FBT2hDLFFBQVFHLE9BRTFCZ0MsRUFBTyxJQUFJVixFQUFZLFlBQVlkLEVBQWFULEVBQU9DLEVBQU8sRUFBRWlDLElBRWpFQyxJQUFRQyxFQUFXLElBQUlKLEVBQUtLLEVBQWNWLEVBQVUsT0FDL0NRLElBQVFDLEVBQVcsS0FBSUosRUFBS00sRUFBY1gsRUFBVSxPQUM1REssRUFBR2hCLEtBQUtpQixHQUtSLElBQUlNLEVBQUloRCxTQUFTQyxjQUFjLEtBSS9CLE9BSEUrQyxFQUFFM0MsWUFBYyxhQUFrQmEsRUFBYVQsRUFBT0MsRUFBTyxFQUFFaUMsR0FDL0QzQyxTQUFTYyxlQUFlc0IsR0FBU3JCLFlBQVlpQyxHQUV4Q1AsR0N0R0xZLEVBRU4sU0FBZWYsR0FBR0EsRUFBRUMsT0FBT3JDLE1BQU1zQyxnQkFBZ0IsUUFDakQsSUFBSWMsRUFBT2hCLEVBQUVDLE9BQU9oQyxRQUFRRyxPQUN4QjZDLEVBQVVqQixFQUFFQyxPQUFPaEMsUUFBUUUsT0FDL0IsR0FBZSxNQUFaa0MsRUFDSCxJQUFJLElBQUkxQixFQUFFLEVBQUVBLEVBQUV1QyxFQUFHdkMsSUFDakJqQixTQUFTYyxlQUFleUMsSUFBVUQsRUFBS3JDLElBQUlmLE1BQU1zQyxnQkFBa0IsYUFDOUQsR0FBZSxNQUFaRyxFQUFnQixDQUNwQixJQUFJakIsRUFBVzZCLEVBQVE1QixXQUFXLEdBQ2xDLElBQUksSUFBSVYsRUFBRSxFQUFFQSxFQUFFdUMsRUFBR3ZDLElBQ2pCakIsU0FBU2MsZUFBZWdCLE9BQU9DLGFBQWFMLEtBQWU0QixHQUFNcEQsTUFBTXNDLGdCQUFnQixVQVhyRmEsRUFnQk4sU0FBZWYsR0FBR0EsRUFBRUMsT0FBT3JDLE1BQU1zQyxnQkFBZ0IsUUFDakQsSUFBSWMsRUFBT2hCLEVBQUVDLE9BQU9oQyxRQUFRRyxPQUN4QjZDLEVBQVVqQixFQUFFQyxPQUFPaEMsUUFBUUUsT0FDL0IsR0FBZSxNQUFaa0MsRUFDQyxJQUFJLElBQUkxQixFQUFFLEVBQUVBLEVBQUV1QyxFQUFHdkMsSUFDakJqQixTQUFTYyxlQUFleUMsSUFBVUQsRUFBS3JDLElBQUlmLE1BQU1zQyxnQkFBa0IsYUFDOUQsR0FBZSxNQUFaRyxFQUFnQixDQUNwQixJQUFJakIsRUFBVzZCLEVBQVE1QixXQUFXLEdBQ2xDLElBQUksSUFBSVYsRUFBRSxFQUFFQSxFQUFFdUMsRUFBR3ZDLElBQ2pCakIsU0FBU2MsZUFBZWdCLE9BQU9DLGFBQWFMLEtBQWU0QixHQUFNcEQsTUFBTXNDLGdCQUFnQixVQ25CL0ZaLFFBQVFDLElBQUksTUFHVixJQVNJMkIsRUFUQVYsRUFBYSxHQUNiQyxFQUFhLEdBRWJKLEVBQVksSUFFWkUsRUFBYSxDQUFDLFVBQVUsV0FDeEJELEVBQU1DLEVBQVcsR0FDckI3QyxTQUFTYyxlQUFlLE9BQU9ULFlBQWN1QyxFQU0vQzVDLFNBQVNjLGVBQWUsU0FBUzJDLGlCQUFpQixTQUFRLEtBQW9CLE1BQVpkLEdBQWlCQSxFQUFVLElBQUkzQyxTQUFTYyxlQUFlLFlBQVlULFlBQVksY0FBa0MsTUFBWnNDLElBQWlCQSxFQUFVLElBQUkzQyxTQUFTYyxlQUFlLFlBQVlULFlBQVksZUFJdFAsTUFBTXFELEVBQWEsS0FDWmQsSUFBUUMsRUFBVyxJQUFJRCxFQUFNQyxFQUFXLEdBQUk3QyxTQUFTYyxlQUFlLE9BQU9ULFlBQWN1QyxJQUM1RUMsRUFBVyxHQUFJRCxFQUFNQyxFQUFXLEdBQUc3QyxTQUFTYyxlQUFlLE9BQU9ULFlBQWN1QyxJQVVwRyxTQUFTcEMsRUFBSThCLEdBQUdWLFFBQVFDLElBQUlTLEVBQUVDLE9BQU9oQyxRQUFRRSxRQTBDN0MsU0FBU2tELElBQ0xILEVBQUcsRUFDSEUsSUFDQSxJQUFJRSxFQUFPNUQsU0FBUzZELGlCQUFpQixTQUN6QyxJQUFJLElBQUk1QyxFQUFFLEVBQUVBLEVBQUUyQyxFQUFNdkMsT0FBT0osSUFDdkIyQyxFQUFNM0MsR0FBRzZDLG9CQUFvQixRQUFRVixHQUN6Q1EsRUFBTTNDLEdBQUc2QyxvQkFBb0IsUUFBUUgsR0FDckNDLEVBQU0zQyxHQUFHZixNQUFNc0MsZ0JBQWtCLFNBS2pDLFdBRUksSUFBSW9CLEVBQU81RCxTQUFTNkQsaUJBQWlCLFNBQ3pDLElBQUksSUFBSTVDLEVBQUUsRUFBRUEsRUFBRTJDLEVBQU12QyxPQUFPSixJQUUzQjJDLEVBQU0zQyxHQUFHd0MsaUJBQWlCLFFBQVFqRCxHQUNsQ29ELEVBQU0zQyxHQUFHZixNQUFNc0MsZ0JBQWtCLFFBQ2pDb0IsRUFBTTNDLEdBQUd3QyxpQkFBaUIsYUFBYW5CLElBQUtBLEVBQUVDLE9BQU9yQyxNQUFNc0MsZ0JBQWdCLFNBQzNFb0IsRUFBTTNDLEdBQUd3QyxpQkFBaUIsY0FBY25CLElBQUtBLEVBQUVDLE9BQU9yQyxNQUFNc0MsZ0JBQWdCLFdBWDVFdUIsR0FvQkEsTUFBTUMsRUFzR1EsQ0FBQ0MsY0FsR1gsV0FFSXZFLEVBQWdCc0Isa0JBQ2hCLElBQUk0QyxFQUFRNUQsU0FBUzZELGlCQUFpQixTQUV0Q0wsRUFBRyxFQUNILElBQUksSUFBSXZDLEVBQUUsRUFBRUEsRUFBRTJDLEVBQU12QyxPQUFPSixJQUN2QjJDLEVBQU0zQyxHQUFHd0MsaUJBQWlCLFFBQVFwQixHQUNsQ3VCLEVBQU0zQyxHQUFHd0MsaUJBQWlCLFFBQVFPLEVBQWdCRSxjQUNsRE4sRUFBTTNDLEdBQUd3QyxpQkFBaUIsWUFBWUosR0FDMUNPLEVBQU0zQyxHQUFHd0MsaUJBQWlCLGFBQWFKLElBd0ZsQmEsYUFyRnpCLFdBRUksSUFBSU4sRUFBUTVELFNBQVM2RCxpQkFBaUIsU0FHdENMLEVBQUcsRUFDSCxJQUFJLElBQUl2QyxFQUFFLEVBQUVBLEVBQUUyQyxFQUFNdkMsT0FBT0osSUFDdkIyQyxFQUFNM0MsR0FBRzZDLG9CQUFvQixRQUFRekIsR0FDckN1QixFQUFNM0MsR0FBRzZDLG9CQUFvQixRQUFRRSxFQUFnQkUsY0FDckROLEVBQU0zQyxHQUFHd0MsaUJBQWlCLFFBQVFSLEdBQ2xDVyxFQUFNM0MsR0FBR3dDLGlCQUFpQixRQUFRTyxFQUFnQkcsZUFDbERQLEVBQU0zQyxHQUFHd0MsaUJBQWlCLFlBQVlKLEdBQzFDTyxFQUFNM0MsR0FBR3dDLGlCQUFpQixhQUFhSixJQXlFTGMsY0FyRXRDLFdBRUksSUFBSVAsRUFBUTVELFNBQVM2RCxpQkFBaUIsU0FHdENMLEVBQUcsRUFDSCxJQUFJLElBQUl2QyxFQUFFLEVBQUVBLEVBQUUyQyxFQUFNdkMsT0FBT0osSUFDdkIyQyxFQUFNM0MsR0FBRzZDLG9CQUFvQixRQUFRYixHQUNyQ1csRUFBTTNDLEdBQUc2QyxvQkFBb0IsUUFBUUUsRUFBZ0JHLGVBQ3JEUCxFQUFNM0MsR0FBR3dDLGlCQUFpQixRQUFRUCxHQUNsQ1UsRUFBTTNDLEdBQUd3QyxpQkFBaUIsUUFBUU8sRUFBZ0JJLGlCQUNsRFIsRUFBTTNDLEdBQUd3QyxpQkFBaUIsWUFBWUosR0FDMUNPLEVBQU0zQyxHQUFHd0MsaUJBQWlCLGFBQWFKLElBeURTZSxnQkFyRHBELFdBRUksSUFBSVIsRUFBUTVELFNBQVM2RCxpQkFBaUIsU0FHdENMLEVBQUcsRUFDSCxJQUFJLElBQUl2QyxFQUFFLEVBQUVBLEVBQUUyQyxFQUFNdkMsT0FBT0osSUFDdkIyQyxFQUFNM0MsR0FBRzZDLG9CQUFvQixRQUFRWixHQUNyQ1UsRUFBTTNDLEdBQUc2QyxvQkFBb0IsUUFBUUUsRUFBZ0JJLGlCQUNyRFIsRUFBTTNDLEdBQUd3QyxpQkFBaUIsUUFBUU4sR0FDbENTLEVBQU0zQyxHQUFHd0MsaUJBQWlCLFFBQVFPLEVBQWdCSyxpQkFDbERULEVBQU0zQyxHQUFHd0MsaUJBQWlCLFlBQVlKLEdBQzFDTyxFQUFNM0MsR0FBR3dDLGlCQUFpQixhQUFhSixJQXlDeUJnQixnQkFyQ3BFLFdBRUksSUFBSVQsRUFBUTVELFNBQVM2RCxpQkFBaUIsU0FHdENMLEVBQUcsRUFDSCxJQUFJLElBQUl2QyxFQUFFLEVBQUVBLEVBQUUyQyxFQUFNdkMsT0FBT0osSUFDdkIyQyxFQUFNM0MsR0FBRzZDLG9CQUFvQixRQUFRWCxHQUNyQ1MsRUFBTTNDLEdBQUc2QyxvQkFBb0IsUUFBUUUsRUFBZ0JLLGlCQUNyRFQsRUFBTTNDLEdBQUd3QyxpQkFBaUIsUUFBUUwsR0FHL0JSLElBQVFDLEVBQVcsR0FBSWUsRUFBTTNDLEdBQUd3QyxpQkFBaUIsUUFBUUUsR0FDekRmLElBQVFDLEVBQVcsSUFBSWUsRUFBTTNDLEdBQUd3QyxpQkFBaUIsUUFBUU8sRUFBZ0JNLE1BRTVFVixFQUFNM0MsR0FBR3dDLGlCQUFpQixZQUFZSixHQUMxQ08sRUFBTTNDLEdBQUd3QyxpQkFBaUIsYUFBYUosSUFxQnlDaUIsS0FqQnBGLFdBSUFaLElBQ0ksSUFBSUUsRUFBUTVELFNBQVM2RCxpQkFBaUIsU0FFdEMsSUFBSSxJQUFJNUMsRUFBRSxFQUFFQSxFQUFFMkMsRUFBTXZDLE9BQU9KLElBQ3ZCMkMsRUFBTTNDLEdBQUc2QyxvQkFBb0IsUUFBUVYsR0FDckNRLEVBQU0zQyxHQUFHNkMsb0JBQW9CLFFBQVFFLEVBQWdCTSxNQUNyRFYsRUFBTTNDLEdBQUdmLE1BQU1zQyxnQkFBa0IsUUFFN0N3QixFQUFnQkMsa0JBY2hCRCxFQUFnQkMsaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvY2hvb3NlQ29vcmRpbmF0ZXMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvc2hpcHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiY29uc3QgR2FtZWJvYXJkTW9kdWxlID0gKCgpID0+IHtcblxuICAgIGxldCBib3JkID0gXCJzb2xpZCBibGFjayAycHhcIjtcbiAgICBsZXQgbm9ib3JkID0gXCJub25lXCI7XG4gICAgXG4gICAgXG4gICAgY29uc3QgY3JlYXRlR3JpZHMgPSAobHRyLG5vLGlkKSA9PntcbiAgICBsZXQgZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICBncmlkLnN0eWxlLnBhZGRpbmcgPSBcIjEwcHhcIjtcbiAgICAvL3RyeWluZyB0byB0YWtlIG91dCB0aGUgYm9yZGVyaW5nIG9mIHRoZSBub3QgaW4gcGxheSBjZWxsc1xuICAgIGlmKGlkPT09IDApe2dyaWQuc3R5bGUuYm9yZGVyPW5vYm9yZH1cbiAgICBlbHNlIGlmKG5vPT09MCl7Z3JpZC5zdHlsZS5ib3JkZXIgPSBub2JvcmQ7fVxuICAgIGVsc2V7Z3JpZC5zdHlsZS5ib3JkZXIgPSBib3JkO31cbiAgICBcbiAgICBcbiAgICBncmlkLnRleHRDb250ZW50ID0gaWQ7XG4gICAgZ3JpZC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgIGlmKGlkPT09MCAmJiBsdHI9PT1cIjBcIil7Z3JpZC50ZXh0Q29udGVudCA9IG5vfVxuICAgIGVsc2UgaWYobm89PT0wICYmIGx0ciE9XCIwXCIpe2dyaWQudGV4dENvbnRlbnQgPSBsdHJ9XG4gICAgZ3JpZC5kYXRhc2V0LmhpdCA9IFwiTm9cIlxuICAgIGxldCBncmRhdGEgPSBncmlkLmRhdGFzZXQuaGl0O1xuICAgIGxldCBsZXR0ZXIgPSBncmlkLmRhdGFzZXQubGV0dGVyID0gbHRyO1xuICAgIGxldCBudW1iZXIgPSBncmlkLmRhdGFzZXQubnVtYmVyID0gbm87XG4gICAgLy9zaG93cyB3aGljaCBwbGF5ZXIgb3ducyB0aGUgY2VsbC8vXG4gICAgLy9sZXQgcGxheWVyID0gZ3JpZC5kYXRhc2V0LnBsYXllcmNlbGwgPSBcInBsYXllclwiK3BseXI7XG4gICAgXG4gICAgLy9jcmVhdGluZyBhIGNsYXNzIGZvciBlYWNoIGdyaWQgc28gd2UgY2FuIGFjY2VzcyBpdCBmcm9tIHRoZSBmdW5jdGlvbnNcbiAgICBncmlkLmNsYXNzTGlzdC5hZGQoXCJjZWxsXCIpO1xuICAgIC8vY3JlYXRpbmcgYW4gaWQgdGhhdCBtYXRjaGVzIGl0cyBjb29yZGluYXRlc1xuICAgIGdyaWQuc2V0QXR0cmlidXRlKCdpZCcsZ3JpZC5kYXRhc2V0LmxldHRlcitncmlkLmRhdGFzZXQubnVtYmVyKVxuICAgIFxuICAgICAgICAgXG4gICAgbGV0IGdhbWVib2FyZCA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVib2FyZDFcIik7XG4gICAgXG4gICAgZ2FtZWJvYXJkLmFwcGVuZENoaWxkKGdyaWQpO1xuICAgIFxuICAgIH1cbiAgICBcbiAgICAvL2NyZWF0ZSB0aGUgd2hvbGUgZ3JpZCB3aXRoIGJlbG93IGZ1bmN0aW9uXG4gICAgY29uc3QgY3JlYXRlR2FtZWJvYXJkID0gKCkgPT57XG4gICAgXG4gICAgZm9yKGxldCBpPTA7aTwxMTtpKyspe1xuICAgICAgICBcbiAgICBcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiMFwiLDAsaSlcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJCXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkNcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRFwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJFXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkZcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiR1wiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJIXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIklcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSlwiLGkpO1xuICAgIFxuICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtjcmVhdGVHcmlkcyxjcmVhdGVHYW1lYm9hcmR9XG4gICAgfSkoKTtcblxuICAgIGV4cG9ydHtHYW1lYm9hcmRNb2R1bGV9OyIsIi8vdGhlIGNob29vc2UgY29vcmRpbmF0ZXMgZnVuY3Rpb25cbmZ1bmN0aW9uIGNob29zZUNyZG50cyhTdHJ0THR0cnMsU3RydE5vLGxlbmd0aCxWb3JIKXtcbiAgICBsZXQgY29vcmQgPSBbXTtcbiAgICBcbiAgICBpZihWb3JIPT09XCJWXCIpe1xuICAgIGxldCBvdmVyID0gMTEtbGVuZ3RoO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKFN0cnRObz5vdmVyKXtTdHJ0Tm8gPSBvdmVyfVxuICAgIC8vaWYoVm9ySD09PVwiVmVydGljYWxcIil7fSBXaWxsIGJlIHRyZWF0aW5nIHRoaXMgdGVzdGluZyBhcyBjb21wbGV0ZSB2ZXJ0aWNhbCBwb3NpdGlvbmluZ1xuICAgIGZvcihsZXQgaT0xO2k8bGVuZ3RoKzE7aSsrKXtcbiAgICAgICAgY29vcmQucHVzaChTdHJ0THR0cnMgKyBTdHJ0Tm8rKylcbiAgICB9XG59XG5cbmVsc2UgaWYoVm9ySD09PVwiSFwiKXtcbiAgICBsZXQgTHRyTnVtYmVyID0gU3RydEx0dHJzLmNoYXJDb2RlQXQoMClcbiAgICBsZXQgb3ZlciA9IDc1LWxlbmd0aDtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihMdHJOdW1iZXI+b3Zlcil7THRyTnVtYmVyID0gb3Zlcn1cbiAgICBjb25zb2xlLmxvZyhMdHJOdW1iZXIpXG4gICAgY29uc29sZS5sb2cob3ZlcilcbiAgICBcbiAgICBmb3IobGV0IGk9MTtpPGxlbmd0aCsxO2krKyl7XG4gICAgICAgIGNvb3JkLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBTdHJ0Tm8pXG4gICAgfVxuXG59XG4gICAgcmV0dXJuIGNvb3JkO1xuXG59XG5cbmV4cG9ydCB7Y2hvb3NlQ3JkbnRzfSIsImltcG9ydHtwaXAsZGlyZWN0aW9uLHBsYXllcjFjb29yZCxwbGF5ZXIyY29vcmQscGxheWVyQmFzZSxjaGFuUGxheWVyfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0e2Nob29zZUNyZG50c30gZnJvbSAnLi9jaG9vc2VDb29yZGluYXRlcydcblxuXG5mdW5jdGlvbiBzaGlwZmFjdG9yeShuYW1lLGNvb3JkaW5hdGVzKXtcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy5jb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzXG4gICAgXG4gIH1cblxuICBsZXQgY29vcmRpZDtcblxuXG4gIGNvbnN0IGNhcnJpZXIgPSAodCkgPT57ICAgIFxuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDYXJyaWVyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgICAgIFxuICAgICAgbGV0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuICAgICAgcC50ZXh0Q29udGVudCA9ICdDYXJyaWVyJyArXCItXCIrIGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDIsZGlyZWN0aW9uKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29vcmRpZCkuYXBwZW5kQ2hpbGQocCk7XG4gICAgXG4gICAgcmV0dXJuIFBDO1xuICAgIH1cblxuICBjb25zdCBiYXR0bGVzaGlwID0gKHQpID0+e1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJCYXR0bGVzaGlwXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMyxkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgXG5cbiAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICBwLnRleHRDb250ZW50ID0gJ0JhdHRsZVNoaXAnICtcIi1cIisgY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMyxkaXJlY3Rpb24pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb29yZGlkKS5hcHBlbmRDaGlsZChwKTtcbiAgICBcbiAgICByZXR1cm4gUEM7XG4gIH1cbiAgY29uc3QgY3J1aXNlciA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQ3J1aXNlclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDQsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDsgY29vcmRpZCA9IFwicDFjXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkOyBjb29yZGlkID0gXCJwMmNcIn1cbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgIFxuXG4gICAgbGV0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuICAgICAgcC50ZXh0Q29udGVudCA9ICdDcnVpc2VyJyArXCItXCIrIGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDQsZGlyZWN0aW9uKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29vcmRpZCkuYXBwZW5kQ2hpbGQocCk7XG4gICAgXG4gICAgcmV0dXJuIFBDO1xuICB9XG4gIGNvbnN0IHN1Ym1hcmluZSA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiU3VibWFyaW5lXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNSxkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgXG5cbiAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICBwLnRleHRDb250ZW50ID0gJ1N1Ym1hcmluZScgK1wiLVwiKyBjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw1LGRpcmVjdGlvbilcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvb3JkaWQpLmFwcGVuZENoaWxkKHApO1xuICAgIFxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBkZXN0cm95ZXIgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkRlc3Ryb3llclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDYsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDsgY29vcmRpZCA9IFwicDFjXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkOyBjb29yZGlkID0gXCJwMmNcIn1cbiAgICBQQy5wdXNoKGd1bm4pO1xuXG4gICAgXG4gICAgXG5cbiAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICBwLnRleHRDb250ZW50ID0gJ0Rlc3Ryb3llcicgK1wiLVwiKyBjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw2LGRpcmVjdGlvbilcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvb3JkaWQpLmFwcGVuZENoaWxkKHApO1xuICAgIFxuICAgIHJldHVybiBQQztcbiAgfVxuXG4gIGV4cG9ydCB7c2hpcGZhY3RvcnksY2FycmllcixiYXR0bGVzaGlwLGNydWlzZXIsc3VibWFyaW5lLGRlc3Ryb3llcn0iLCJpbXBvcnQge3NxLGRpcmVjdGlvbixwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkfSBmcm9tICcuL2luZGV4J1xuY29uc3QgZG9tTW9kdWxlID0gKCgpID0+e1xuLy9mdW5jdGlvbiBmb3IgaGlnaGxpZ2h0aW5nIHNxdWFyZXMgd2hlbiBob3ZlcmluZ1xuZnVuY3Rpb24gaG92ZXIodCl7dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwiZ3JlZW5cIjtcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG5mb3IobGV0IGk9MDtpPHNxO2krKyl7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXR0ZXJyKygrbnVtYitpKSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmVlblwifX1cbmVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPWxldHRlcnIuY2hhckNvZGVBdCgwKVxuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIG51bWIpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZWVuXCJ9XG59XG59XG5cbi8vZnVuY3Rpb24gZm9yIHJldHVybmluZyBzcXVhcmUgY29sb3IgdG8gd2hpdGUgYWZ0ZXIgbGVhdmluZ1xuZnVuY3Rpb24gbGVhdmUodCl7dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIjtcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCJ9fVxuICAgIGVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgICAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICAgICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIG51bWIpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJ9XG4gICAgfVxuICAgIH1cblxuICAgIC8vcHVyZWx5IGZvciBidWlsZGluZyBwdXJwb3Nlc1xuZnVuY3Rpb24gc2hvd0Nvb3JkcCgpe1xuICAgIGZvcihsZXQgaT0wO2k8cGxheWVyMWNvb3JkLmxlbmd0aDtpKyspe1xuICAgICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICAgIHAudGV4dENvbnRlbnQgPSBwbGF5ZXIxY29vcmRbaV0ubmFtZSArJy0nK3BsYXllcjFjb29yZFtpXS5jb29yZGluYXRlcztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMWNcIikuYXBwZW5kQ2hpbGQocCk7XG4gICAgICB9XG5cbiAgICAgIGZvcihsZXQgaT0wO2k8cGxheWVyMmNvb3JkLmxlbmd0aDtpKyspe1xuICAgICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICAgIHAudGV4dENvbnRlbnQgPSBwbGF5ZXIyY29vcmRbaV0ubmFtZSArJy0nK3BsYXllcjJjb29yZFtpXS5jb29yZGluYXRlcztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMmNcIikuYXBwZW5kQ2hpbGQocCk7XG4gICAgICB9fVxuXG5yZXR1cm4ge2hvdmVyLGxlYXZlLHNob3dDb29yZHB9XG59KSgpO1xuXG5cbmV4cG9ydHtkb21Nb2R1bGV9IiwiaW1wb3J0IHtHYW1lYm9hcmRNb2R1bGV9IGZyb20gJy4vZ2FtZWJvYXJkJ1xuaW1wb3J0IHtjYXJyaWVyLGJhdHRsZXNoaXAsY3J1aXNlcixzdWJtYXJpbmUsZGVzdHJveWVyfSBmcm9tICcuL3NoaXBzJ1xuaW1wb3J0IHtkb21Nb2R1bGV9IGZyb20gJy4vZG9tJ1xuXG5cblxuXG5jb25zb2xlLmxvZyhcIkhJXCIpO1xuXG4gIC8vY29vcmRpbmF0ZXMgb2YgZWFjaCBwbGF5ZXJzIHNoaXAsIGp1c3QgZm9yIHRlc3RpbmcgdW50aWwgd2UgdXNlIG11bHRpcGxlIHNoaXBzXG4gIGxldCBwbGF5ZXIxY29vcmQ9W107XG4gIGxldCBwbGF5ZXIyY29vcmQ9W107XG4gIC8vVj1WZXJ0aWNhbCwgSD1Ib3Jpem9udGFsXG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICAvL3BsYXllciBpbiBwbGF5XG4gIGxldCBwbGF5ZXJCYXNlID0gW1wicGxheWVyMVwiLFwicGxheWVyMlwiXTtcbiAgbGV0IHBpcCA9IHBsYXllckJhc2VbMF07XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO1xuICAvL3RoZSBzcXVhcmVzIHRoYXQgbmVlZCBoaWdobGlnaHRpbmcgZm9yIHRoZSBkb21cbiAgbGV0IHNxO1xuICBcblxuLy9idXR0b24gdG8gY2hhbmdlIHRoZSBwb3NpdGlvbmluZyBvZiB0aGUgcGxhY2VtZW50XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e2lmKGRpcmVjdGlvbj09PVwiVlwiKXtkaXJlY3Rpb249XCJIXCI7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblwiKS50ZXh0Q29udGVudD1cIkhvcml6b250YWxcIjt9ZWxzZSBpZihkaXJlY3Rpb249PT1cIkhcIil7ZGlyZWN0aW9uPVwiVlwiO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25cIikudGV4dENvbnRlbnQ9XCJWZXJ0aWNhbFwifX0pXG5cblxuLy9mdW5jdGlvbiBjaGFuZ2VzIHBsYXllclxuY29uc3QgY2hhblBsYXllciA9ICgpPT57XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtwaXAgPSBwbGF5ZXJCYXNlWzFdOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe3BpcCA9IHBsYXllckJhc2VbMF07ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgIGVsc2V7cGlwID0gcGxheWVyQmFzZVswXTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG5cbn1cblxuXG4vL2hpdCBmdW5jdGlvbiBmb3IgdGhlIG1haW4gZ2FtZSBsb29wXG4vL2luIGZ1dHVyZSB3aWxsIG1hcmsgdGhlZSBzcXVhcmUgYXMgaGl0IG5vdCBhbGxvd2luZyB0aGUgcGxheWVyIHRvIGhpdCBhZ2FpblxuLy90YWtlcyB0aGUgY29vcmRpbmF0ZXMgb3V0IG9mIHRoZSBwbGF5ZXJzIGFycmF5XG5cbmZ1bmN0aW9uIGhpdCh0KXtjb25zb2xlLmxvZyh0LnRhcmdldC5kYXRhc2V0LmxldHRlcik7XG4gICAgLypsZXQgUEMgPSBwbGF5ZXIxY29vcmQ7XG4gICAgbGV0IEwgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgTiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIGxldCBoaXRDb29yZCA9IEwrTjtcbiAgICBjb25zb2xlLmxvZyhoaXRDb29yZCk7XG4gICAgY29uc29sZS5sb2coUEMubGVuZ3RoKTtcbiAgICBcbiAgICBcbiAgICBcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkO31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIxY29vcmQ7fVxuXG5jb25zb2xlLmxvZyhQQ1syXS5jb29yZGluYXRlcylcbmNvbnNvbGUubG9nKFBDKVxuZm9yKGxldCBwPTA7cDxQQy5sZW5ndGg7cCsrKXtcbiAgICBjb25zb2xlLmxvZyhQQ1twXSlcbmZvcihsZXQgaT0wO2k8UENbcF0uY29vcmRpbmF0ZXMubGVuZ3RoO2krKyl7XG4gICAgaWYoUENbcF0uY29vcmRpbmF0ZXNbaV09PT1oaXRDb29yZCl7XG4gICAgICAgIGFsZXJ0KFwiSElUXCIpO1xuICAgICAgICBcbiAgICBQQ1twXS5jb29yZGluYXRlc1tpXS5zcGxpY2UoaSwxKTtcbiAgICBcbiAgICBnYW1lT3ZlcigpO1xuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICB9XG4gICAgXG59XG59XG4gICAgY2hhblBsYXllcigpO1xucmV0dXJuIFBDXG4qL1xufVxuXG4gZnVuY3Rpb24gZ2FtZU92ZXIoKXtcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyMWNvb3JkWzBdKVxuICAgICAgICBpZihwbGF5ZXIxY29vcmRbMF0ubGVuZ3RoID09PSAwKXthbGVydChcIlBsYXllciB0d28gd2luc1wiKTt9XG4gICAgICAgIGVsc2UgaWYocGxheWVyMmNvb3JkWzBdLmxlbmd0aCA9PT0gMCl7YWxlcnQoXCJQbGF5ZXIgb25lIHdpbnNcIil9XG4gICAgICAgIFxuICAgIH1cbiAgICBcblxuZnVuY3Rpb24gc3RhcnRHYW1lKCl7XG4gICAgc3E9MVxuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbmZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG5jZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc3RhcnRHYW1lKVxuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xufVxucGxheUdhbWUoKTt9XG4gICAgXG4gICAgXG5mdW5jdGlvbiBwbGF5R2FtZSgpe1xuICAgIFxuICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcblxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGhpdClcbmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsKHQpPT57dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwicmVkXCJ9KVxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsKHQpPT57dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIn0pXG59XG5cbn1cblxuXG5cblxuLy9TZWxlY3Rpb24gbW9kdWxlXG5jb25zdCBzZWxlY3Rpb25Nb2R1bGUgPSAoKCkgPT57XG5cbiAgICAgICAgXG4gICAgLy9hZGRzIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGV2ZXJ5IGdyaWQgY2VsbCBhbGxvd2luZyB1cyB0byBjaG9vc2Ugb3VyIGNvb3JkaW5hdGVzLG1hcCB0aGVtIHRvIHRoZSBhcnJheSB0aGVuIGNoYW5nZSBwbGF5ZXJcbiAgICBmdW5jdGlvbiBwMWNhcnJpZXJTaGlwKCl7XG4gICAgICAgXG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHYW1lYm9hcmQoKTtcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9MjtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYXJyaWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFiYXR0bGVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICAgICAgfVxuICAgIGZ1bmN0aW9uIHAxYmF0dGxlU2hpcCgpe1xuICAgICAgICBcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTM7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsY2FycmllcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxYmF0dGxlU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsYmF0dGxlc2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxY3J1aXNlclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHAxY3J1aXNlclNoaXAoKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT00O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGJhdHRsZXNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWNydWlzZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjcnVpc2VyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFzdWJtYXJpbmVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwMXN1Ym1hcmluZVNoaXAoKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT01O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGNydWlzZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMXN1Ym1hcmluZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHN1Ym1hcmluZSkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxZGVzdHJveWVyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcDFkZXN0cm95ZXJTaGlwKCl7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9NjtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdWJtYXJpbmUpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWRlc3Ryb3llclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG4gICAgICAgICAgICAvL3RoaXMgZGVjaWRlcyB3aGV0aGVyIHRoZSBnYW1lIHN0YXJ0cyBhZnRlciBwbGF5ZXIgdHdvIG9yIHRoZSBjb21wdXRlciBoYXMgc2VsZWN0ZWQgdGhlaXIgZ3JpZHNcbiAgICAgICAgICAgIC8vaWYgbm90IGl0IGxvb3BzIGFyb3VuZFxuICAgICAgICAgICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc3RhcnRHYW1lKX1cbiAgICAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7Y2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5sb29wKSB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wKCl7XG5cbiAgICAgICAgLy9UaGlzIGZ1bmN0aW9uIHR1cm5zIHRoZSBzZWxlY3Rpb24gcHJvY2VzcyBvdmVyIHRvIGVpdGhlciBhIGNvbXB1dGVyIG9yIHBsYXllciAyXG4gICAgLy9qdXN0IGRvaW5nIHBsYXllciAyIGltcGxlbWV0YXRpb24gZm9yIG5vd1xuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgXG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUubG9vcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgfVxuc2VsZWN0aW9uTW9kdWxlLnAxY2FycmllclNoaXAoKTtcbn1cblxuXG4gICAgXG4gICAgICAgIHJldHVybntwMWNhcnJpZXJTaGlwLHAxYmF0dGxlU2hpcCxwMWNydWlzZXJTaGlwLHAxc3VibWFyaW5lU2hpcCxwMWRlc3Ryb3llclNoaXAsbG9vcH1cbiAgICBcbiAgICB9KSgpO1xuXG5cblxuXG5cblxuc2VsZWN0aW9uTW9kdWxlLnAxY2FycmllclNoaXAoKTtcblxuXG5cbmV4cG9ydCB7c3EsZGlyZWN0aW9uLHBpcCxwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBsYXllckJhc2UsY2hhblBsYXllcn1cblxuXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkdhbWVib2FyZE1vZHVsZSIsImNyZWF0ZUdyaWRzIiwibHRyIiwibm8iLCJpZCIsImdyaWQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBhZGRpbmciLCJib3JkZXIiLCJ0ZXh0Q29udGVudCIsInRleHRBbGlnbiIsImRhdGFzZXQiLCJoaXQiLCJsZXR0ZXIiLCJudW1iZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiY3JlYXRlR2FtZWJvYXJkIiwiaSIsImNob29zZUNyZG50cyIsIlN0cnRMdHRycyIsIlN0cnRObyIsImxlbmd0aCIsIlZvckgiLCJjb29yZCIsIm92ZXIiLCJwdXNoIiwiTHRyTnVtYmVyIiwiY2hhckNvZGVBdCIsImNvbnNvbGUiLCJsb2ciLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJzaGlwZmFjdG9yeSIsIm5hbWUiLCJjb29yZGluYXRlcyIsInRoaXMiLCJjb29yZGlkIiwiY2FycmllciIsInQiLCJ0YXJnZXQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJQQyIsImd1bm4iLCJkaXJlY3Rpb24iLCJwaXAiLCJwbGF5ZXJCYXNlIiwicGxheWVyMWNvb3JkIiwicGxheWVyMmNvb3JkIiwicCIsImJhdHRsZXNoaXAiLCJjcnVpc2VyIiwic3VibWFyaW5lIiwiZGVzdHJveWVyIiwiZG9tTW9kdWxlIiwibnVtYiIsImxldHRlcnIiLCJzcSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGFuUGxheWVyIiwic3RhcnRHYW1lIiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInBsYXlHYW1lIiwic2VsZWN0aW9uTW9kdWxlIiwicDFjYXJyaWVyU2hpcCIsInAxYmF0dGxlU2hpcCIsInAxY3J1aXNlclNoaXAiLCJwMXN1Ym1hcmluZVNoaXAiLCJwMWRlc3Ryb3llclNoaXAiLCJsb29wIl0sInNvdXJjZVJvb3QiOiIifQ==