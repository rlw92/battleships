(()=>{"use strict";var e={d:(t,l)=>{for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{jK:()=>k,zf:()=>b,o7:()=>w,bF:()=>x,P4:()=>A,VL:()=>S,hJ:()=>B,yR:()=>L,He:()=>I,w7:()=>Y,sq:()=>C,t:()=>q});const t={createGrids:(e,t,l)=>{let n=document.createElement("div");n.style.padding="10px",n.style.border=0===l||0===t?"none":"solid black 2px",n.textContent=l,n.style.textAlign="center",0===l&&"0"===e?n.textContent=t:0===t&&"0"!=e&&(n.textContent=e),n.dataset.hit="No",n.dataset.P1hit="N",n.dataset.P2hit="N",n.dataset.letter=e,n.dataset.number=t,n.classList.add("cell"),n.setAttribute("id",n.dataset.letter+n.dataset.number),document.getElementById("gameboard1").appendChild(n)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function l(e,t,l,n){let o=[];if("V"===n){let n=11-l;t>n&&(t=n);for(let n=1;n<l+1;n++)o.push(e+t++)}else if("H"===n){let n=e.charCodeAt(0),r=75-l;n>r&&(n=r),console.log(n),console.log(r);for(let e=1;e<l+1;e++)o.push(String.fromCharCode(n++)+t)}return o}function n(e,t){let l=e,n=t,o=0;for(let e=0;e<n.length;e++)for(let t=0;t<l.length;t++)for(let r=0;r<l[t].coordinates.length;r++)l[t].coordinates[r]===n[e]&&o++;return o=o>0?"Y":"N",o}function o(e,t){this.name=e,this.coordinates=t,this.hitShip=()=>{alert("You struck the "+e+" ship")},this.isSunk=()=>{0===t.length&&alert("You sunk the "+e+" ship")}}let r;const s=e=>{e.target.style.backgroundColor="red";let t,n=e.target.dataset.letter,s=e.target.dataset.number,a=new o("Carrier",l(n,s,2,w));return"0"===s?console.log("Stay in the grid."):(A===Y[0]?(t=S,r="p1c"):A===Y[1]&&(t=L,r="p2c"),t.push(a)),t},a=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Battleship",l(s,a,3,w));return"0"===a?console.log("Stay in the grid."):(A===Y[0]?(t=S,r="p1c"):A===Y[1]&&(t=L,r="p2c"),"Y"===n(t,l(s,a,3,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},i=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Cruiser",l(s,a,4,w));return"0"===a?console.log("Stay in the grid."):(A===Y[0]?(t=S,r="p1c"):A===Y[1]&&(t=L,r="p2c"),"Y"===n(t,l(s,a,4,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},c=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Submarine",l(s,a,5,w));return"0"===a?console.log("Stay in the grid."):(A===Y[0]?(t=S,r="p1c"):A===Y[1]&&(t=L,r="p2c"),"Y"===n(t,l(s,a,5,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},d=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Destroyer",l(s,a,6,w));return"0"===a?console.log("Stay in the grid."):(A===Y[0]?(t=S,r="p1c"):A===Y[1]&&(t=L,r="p2c"),"Y"===n(t,l(s,a,6,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},u=function(e){let t=e.target.dataset.number,l=e.target.dataset.letter,n="blue";if("V"===w){let e=11-C;t>e&&(t=e),n="0"===t?"white":"grey";for(let e=0;e<C;e++)document.getElementById(l+(+t+e)).style.backgroundColor=n}else if("H"===w){let e=l.charCodeAt(0),n=75-C;e>n&&(e=n);for(let l=0;l<C;l++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="grey"}},g=function(e){e.target.backgroundColor="white";let t=e.target.dataset.number,l=e.target.dataset.letter,n=l+t;if(console.log(n),"V"===w){let e=11-C;t>e&&(t=e);for(let e=0;e<C;e++)document.getElementById(l+(+t+e)).style.backgroundColor="white"}else if("H"===w){let e=l.charCodeAt(0),n=75-C;e>n&&(e=n);for(let l=0;l<C;l++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}},m=function(){let e=B;A===Y[0]?e=B:A===Y[1]&&(e=I);for(let t=0;t<e.length;t++)console.log(e[t]),document.getElementById(e[t]).style.backgroundColor="red"},h=function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white"},y=function(e){"0"===e.target.dataset.number?e.target.style.backgroundColor="white":e.target.style.backgroundColor="red"},p=function(e){A===Y[0]?k=e.target.dataset.P1hit:A===Y[1]&&(k=e.target.dataset.P2hit),console.log(k),"Y"===k?e.target.style.backgroundColor="red":"N"===k&&(e.target.style.backgroundColor="white")},f=function(){let e=S;A===Y[0]?(e=S,console.log(e)):A===Y[1]&&(e=L,console.log(e));for(let t=0;t<e.length;t++)for(let l=0;l<e[t].coordinates.length;l++)document.getElementById(e[t].coordinates[l]).style.backgroundColor="grey"},v=(()=>{var e=document.getElementById("myModal"),t=document.getElementById("myBtn");let l=document.getElementById("para1"),n=document.getElementById("para2");document.getElementsByClassName("close")[0];let o=document.getElementById("PSbuttons");o.style.display="none";let r=document.getElementById("compHit");function s(){e.style.display="none"}r.style.display="none",t.onclick=function(){e.style.display="None"};let a=document.getElementById("frnd"),i=document.getElementById("comp");return{showModule:function(){e.style.display="block",l.textContent="CHANGE PLACES!",n.textContent="Click button when ready.",o.style.display="none",t.style.display="block"},playerSelect:function(){e.style.display="block",l.textContent="Are you playing with a friend or against our AI?",t.style.display="none",document.querySelector(".close").style.display="none",o.style.display="block",a.addEventListener("click",(()=>{b="N",e.style.display="none"})),i.addEventListener("click",(()=>{b="Y",e.style.display="none"}))},compHitModal:function(){e.style.display="block",l.textContent="Please click the button below to activate the AI choice!",t.style.display="none",r.style.display="block",document.querySelector(".close").style.display="none",o.style.display="none",r.addEventListener("click",x),r.addEventListener("click",s)},closeModal:s}})(),E=(()=>{function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}return{selectCarrier:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Carrier",l(r,s,2,a));"Y"===n(i,l(r,s,2,a))?E.selectCarrier():(i.push(c),E.selectBattleship())},selectBattleship:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Battleship",l(r,s,3,a));"Y"===n(i,l(r,s,3,a))?E.selectBattleship():(i.push(c),E.selectCruiser())},selectCruiser:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Cruiser",l(r,s,4,a));"Y"===n(i,l(r,s,4,a))?E.selectCruiser():(i.push(c),E.selectSubmarine())},selectSubmarine:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Submarine",l(r,s,5,a));"Y"===n(i,l(r,s,5,a))?E.selectSubmarine():(i.push(c),E.selectDestroyer())},selectDestroyer:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Destroyer",l(r,s,6,a));"Y"===n(i,l(r,s,6,a))?E.selectDestroyer():(i.push(c),q())},randomIntFromInterval:e}})();let C,k,b="N",S=[],L=[],B=[],I=[],w="V",Y=["player1","player2"],A=Y[0],P=S;A===Y[0]?P=S:A===Y[1]&&(P=L),document.getElementById("pip").textContent=A,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===w?(w="H",document.getElementById("position").textContent="Horizontal"):"H"===w&&(w="V",document.getElementById("position").textContent="Vertical")})),document.getElementById("shwshipos").addEventListener("mouseover",(()=>{h(),f()})),document.getElementById("shwshipos").addEventListener("mouseleave",(()=>{h(),m()})),console.log("HEYEE");const M=()=>{let e;e="Y"===b?v.compHitModal():v.showModule(),A===Y[0]?(A=Y[1],P=L,document.getElementById("pip").textContent=A):A===Y[1]?(A=Y[0],P=S,document.getElementById("pip").textContent=A):(A=Y[0],P=L,document.getElementById("pip").textContent=A),h(),m()};let H;function V(){let e,t;e=String.fromCharCode(E.randomIntFromInterval(65,74)),t=Math.floor(1*Math.random()+1),H=e+t;for(let l=0;l<I.length;l++)I[l]===e+t?(alert("Been hit, computer, seek new tile! "),V()):H=e+t;return H}function x(e){console.log(e.target.dataset.letter),console.log(A);let t,l,n,o=S,r=B;if("Y"===b&&A===Y[1]?(alert("Computer is taking its hit"),console.log(V()),n=V(),alert("Computer has struck Tile: "+n)):(t=e.target.dataset.letter,l=e.target.dataset.number,n=t+l),console.log(n),console.log(o.length),A===Y[0]?(o=L,r=B,k=e.target.dataset.P1hit):A===Y[1]&&"Y"!=b?(o=S,r=I,k=e.target.dataset.P2hit):A===Y[1]&&"Y"===b&&(o=S,r=I),"0"===l)console.log("Stay in the grid.");else if("Y"===k)console.log("Already been hit, try again.");else{A===Y[0]?(o=L,r=B,k=e.target.dataset.P1hit="Y"):A===Y[1]&&(o=S,r=I,k=e.target.dataset.P2hit="Y");for(let e=0;e<o.length;e++)for(let t=0;t<o[e].coordinates.length;t++)o[e].coordinates[t]===n&&(console.log(o[e].coordinates),o[e].coordinates.splice(t,1),o[e].hitShip(),o[e].isSunk(),G(),console.log(o[e].coordinates),console.log("Player one sunk ships: 0"),console.log("Player two sunk ships: 0"));r.push(n),console.log("P1 strikes: "+B),console.log("P2 strikes: "+I),M()}}function G(){let e,t=0,l=S;A===Y[0]?(l=L,e="Player One"):A===Y[1]&&(l=S,e="Player Two");for(let e=0;e<l.length;e++)0===l[e].coordinates.length&&++t;console.log(t),5===t&&alert(e+" has won!")}function q(){if(P.length>4)if("Y"===b){alert("Computer is choosing battle positions"),C=1;let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white",document.getElementById("ingamebuttons").style.display="block",document.getElementById("positionPara").style.display="none",document.getElementById("Chnge").style.display="none";N()}else{C=1,M();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",q),e[t].style.backgroundColor="white",document.getElementById("ingamebuttons").style.display="block",document.getElementById("positionPara").style.display="none",document.getElementById("Chnge").style.display="none";N()}}function N(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",x),e[t].style.backgroundColor="white",e[t].removeEventListener("mouseover",u),e[t].removeEventListener("mouseleave",g),e[t].addEventListener("mouseover",y),e[t].addEventListener("mouseleave",p)}const D={p1carrierShip:function(){let e=document.querySelectorAll(".cell");C=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",s),e[t].addEventListener("click",D.p1battleShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)},p1battleShip:function(){if(P.length>0){let e=document.querySelectorAll(".cell");C=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",s),e[t].removeEventListener("click",D.p1battleShip),e[t].addEventListener("click",a),e[t].addEventListener("click",D.p1cruiserShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1cruiserShip:function(){if(P.length>1){console.log(P);let e=document.querySelectorAll(".cell");C=4;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",a),e[t].removeEventListener("click",D.p1cruiserShip),e[t].addEventListener("click",i),e[t].addEventListener("click",D.p1submarineShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1submarineShip:function(){if(P.length>2){let e=document.querySelectorAll(".cell");C=5;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",D.p1submarineShip),e[t].addEventListener("click",c),e[t].addEventListener("click",D.p1destroyerShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1destroyerShip:function(){if(P.length>3){let e=document.querySelectorAll(".cell");C=6;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",D.p1destroyerShip),e[t].addEventListener("click",d),A===Y[1]?e[t].addEventListener("click",q):A===Y[0]&&e[t].addEventListener("click",D.loop),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},loop:function(){if(P.length>4)if("Y"===b){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",D.loop),e[t].style.backgroundColor="white";E.selectCarrier()}else{M();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",D.loop),e[t].style.backgroundColor="white";D.p1carrierShip()}}};v.playerSelect(),t.createGameboard(),D.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVBLEVBQUVzRCxFQUFNbEQsT0FBT0osSUFDdkJzRCxFQUFNdEQsR0FBRzBHLG9CQUFvQixRQUFRN0QsR0FDckNTLEVBQU10RCxHQUFHMEcsb0JBQW9CLFFBQVFDLEVBQWdCTSxNQUNyRDNELEVBQU10RCxHQUFHakIsTUFBTW1ELGdCQUFrQixRQUc3QjRDLEVBQVdPLG9CQUNYLENBSVpRLElBQ0ksSUFBSXZDLEVBQVF6RSxTQUFTMEUsaUJBQWlCLFNBRXRDLElBQUksSUFBSXZELEVBQUUsRUFBRUEsRUFBRXNELEVBQU1sRCxPQUFPSixJQUN2QnNELEVBQU10RCxHQUFHMEcsb0JBQW9CLFFBQVE3RCxHQUNyQ1MsRUFBTXRELEdBQUcwRyxvQkFBb0IsUUFBUUMsRUFBZ0JNLE1BQ3JEM0QsRUFBTXRELEdBQUdqQixNQUFNbUQsZ0JBQWtCLFFBRTdDeUUsRUFBZ0JDLG1CQWFiakQsRUFBWWMsZUFDWGxHLEVBQWdCd0Isa0JBQ3BCNEcsRUFBZ0JDLGlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2Nob29zZUNvb3JkaW5hdGVzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL292ZXJMYXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvc2hpcHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL21vZGFsLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2NvbXB1dGVyQUkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCBHYW1lYm9hcmRNb2R1bGUgPSAoKCkgPT4ge1xuXG4gICAgbGV0IGJvcmQgPSBcInNvbGlkIGJsYWNrIDJweFwiO1xuICAgIGxldCBub2JvcmQgPSBcIm5vbmVcIjtcbiAgICBcbiAgICBcbiAgICBjb25zdCBjcmVhdGVHcmlkcyA9IChsdHIsbm8saWQpID0+e1xuICAgIGxldCBncmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIGdyaWQuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuICAgIC8vdHJ5aW5nIHRvIHRha2Ugb3V0IHRoZSBib3JkZXJpbmcgb2YgdGhlIG5vdCBpbiBwbGF5IGNlbGxzXG4gICAgaWYoaWQ9PT0gMCl7Z3JpZC5zdHlsZS5ib3JkZXI9bm9ib3JkfVxuICAgIGVsc2UgaWYobm89PT0wKXtncmlkLnN0eWxlLmJvcmRlciA9IG5vYm9yZDt9XG4gICAgZWxzZXtncmlkLnN0eWxlLmJvcmRlciA9IGJvcmQ7fVxuICAgIFxuICAgIFxuICAgIGdyaWQudGV4dENvbnRlbnQgPSBpZDtcbiAgICBncmlkLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgaWYoaWQ9PT0wICYmIGx0cj09PVwiMFwiKXtncmlkLnRleHRDb250ZW50ID0gbm99XG4gICAgZWxzZSBpZihubz09PTAgJiYgbHRyIT1cIjBcIil7Z3JpZC50ZXh0Q29udGVudCA9IGx0cn1cbiAgICBncmlkLmRhdGFzZXQuaGl0ID0gXCJOb1wiXG4gICAgZ3JpZC5kYXRhc2V0LlAxaGl0PVwiTlwiXG4gICAgZ3JpZC5kYXRhc2V0LlAyaGl0PVwiTlwiXG4gICAgbGV0IGxldHRlciA9IGdyaWQuZGF0YXNldC5sZXR0ZXIgPSBsdHI7XG4gICAgbGV0IG51bWJlciA9IGdyaWQuZGF0YXNldC5udW1iZXIgPSBubztcbiAgICAvL3Nob3dzIHdoaWNoIHBsYXllciBvd25zIHRoZSBjZWxsLy9cbiAgICAvL2xldCBwbGF5ZXIgPSBncmlkLmRhdGFzZXQucGxheWVyY2VsbCA9IFwicGxheWVyXCIrcGx5cjtcbiAgICBcbiAgICAvL2NyZWF0aW5nIGEgY2xhc3MgZm9yIGVhY2ggZ3JpZCBzbyB3ZSBjYW4gYWNjZXNzIGl0IGZyb20gdGhlIGZ1bmN0aW9uc1xuICAgIGdyaWQuY2xhc3NMaXN0LmFkZChcImNlbGxcIik7XG4gICAgLy9jcmVhdGluZyBhbiBpZCB0aGF0IG1hdGNoZXMgaXRzIGNvb3JkaW5hdGVzXG4gICAgZ3JpZC5zZXRBdHRyaWJ1dGUoJ2lkJyxncmlkLmRhdGFzZXQubGV0dGVyK2dyaWQuZGF0YXNldC5udW1iZXIpXG4gICAgXG4gICAgICAgICBcbiAgICBsZXQgZ2FtZWJvYXJkID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZWJvYXJkMVwiKTtcbiAgICBcbiAgICBnYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ3JpZCk7XG4gICAgXG4gICAgfVxuICAgIFxuICAgIC8vY3JlYXRlIHRoZSB3aG9sZSBncmlkIHdpdGggYmVsb3cgZnVuY3Rpb25cbiAgICBjb25zdCBjcmVhdGVHYW1lYm9hcmQgPSAoKSA9PntcbiAgICBcbiAgICBmb3IobGV0IGk9MDtpPDExO2krKyl7XG4gICAgICAgIFxuICAgIFxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCIwXCIsMCxpKVxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJBXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkJcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQ1wiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJEXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkVcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRlwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJHXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkhcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJKXCIsaSk7XG4gICAgXG4gICAgfVxuICAgIH1cbiAgICByZXR1cm4ge2NyZWF0ZUdyaWRzLGNyZWF0ZUdhbWVib2FyZH1cbiAgICB9KSgpO1xuXG4gICAgZXhwb3J0e0dhbWVib2FyZE1vZHVsZX07IiwiLy90aGUgY2hvb29zZSBjb29yZGluYXRlcyBmdW5jdGlvblxuZnVuY3Rpb24gY2hvb3NlQ3JkbnRzKFN0cnRMdHRycyxTdHJ0Tm8sbGVuZ3RoLFZvckgpe1xuICAgIGxldCBjb29yZCA9IFtdO1xuICAgIFxuICAgIGlmKFZvckg9PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1sZW5ndGg7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoU3RydE5vPm92ZXIpe1N0cnRObyA9IG92ZXJ9XG4gICAgLy9pZihWb3JIPT09XCJWZXJ0aWNhbFwiKXt9IFdpbGwgYmUgdHJlYXRpbmcgdGhpcyB0ZXN0aW5nIGFzIGNvbXBsZXRlIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gICAgZm9yKGxldCBpPTE7aTxsZW5ndGgrMTtpKyspe1xuICAgICAgICBjb29yZC5wdXNoKFN0cnRMdHRycyArIFN0cnRObysrKVxuICAgIH1cbn1cblxuZWxzZSBpZihWb3JIPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPSBTdHJ0THR0cnMuY2hhckNvZGVBdCgwKVxuICAgIGxldCBvdmVyID0gNzUtbGVuZ3RoO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKEx0ck51bWJlcj5vdmVyKXtMdHJOdW1iZXIgPSBvdmVyfVxuICAgIGNvbnNvbGUubG9nKEx0ck51bWJlcilcbiAgICBjb25zb2xlLmxvZyhvdmVyKVxuICAgIFxuICAgIGZvcihsZXQgaT0xO2k8bGVuZ3RoKzE7aSsrKXtcbiAgICAgICAgY29vcmQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIFN0cnRObylcbiAgICB9XG5cbn1cbiAgICByZXR1cm4gY29vcmQ7XG5cbn1cblxuZXhwb3J0IHtjaG9vc2VDcmRudHN9IiwiLy9jb2RlIGZvciBpZGVudGlmeWluZyB3aGVuIHRoZSBjaG9zZW4gY29vcmRpbmF0ZXMgb3ZlcmxhcCBcbi8vd2l0aCBjb29yZGluYXRlcyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkXG5cblxuXG5cblxuZnVuY3Rpb24gb3ZlckxhcChhLGIpe1xuLy9QbGM9IHBsYXllciBjb29yZGluYXRlcyAgICBcbmxldCBwbGM9YTtcbi8vY3JkIGlzIHRoZSBuZXcgY29vcmRpbmF0ZXNcbmxldCBjcmQgPWI7XG4vL3ZhcmlhYmxlIHRvIHJldHVyblxubGV0IG92cmxhcD0wO1xuXG5mb3IobGV0IHo9MDt6PGNyZC5sZW5ndGg7eisrKXtcbmZvcihsZXQgcD0wO3A8cGxjLmxlbmd0aDtwKyspe1xuICAgIGZvcihsZXQgaT0wO2k8cGxjW3BdLmNvb3JkaW5hdGVzLmxlbmd0aDtpKyspe1xuICAgIGlmKHBsY1twXS5jb29yZGluYXRlc1tpXT09PWNyZFt6XSl7b3ZybGFwKyt9XG4gICAgXG59XG59XG59XG5pZihvdnJsYXA+MCl7b3ZybGFwPVwiWVwifVxuICAgIGVsc2V7b3ZybGFwPVwiTlwifVxucmV0dXJuIG92cmxhcFxufVxuXG4vKlxuXG4vL3NlY29uZCBhdHRlbXB0IGR1bWJpbmcgaXQgZG93blxuZnVuY3Rpb24gb3ZlckxhcChhLGIpe1xuICAgIC8vUGxjPSBwbGF5ZXIgY29vcmRpbmF0ZXMgICAgXG4gICAgbGV0IHBsYz1hO1xuICAgIC8vY3JkIGlzIHRoZSBuZXcgY29vcmRpbmF0ZXNcbiAgICBsZXQgY3JkID1iO1xuICAgIC8vdmFyaWFibGUgdG8gcmV0dXJuXG4gICAgbGV0IG92cmxhcCA9MDtcbiAgICBcbiAgICBmb3IobGV0IHA9MDtwPHBsYy5sZW5ndGg7cCsrKXtcbiAgICBmb3IobGV0IHo9MDt6PGNyZC5sZW5ndGg7eisrKXtcbiAgICAgICAgaWYocGxjW3BdPT09Y3JkW3pdKXtvdnJsYXArK31cbiAgICAgICAgXG4gICAgfVxuICAgIH1cbiAgICBcbiAgICBpZihvdnJsYXA+MCl7b3ZybGFwPVwiWVwifVxuICAgIGVsc2V7b3ZybGFwPVwiTlwifVxuICAgIHJldHVybiBvdnJsYXBcbiAgICB9XG4gICAgKi9cblxuZXhwb3J0IHtvdmVyTGFwfSIsImltcG9ydHtwaXAsZGlyZWN0aW9uLHBsYXllcjFjb29yZCxwbGF5ZXIyY29vcmQscGxheWVyQmFzZX0gZnJvbSAnLi9pbmRleCdcbmltcG9ydHtjaG9vc2VDcmRudHN9IGZyb20gJy4vY2hvb3NlQ29vcmRpbmF0ZXMnXG5pbXBvcnR7b3ZlckxhcH0gZnJvbSAnLi9vdmVyTGFwJ1xuXG5cblxuZnVuY3Rpb24gc2hpcGZhY3RvcnkobmFtZSxjb29yZGluYXRlcyl7XG4gICAgdGhpcy5uYW1lID0gbmFtZVxuICAgIHRoaXMuY29vcmRpbmF0ZXMgPSBjb29yZGluYXRlc1xuICAgIHRoaXMuaGl0U2hpcCA9ICgpPT57YWxlcnQoXCJZb3Ugc3RydWNrIHRoZSBcIiArIG5hbWUgKyBcIiBzaGlwXCIpfVxuICAgIHRoaXMuaXNTdW5rID0gKCkgPT57aWYoY29vcmRpbmF0ZXMubGVuZ3RoPT09MCl7YWxlcnQoXCJZb3Ugc3VuayB0aGUgXCIrIG5hbWUgK1wiIHNoaXBcIik7fX1cbiAgICBcbiAgfVxuXG4gIGxldCBjb29yZGlkO1xuXG5cbiAgY29uc3QgY2FycmllciA9ICh0KSA9PnsgICAgXG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkNhcnJpZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKG51bWJlcj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2V7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDsgY29vcmRpZCA9IFwicDFjXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkOyBjb29yZGlkID0gXCJwMmNcIn1cbiBcbiAgICBQQy5wdXNoKGd1bm4pO1xuICBcbiAgICAgIFxuICAgIH1cbiAgICByZXR1cm4gUEM7XG4gICAgfVxuXG4gIGNvbnN0IGJhdHRsZXNoaXAgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkJhdHRsZXNoaXBcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKG51bWJlcj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2V7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDsgY29vcmRpZCA9IFwicDFjXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkOyBjb29yZGlkID0gXCJwMmNcIn1cbiAgICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKSk9PT1cIllcIil7YWxlcnQoXCJUaGVzZSB0aWxlcyBoYXZlIGFscmVhZHkgYmVlbiBhc3NpZ25lZCwgcGxlYXNlIGNob29zZSBkaWZmZXJlbnQgdGlsZXNcIil9XG4gIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgXG5cbiAgICBcbiAgfX1cbiAgICByZXR1cm4gUEM7XG4gIH1cbiAgY29uc3QgY3J1aXNlciA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQ3J1aXNlclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDQsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgIFxuXG4gICAgXG4gICAgfX1cbiAgICByZXR1cm4gUEM7XG4gIH1cbiAgY29uc3Qgc3VibWFyaW5lID0gKHQpID0+e1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJTdWJtYXJpbmVcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw1LGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKG51bWJlcj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2V7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDsgY29vcmRpZCA9IFwicDFjXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkOyBjb29yZGlkID0gXCJwMmNcIn1cbiAgICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDUsZGlyZWN0aW9uKSk9PT1cIllcIil7YWxlcnQoXCJUaGVzZSB0aWxlcyBoYXZlIGFscmVhZHkgYmVlbiBhc3NpZ25lZCwgcGxlYXNlIGNob29zZSBkaWZmZXJlbnQgdGlsZXNcIil9XG4gICAgZWxzZXsgXG4gICAgUEMucHVzaChndW5uKTtcbiAgICBcbiAgICBcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBkZXN0cm95ZXIgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkRlc3Ryb3llclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDYsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuXG4gICAgXG4gICAgfX1cbiAgICByZXR1cm4gUEM7XG4gIH1cblxuICBleHBvcnQge3NoaXBmYWN0b3J5LGNhcnJpZXIsYmF0dGxlc2hpcCxjcnVpc2VyLHN1Ym1hcmluZSxkZXN0cm95ZXJ9IiwiaW1wb3J0IHtzcSxkaXJlY3Rpb24scGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwaXAscGxheWVyMXN0cmlrZXMscGxheWVyMnN0cmlrZXMscGxheWVyQmFzZSxQaGl0fSBmcm9tICcuL2luZGV4J1xuY29uc3QgZG9tTW9kdWxlID0gKCgpID0+e1xuLy9mdW5jdGlvbiBmb3IgaGlnaGxpZ2h0aW5nIHNxdWFyZXMgd2hlbiBob3ZlcmluZ1xuZnVuY3Rpb24gaG92ZXIodCl7XG5sZXQgbnVtYiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xubGV0IGxldHRlcnIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbmxldCBjb2xvciA9IFwiYmx1ZVwiO1xuXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1zcTtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihudW1iPm92ZXIpe251bWIgPSBvdmVyfVxuICAgIGlmKG51bWI9PT1cIjBcIil7Y29sb3IgPSBcIndoaXRlXCJ9XG4gICAgZWxzZXtjb2xvcj1cImdyZXlcIn1cbmZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcn19XG5lbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtcbiAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICBsZXQgb3ZlciA9IDc1LXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKEx0ck51bWJlcj5vdmVyKXtMdHJOdW1iZXIgPSBvdmVyfVxuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIG51bWIpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZXlcIn1cbn1cbn1cblxuLy9mdW5jdGlvbiBmb3IgcmV0dXJuaW5nIHNxdWFyZSBjb2xvciB0byB3aGl0ZSBhZnRlciBsZWF2aW5nXG5mdW5jdGlvbiBsZWF2ZSh0KXt0LnRhcmdldC5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwiXG5sZXQgbnVtYiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xubGV0IGxldHRlcnIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbmxldCBoaXQgPSBsZXR0ZXJyK251bWI7XG5jb25zb2xlLmxvZyhoaXQpO1xuXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1zcTtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihudW1iPm92ZXIpe251bWIgPSBvdmVyfVxuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXR0ZXJyKygrbnVtYitpKSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwifX1cbiAgICBlbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtcbiAgICAgICAgbGV0IEx0ck51bWJlciA9bGV0dGVyci5jaGFyQ29kZUF0KDApXG4gICAgICAgIGxldCBvdmVyID0gNzUtc3E7XG4gICAgICAgIFxuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKEx0ck51bWJlcj5vdmVyKXtMdHJOdW1iZXIgPSBvdmVyfVxuICAgICAgICBmb3IobGV0IGk9MDtpPHNxO2krKyl7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgbnVtYikuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIn1cbiAgICB9XG5cbiAgICBcbiAgICB9XG5cbiAgICBcbiAgIFxuICAgICAgLy9mdW5jdGlvbiB0aGF0IGFsbG93cyB1cyB0byB1cGRhdGUgdGlsZXMgd2l0aG91dCBjYXJyeWluZyBwcmV2aW91cyB0aWxlcyBvdmVyXG4gICAgICBmdW5jdGlvbiB3aGl0ZU91dCgpe1xuICAgICAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjt9XG4gICAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gYXR0YWNrQm9hcmQoKXtcbiAgICAgICAgbGV0IHN0cmlrZSA9IHBsYXllcjFzdHJpa2VzO1xuICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe3N0cmlrZT1wbGF5ZXIxc3RyaWtlc31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7c3RyaWtlPXBsYXllcjJzdHJpa2VzfSAgICBcbiAgICBmb3IobGV0IGk9MDtpPHN0cmlrZS5sZW5ndGg7aSsrKXtcbiAgICAgICAgY29uc29sZS5sb2coc3RyaWtlW2ldKVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdHJpa2VbaV0pLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgfVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGxheWVyQm9hcmQoKXtcbiAgICAgICAgbGV0IHNob3cgPSBwbGF5ZXIxY29vcmQ7XG4gICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7c2hvdz1wbGF5ZXIxY29vcmQ7Y29uc29sZS5sb2coc2hvdyl9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe3Nob3c9cGxheWVyMmNvb3JkOyBjb25zb2xlLmxvZyhzaG93KX0gXG4gICAgZm9yKGxldCBpPTA7aTxzaG93Lmxlbmd0aDtpKyspe1xuICAgICAgICBmb3IobGV0IGlpPTA7aWk8c2hvd1tpXS5jb29yZGluYXRlcy5sZW5ndGg7aWkrKyl7XG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNob3dbaV0uY29vcmRpbmF0ZXNbaWldKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJncmV5XCI7XG4gICAgICAgICAgICBcblxuICAgICAgICB9XG4gICAgfVxuICAgICAgIFxuICAgIH1cblxuICAgIC8vZnVuY3Rpb25zIGZvciB3aGVuIHRoZSBoaXQgZnVuY3Rpb24gaXMgaW4gcGxheVxuICAgIGZ1bmN0aW9uIGhpdEhvdmVyKHQpe1xuICAgICAgICBpZih0LnRhcmdldC5kYXRhc2V0Lm51bWJlcj09PVwiMFwiKVxue3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJ9ZWxzZXt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJyZWRcIn1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhpdExlYXZlKHQpe1xuICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BoaXQ9dC50YXJnZXQuZGF0YXNldC5QMWhpdH1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0fSAgXG4gICAgY29uc29sZS5sb2coUGhpdClcbiAgICAgICAgaWYoUGhpdD09PVwiWVwiKXt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJyZWRcIn1cbiAgICAgICAgZWxzZSBpZihQaGl0PT09XCJOXCIpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIn1cbiAgICB9XG5cbnJldHVybiB7aG92ZXIsbGVhdmUsYXR0YWNrQm9hcmQsd2hpdGVPdXQsaGl0SG92ZXIsaGl0TGVhdmUscGxheWVyQm9hcmR9XG59KSgpO1xuXG5cbmV4cG9ydHtkb21Nb2R1bGV9IiwiaW1wb3J0IHtjaXAsc2VsZWN0aW9uTW9kdWxlLGhpdH0gZnJvbSAnLi9pbmRleCdcblxuY29uc3QgbW9kYWxNb2R1bGUgPSAoKCkgPT57XG4vLyBHZXQgdGhlIG1vZGFsXG52YXIgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15TW9kYWxcIik7XG5cbi8vIEdldCB0aGUgYnV0dG9uIHRoYXQgb3BlbnMgdGhlIG1vZGFsXG52YXIgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUJ0blwiKTtcblxuLy9nZXQgdGhlIGNvbnRlbnQgb2YgdGhlIHBhcmFncmFwaFxubGV0IHBhcmExID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXJhMVwiKTtcbmxldCBwYXJhMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFyYTJcIilcblxuLy8gR2V0IHRoZSA8c3Bhbj4gZWxlbWVudCB0aGF0IGNsb3NlcyB0aGUgbW9kYWxcbnZhciBzcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlXCIpWzBdO1xuXG4vL3BsYXllciBzZWxlY3QgYnV0dG9uc1xubGV0IHBzYnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiUFNidXR0b25zXCIpO1xucHNidG5zLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuXG4vL2NvbXB1dGVyIGhpdCBidXR0b25cbmxldCBjb21wSGl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wSGl0XCIpO1xuY29tcEhpdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cblxuLy8gV2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGJ1dHRvbiwgY2xvc2VzIHRoZSBtb2RhbFxuYnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiTm9uZVwiO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKCl7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG59XG5cblxuXG4vL3BsYXllciBzZWxlY3QgYnV0dG9uc1xubGV0IGZybmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZybmRcIik7XG5sZXQgY29tcCA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbXBcIik7XG5cblxuZnVuY3Rpb24gc2hvd01vZHVsZSgpe1xuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgcGFyYTEudGV4dENvbnRlbnQgPSBcIkNIQU5HRSBQTEFDRVMhXCJcbiAgICBwYXJhMi50ZXh0Q29udGVudCA9IFwiQ2xpY2sgYnV0dG9uIHdoZW4gcmVhZHkuXCJcbiAgICBwc2J0bnMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG5cbiBcbn1cblxuZnVuY3Rpb24gcGxheWVyU2VsZWN0KCl7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgcGFyYTEudGV4dENvbnRlbnQgPSBcIkFyZSB5b3UgcGxheWluZyB3aXRoIGEgZnJpZW5kIG9yIGFnYWluc3Qgb3VyIEFJP1wiXG4gICAgYnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgIHBzYnRucy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgZnJuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcbiAgICAgIGNpcCA9IFwiTlwiXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBcblxuICAgIH0pXG5cbiAgIGNvbXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XG4gICAgICBjaXAgPSBcIllcIlxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgXG5cbiAgICB9KVxufVxuXG5cbmZ1bmN0aW9uIGNvbXBIaXRNb2RhbCgpe1xuXG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIHBhcmExLnRleHRDb250ZW50ID0gXCJQbGVhc2UgY2xpY2sgdGhlIGJ1dHRvbiBiZWxvdyB0byBhY3RpdmF0ZSB0aGUgQUkgY2hvaWNlIVwiXG4gIGJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIGNvbXBIaXQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgcHNidG5zLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBjb21wSGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxoaXQpO1xuICAgIGNvbXBIaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNsb3NlTW9kYWwpXG59XG5cbnJldHVybiB7c2hvd01vZHVsZSxwbGF5ZXJTZWxlY3QsY29tcEhpdE1vZGFsLGNsb3NlTW9kYWx9XG59KSgpO1xuXG5leHBvcnQge21vZGFsTW9kdWxlfVxuIiwiaW1wb3J0IHsgY2hvb3NlQ3JkbnRzIH0gZnJvbSBcIi4vY2hvb3NlQ29vcmRpbmF0ZXNcIjtcbmltcG9ydCB7IHBsYXllcjJjb29yZCxzdGFydEdhbWUgfSBmcm9tIFwiLi9pbmRleFwiXG5pbXBvcnQgeyBvdmVyTGFwIH0gZnJvbSBcIi4vb3ZlckxhcFwiO1xuaW1wb3J0IHsgc2hpcGZhY3RvcnkgfSBmcm9tIFwiLi9zaGlwc1wiO1xuXG5cbi8qIFxuVGhlIGNvbXB1dGVyIEFJIG5lZWRzIHRvIGJlIGFibGUgdG8gcmFuZG9tbHkgc2VsZWN0IGl0cycgc2hpcCBwb3NpdGlvbnMuXG5SYW5kb21seSBzZWxlY3QgaXRzJyBoaXQgcG9pbnRzLlxuXG5yYW5kb20gbnVtYmVyIGJldHdlZW4gb25lIGFuZCB0ZW5cbk1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxKTtcblxuQSBtb3JlIGFkdmFuY2VkIEFJIHdvdWxkIHRoZW4gYmUgYWJsZSB0byBoaXQgYWRqYWNlbnQgZ3JpZHMgd2hlbiBpdCBkZXRlY3RzIGEgaGl0LlxuKi9cblxuXG4vL1dlIG5lZWQgdGhlIGNvbXB1dGVyIHRvIGdlbmVyYXRlIGl0cyBjb29yZGluYXRlcyByYW5kb21seSB0aGVuIHN0YXJ0IHRoZSBnYW1lIFxuXG5jb25zdCBjb21wdXRlckFJID0gKCgpID0+e1xuXG5cblxuZnVuY3Rpb24gcmFuZG9tSW50RnJvbUludGVydmFsKG1pbiwgbWF4KSB7IC8vIG1pbiBhbmQgbWF4IGluY2x1ZGVkIFxuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKVxufVxuXG4vL3dvcmsgY2xvc2VseSB3aXRoIHNoaXBzLmpzIHRvIGNyYWZ0IHRoaXNcbmZ1bmN0aW9uIHNlbGVjdENhcnJpZXIoKXtcbiAgICAvL2xldHRlciBuZWVkcyB0byBiZSBtb2RpZmllZCB0byBjaHVybiBvdXQgbGV0dGVyIGJldHdlZW4gYSBhbmQgalxuICAgIGxldCByYW5kb21ObyA9IHJhbmRvbUludEZyb21JbnRlcnZhbCg2NSw3NCk7XG4gICAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUocmFuZG9tTm8pO1xuICAgIGxldCBudW1iZXIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApICsgMSk7XG4gICAgbGV0IGRpciA9IHJhbmRvbUludEZyb21JbnRlcnZhbCgxLDIpO1xuICAgIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICAgIGlmKGRpcj09PTEpe2RpcmVjdGlvbj1cIlZcIn1lbHNle2RpcmVjdGlvbj1cIkhcIn1cbiAgICBsZXQgUEMgPSBwbGF5ZXIyY29vcmQ7XG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDYXJyaWVyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKT09PVwiWVwiKXtjb21wdXRlckFJLnNlbGVjdENhcnJpZXIoKX1cbiAgZWxzZXsgXG4gICAgUEMucHVzaChndW5uKTtcbiAgICAvL3Rlc3RpbmcgZmlyc3RcbiAgICBjb21wdXRlckFJLnNlbGVjdEJhdHRsZXNoaXAoKTtcbiAgICBcbn1cbn1cblxuXG5mdW5jdGlvbiBzZWxlY3RCYXR0bGVzaGlwKCl7XG4gIC8vbGV0dGVyIG5lZWRzIHRvIGJlIG1vZGlmaWVkIHRvIGNodXJuIG91dCBsZXR0ZXIgYmV0d2VlbiBhIGFuZCBqXG4gIGxldCByYW5kb21ObyA9IHJhbmRvbUludEZyb21JbnRlcnZhbCg2NSw3NCk7XG4gIGxldCBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHJhbmRvbU5vKTtcbiAgbGV0IG51bWJlciA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxKTtcbiAgbGV0IGRpciA9IHJhbmRvbUludEZyb21JbnRlcnZhbCgxLDIpO1xuICBsZXQgZGlyZWN0aW9uID0gXCJWXCJcbiAgaWYoZGlyPT09MSl7ZGlyZWN0aW9uPVwiVlwifWVsc2V7ZGlyZWN0aW9uPVwiSFwifVxuICBsZXQgUEMgPSBwbGF5ZXIyY29vcmQ7XG4gIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQmF0dGxlc2hpcFwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKSlcbiAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbikpPT09XCJZXCIpe2NvbXB1dGVyQUkuc2VsZWN0QmF0dGxlc2hpcCgpfVxuZWxzZXsgXG4gIFBDLnB1c2goZ3Vubik7XG4gIC8vdGVzdGluZyBmaXJzdFxuICBjb21wdXRlckFJLnNlbGVjdENydWlzZXIoKTtcbiAgXG4gIFxufVxufVxuXG5cbmZ1bmN0aW9uIHNlbGVjdENydWlzZXIoKXtcbiAgLy9sZXR0ZXIgbmVlZHMgdG8gYmUgbW9kaWZpZWQgdG8gY2h1cm4gb3V0IGxldHRlciBiZXR3ZWVuIGEgYW5kIGpcbiAgbGV0IHJhbmRvbU5vID0gcmFuZG9tSW50RnJvbUludGVydmFsKDY1LDc0KTtcbiAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUocmFuZG9tTm8pO1xuICBsZXQgbnVtYmVyID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwKSArIDEpO1xuICBsZXQgZGlyID0gcmFuZG9tSW50RnJvbUludGVydmFsKDEsMik7XG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICBpZihkaXI9PT0xKXtkaXJlY3Rpb249XCJWXCJ9ZWxzZXtkaXJlY3Rpb249XCJIXCJ9XG4gIGxldCBQQyA9IHBsYXllcjJjb29yZDtcbiAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDcnVpc2VyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pKVxuICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDQsZGlyZWN0aW9uKSk9PT1cIllcIil7Y29tcHV0ZXJBSS5zZWxlY3RDcnVpc2VyKCl9XG5lbHNleyBcbiAgUEMucHVzaChndW5uKTtcbiAgLy90ZXN0aW5nIGZpcnN0XG4gIGNvbXB1dGVyQUkuc2VsZWN0U3VibWFyaW5lKCk7XG4gIFxufVxufVxuXG5cbmZ1bmN0aW9uIHNlbGVjdFN1Ym1hcmluZSgpe1xuICAvL2xldHRlciBuZWVkcyB0byBiZSBtb2RpZmllZCB0byBjaHVybiBvdXQgbGV0dGVyIGJldHdlZW4gYSBhbmQgalxuICBsZXQgcmFuZG9tTm8gPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoNjUsNzQpO1xuICBsZXQgbGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShyYW5kb21Obyk7XG4gIGxldCBudW1iZXIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApICsgMSk7XG4gIGxldCBkaXIgPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoMSwyKTtcbiAgbGV0IGRpcmVjdGlvbiA9IFwiVlwiXG4gIGlmKGRpcj09PTEpe2RpcmVjdGlvbj1cIlZcIn1lbHNle2RpcmVjdGlvbj1cIkhcIn1cbiAgbGV0IFBDID0gcGxheWVyMmNvb3JkO1xuICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIlN1Ym1hcmluZVwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDUsZGlyZWN0aW9uKSlcbiAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw1LGRpcmVjdGlvbikpPT09XCJZXCIpe2NvbXB1dGVyQUkuc2VsZWN0U3VibWFyaW5lKCl9XG5lbHNleyBcbiAgUEMucHVzaChndW5uKTtcbiAgLy90ZXN0aW5nIGZpcnN0XG4gIGNvbXB1dGVyQUkuc2VsZWN0RGVzdHJveWVyKCk7XG4gIFxuICBcbn1cbn1cblxuXG5mdW5jdGlvbiBzZWxlY3REZXN0cm95ZXIoKXtcbiAgLy9sZXR0ZXIgbmVlZHMgdG8gYmUgbW9kaWZpZWQgdG8gY2h1cm4gb3V0IGxldHRlciBiZXR3ZWVuIGEgYW5kIGpcbiAgbGV0IHJhbmRvbU5vID0gcmFuZG9tSW50RnJvbUludGVydmFsKDY1LDc0KTtcbiAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUocmFuZG9tTm8pO1xuICBsZXQgbnVtYmVyID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwKSArIDEpO1xuICBsZXQgZGlyID0gcmFuZG9tSW50RnJvbUludGVydmFsKDEsMik7XG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICBpZihkaXI9PT0xKXtkaXJlY3Rpb249XCJWXCJ9ZWxzZXtkaXJlY3Rpb249XCJIXCJ9XG4gIGxldCBQQyA9IHBsYXllcjJjb29yZDtcbiAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJEZXN0cm95ZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw2LGRpcmVjdGlvbikpXG4gIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pKT09PVwiWVwiKXtjb21wdXRlckFJLnNlbGVjdERlc3Ryb3llcigpfVxuZWxzZXsgXG4gIFBDLnB1c2goZ3Vubik7XG4gIC8vdGVzdGluZyBmaXJzdFxuICBzdGFydEdhbWUoKTsgIFxuICBcbn1cbn1cbnJldHVybiB7c2VsZWN0Q2FycmllcixzZWxlY3RCYXR0bGVzaGlwLHNlbGVjdENydWlzZXIsc2VsZWN0U3VibWFyaW5lLHNlbGVjdERlc3Ryb3llcixyYW5kb21JbnRGcm9tSW50ZXJ2YWx9XG59KSgpO1xuXG5cbmV4cG9ydCB7Y29tcHV0ZXJBSX0iLCJpbXBvcnQge0dhbWVib2FyZE1vZHVsZX0gZnJvbSAnLi9nYW1lYm9hcmQnXG5pbXBvcnQge2NhcnJpZXIsYmF0dGxlc2hpcCxjcnVpc2VyLHN1Ym1hcmluZSxkZXN0cm95ZXJ9IGZyb20gJy4vc2hpcHMnXG5pbXBvcnQge2RvbU1vZHVsZX0gZnJvbSAnLi9kb20nXG5pbXBvcnQge21vZGFsTW9kdWxlfSBmcm9tICcuL21vZGFsJ1xuaW1wb3J0IHtjb21wdXRlckFJfSBmcm9tICcuL2NvbXB1dGVyQUknXG5cblxuLy9jb21wdXRlciBpbiBwbGF5XG5sZXQgY2lwID0gXCJOXCJcbiAgLy9jb29yZGluYXRlcyBvZiBlYWNoIHBsYXllcnMgc2hpcFxuICBsZXQgcGxheWVyMWNvb3JkPVtdO1xuICBsZXQgcGxheWVyMmNvb3JkPVtdO1xuICAvL2Ftb3VudCBvZiBzdW5rIHNoaXBzIGRldGVybWluaW5nIHdoZXRoZXIgdGhlIGdhbWUgaXMgb3ZlciBvciBub3RcbiAgbGV0IHBsYXllcjFTdW5rU2hpcHM9MDtcbiAgbGV0IHBsYXllcjJTdW5rU2hpcHM9MDtcbiAgLy9jb29yZGluYXRlcyBvZiBlYWNoIHRpbGUgaGl0IGJ5IGVhY2ggcGxheWVyXG4gIGxldCBwbGF5ZXIxc3RyaWtlcz1bXVxuICBsZXQgcGxheWVyMnN0cmlrZXM9W11cbiAgLy9WPVZlcnRpY2FsLCBIPUhvcml6b250YWxcbiAgbGV0IGRpcmVjdGlvbiA9IFwiVlwiXG4gIC8vcGxheWVyIGluIHBsYXlcbiAgbGV0IHBsYXllckJhc2UgPSBbXCJwbGF5ZXIxXCIsXCJwbGF5ZXIyXCJdO1xuICBsZXQgcGlwID0gcGxheWVyQmFzZVswXTtcbiAgbGV0IFBjcmQgPSBwbGF5ZXIxY29vcmQ7XG4gIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UGNyZCA9IHBsYXllcjFjb29yZDt9XG4gIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQY3JkID0gcGxheWVyMmNvb3JkO31cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7XG4gIC8vdGhlIHNxdWFyZXMgdGhhdCBuZWVkIGhpZ2hsaWdodGluZyBmb3IgdGhlIGRvbVxuICBsZXQgc3E7XG4gIGxldCBQaGl0O1xuXG5cbiAgXG4gIFxuXG4vL2J1dHRvbiB0byBjaGFuZ2UgdGhlIHBvc2l0aW9uaW5nIG9mIHRoZSBwbGFjZW1lbnRcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQ2huZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57aWYoZGlyZWN0aW9uPT09XCJWXCIpe2RpcmVjdGlvbj1cIkhcIjtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uXCIpLnRleHRDb250ZW50PVwiSG9yaXpvbnRhbFwiO31lbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtkaXJlY3Rpb249XCJWXCI7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblwiKS50ZXh0Q29udGVudD1cIlZlcnRpY2FsXCJ9fSlcbi8vYXR0YWNrYm9hcmQgYnV0dG9uIHRoYXQgc2hvd3MgcG9zaXRpb25zIHdoZXJlIHRoZSBwbGF5ZXIgaGFzIGF0dGFja2VkXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNod3NoaXBvc1wiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCgpPT57ZG9tTW9kdWxlLndoaXRlT3V0KCk7XG4gICAgZG9tTW9kdWxlLnBsYXllckJvYXJkKCk7XG4gICAgfSlcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2h3c2hpcG9zXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCgpPT57ZG9tTW9kdWxlLndoaXRlT3V0KCk7XG4gICAgZG9tTW9kdWxlLmF0dGFja0JvYXJkKCk7fSlcblxuICAgY29uc29sZS5sb2coXCJIRVlFRVwiKVxuLy9mdW5jdGlvbiBjaGFuZ2VzIHBsYXllclxuY29uc3QgY2hhblBsYXllciA9ICgpPT57XG4gICAgbGV0IHQ7XG5pZihjaXA9PT1cIllcIil7ICAgICAgXG4gICAgICAgIHQgPSBtb2RhbE1vZHVsZS5jb21wSGl0TW9kYWwoKTt9XG4gICAgICAgIFxuZWxzZXt0ID0gbW9kYWxNb2R1bGUuc2hvd01vZHVsZSgpO31cbnQ7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtwaXAgPSBwbGF5ZXJCYXNlWzFdO1xuICAgICAgICBQY3JkID0gcGxheWVyMmNvb3JkO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe3BpcCA9IHBsYXllckJhc2VbMF07XG4gICAgICAgIFBjcmQgPSBwbGF5ZXIxY29vcmQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICAgICAgZWxzZXtwaXAgPSBwbGF5ZXJCYXNlWzBdO1xuICAgICAgICBQY3JkPXBsYXllcjJjb29yZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgICAgICBkb21Nb2R1bGUud2hpdGVPdXQoKTtcbiAgICAgICAgZG9tTW9kdWxlLmF0dGFja0JvYXJkKCk7XG4gICAgICAgIH1cbiAgICBcbmxldCBybmR0aWxlO1xuICAgICAgICBmdW5jdGlvbiByYW5kb21UaWxlKCl7XG5cbiAgICAgICAgICAgIGxldCBNO1xuICAgIGxldCBPO1xuICAgIFxuICAgIFxuICAgICAgICAgICAgIC8vY2hhbmdlIHNlY29uZCBudW1iZXIgYmFjayB0byB0aGUgNzRcbiAgTSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29tcHV0ZXJBSS5yYW5kb21JbnRGcm9tSW50ZXJ2YWwoNjUsNzQpKTtcbiAgLy9jaGFuZ2UgYmFjayB0byAxMCBpbiBicmFja2V0c1xuICBPID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEpICsgMSk7XG5cbiAgcm5kdGlsZT1NK087XG5cbiAgZm9yKGxldCBpID0gMDtpPHBsYXllcjJzdHJpa2VzLmxlbmd0aDtpKyspe1xuICAgICAgaWYocGxheWVyMnN0cmlrZXNbaV09PT1NK08pe2FsZXJ0KFwiQmVlbiBoaXQsIGNvbXB1dGVyLCBzZWVrIG5ldyB0aWxlISBcIilcbnJhbmRvbVRpbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtybmR0aWxlPU0rT31cblxuICB9XG5cbiAgXG4gIHJldHVybiBybmR0aWxlO1xuICAgICAgICB9XG4gICAgICAgIFxuLy9jb25zb2xlLmxvZyhcIk5ubm5uXCIpXG5cblxuXG4vL2JlbG93IGZ1bmN0aW9ucyBuZWVkIHRvIGJlIGdyb3VwZWQgaW50byBhIG1vZHVsZVxuLy9jb25zb2xlLmxvZyhcIklOUlNUXCIpXG5cbmZ1bmN0aW9uIGhpdCh0KXtjb25zb2xlLmxvZyh0LnRhcmdldC5kYXRhc2V0LmxldHRlcik7XG5cbiAgICBjb25zb2xlLmxvZyhwaXApXG4gICAgXG4gICAgbGV0IFBDID0gcGxheWVyMWNvb3JkO1xuICAgIGxldCBzdHJpa2UgPSBwbGF5ZXIxc3RyaWtlcztcbiAgICBsZXQgTDtcbiAgICBsZXQgTjtcbiAgICBsZXQgaGl0Q29vcmQ7XG5cbiAgICBpZihjaXA9PT1cIllcIiYmcGlwPT09cGxheWVyQmFzZVsxXSl7YWxlcnQoXCJDb21wdXRlciBpcyB0YWtpbmcgaXRzIGhpdFwiKVxuICAgIFxuICAgXG4gIGNvbnNvbGUubG9nKHJhbmRvbVRpbGUoKSlcbiAgICAgaGl0Q29vcmQ9cmFuZG9tVGlsZSgpO1xuICBcbiAgICBhbGVydChcIkNvbXB1dGVyIGhhcyBzdHJ1Y2sgVGlsZTogXCIraGl0Q29vcmQpXG4gICAgfVxuICAgIGVsc2V7XG4gICAgXG4gICAgTCA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIE4gPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICBoaXRDb29yZCA9IEwrTjt9XG4gICAgY29uc29sZS5sb2coaGl0Q29vcmQpO1xuICAgIGNvbnNvbGUubG9nKFBDLmxlbmd0aCk7IFxuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIyY29vcmQ7c3RyaWtlPXBsYXllcjFzdHJpa2VzO1BoaXQ9dC50YXJnZXQuZGF0YXNldC5QMWhpdH1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSAmJiBjaXAhPVwiWVwiKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdICYmIGNpcD09PVwiWVwiKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7fVxuICAgIGlmKE49PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNlIGlmKFBoaXQ9PT1cIllcIil7Y29uc29sZS5sb2coXCJBbHJlYWR5IGJlZW4gaGl0LCB0cnkgYWdhaW4uXCIpfVxuICAgIGVsc2V7ICAgICAgIFxuICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkO3N0cmlrZT1wbGF5ZXIxc3RyaWtlcztQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDFoaXQ9XCJZXCJ9XG4gICAgICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0PVwiWVwifVxuICAgIGZvcihsZXQgcD0wO3A8UEMubGVuZ3RoO3ArKyl7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8UENbcF0uY29vcmRpbmF0ZXMubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmKFBDW3BdLmNvb3JkaW5hdGVzW2ldPT09aGl0Q29vcmQpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coUENbcF0uY29vcmRpbmF0ZXMpXG4gICAgICAgICAgICBQQ1twXS5jb29yZGluYXRlcy5zcGxpY2UoaSwxKVxuICAgICAgICBQQ1twXS5oaXRTaGlwKCk7XG4gICAgICAgIFBDW3BdLmlzU3VuaygpOyAgICBcbiAgICAgICAgXG4gICAgICAgIGdhbWVPdmVyKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFBDW3BdLmNvb3JkaW5hdGVzKVxuICAgICAgICBjb25zb2xlLmxvZyhcIlBsYXllciBvbmUgc3VuayBzaGlwczogXCIrIHBsYXllcjFTdW5rU2hpcHMpICBcbiAgICAgICAgY29uc29sZS5sb2coXCJQbGF5ZXIgdHdvIHN1bmsgc2hpcHM6IFwiKyBwbGF5ZXIyU3Vua1NoaXBzKSAgXG4gICAgICAgIFxuICAgICAgICB9fVxuICAgIH1zdHJpa2UucHVzaChoaXRDb29yZCkgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUDEgc3RyaWtlczogXCIrIHBsYXllcjFzdHJpa2VzKVxuICAgICAgICBjb25zb2xlLmxvZyhcIlAyIHN0cmlrZXM6IFwiKyBwbGF5ZXIyc3RyaWtlcylcbiAgICAgICAgXG4gICAgY2hhblBsYXllcigpXG4gICAgfX1cblxuXG4gZnVuY3Rpb24gZ2FtZU92ZXIoKXtcbiAgICBsZXQgY291bnQgPTA7XG4gICAgbGV0IFBDID0gcGxheWVyMWNvb3JkO1xuICAgIGxldCBwbHI7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjJjb29yZDsgcGxyPVwiUGxheWVyIE9uZVwifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjFjb29yZDsgcGxyPVwiUGxheWVyIFR3b1wifVxuICAgIGZvcihsZXQgaSA9MDtpPFBDLmxlbmd0aDtpKyspe1xuICAgICAgIGlmKFBDW2ldLmNvb3JkaW5hdGVzLmxlbmd0aD09PTApeysrY291bnR9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGNvdW50KTtcbiAgICAvL2NoYW5nZSBiZWxvdyBjb3VudCB0byAxIGZvciBhIHF1aWNrIGdhbWVcbiAgICBpZihjb3VudD09PTUpe2FsZXJ0KCBwbHIrIFwiIGhhcyB3b24hXCIpfVxuICAgIH1cbiAgICBcblxuZnVuY3Rpb24gc3RhcnRHYW1lKCl7XG4gICAgXG4gICAgaWYoUGNyZC5sZW5ndGg+NCl7XG4gICAgICAgIGlmKGNpcD09PVwiWVwiKXtcbiAgICAgICAgICAgIGFsZXJ0KFwiQ29tcHV0ZXIgaXMgY2hvb3NpbmcgYmF0dGxlIHBvc2l0aW9uc1wiKVxuICAgICAgICAgICAgc3E9MVxuICAgICAgICAgICAgbGV0IGNlbGxzPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIik7XG5mb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmdhbWVidXR0b25zXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uUGFyYVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICB9IHBsYXlHYW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICBzcT0xXG4gICAgY2hhblBsYXllcigpO1xuICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbmNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdGFydEdhbWUpXG5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluZ2FtZWJ1dHRvbnNcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25QYXJhXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQ2huZ2VcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xufVxucGxheUdhbWUoKX19fVxuICAgIFxuICAgIFxuZnVuY3Rpb24gcGxheUdhbWUoKXtcbiAgICBcbiAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbmZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG5cbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxoaXQpXG5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5jZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbmNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhpdEhvdmVyKVxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmhpdExlYXZlKVxuXG5cbn1cbn1cblxuXG5cbi8vU2VsZWN0aW9uIG1vZHVsZVxuY29uc3Qgc2VsZWN0aW9uTW9kdWxlID0gKCgpID0+e1xuICAgIFxuICAgIFxuXG4gICAgICAgIFxuICAgIC8vYWRkcyBhbiBldmVudCBsaXN0ZW5lciB0byBldmVyeSBncmlkIGNlbGwgYWxsb3dpbmcgdXMgdG8gY2hvb3NlIG91ciBjb29yZGluYXRlcyxtYXAgdGhlbSB0byB0aGUgYXJyYXkgdGhlbiBjaGFuZ2UgcGxheWVyXG4gICAgZnVuY3Rpb24gcDFjYXJyaWVyU2hpcCgpe1xuICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT0yO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWJhdHRsZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgZnVuY3Rpb24gcDFiYXR0bGVTaGlwKCl7ICAgXG4gICAgICAgIFxuICAgICAgICBpZihQY3JkLmxlbmd0aD4wKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT0zO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWJhdHRsZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGJhdHRsZXNoaXApIFxuICAgICAgICAgICAgLy9pZiBjb29yZGluYXRlcyBtYXRjaCBsZW5ndGggbmVlZGVkIG1vdmUgb250byBuZXh0IHBhcnRcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFjcnVpc2VyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICBmdW5jdGlvbiBwMWNydWlzZXJTaGlwKCl7XG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+MSl7XG4gICAgICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFBjcmQpXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT00O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGJhdHRsZXNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWNydWlzZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjcnVpc2VyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFzdWJtYXJpbmVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcDFzdWJtYXJpbmVTaGlwKCl7XG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+Mil7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9NTtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjcnVpc2VyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFzdWJtYXJpbmVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdWJtYXJpbmUpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWRlc3Ryb3llclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwMWRlc3Ryb3llclNoaXAoKXtcblxuICAgICAgICBpZihQY3JkLmxlbmd0aD4zKXtcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTY7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc3VibWFyaW5lKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFkZXN0cm95ZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkZXN0cm95ZXIpIFxuICAgICAgICAgICAgLy90aGlzIGRlY2lkZXMgd2hldGhlciB0aGUgZ2FtZSBzdGFydHMgYWZ0ZXIgcGxheWVyIHR3byBvciB0aGUgY29tcHV0ZXIgaGFzIHNlbGVjdGVkIHRoZWlyIGdyaWRzXG4gICAgICAgICAgICAvL2lmIG5vdCBpdCBsb29wcyBhcm91bmRcbiAgICAgICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7Y2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHN0YXJ0R2FtZSl9XG4gICAgICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe2NlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUubG9vcCkgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvb3AoKXtcbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+NCl7XG5cbiAgICAgICAgICAgIGlmKGNpcD09PVwiWVwiKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICBcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkZXN0cm95ZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5sb29wKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21wdXRlckFJLnNlbGVjdENhcnJpZXIoKTt9XG4gICAgICAgICAgICBlbHNle1xuXG4gICAgICAgIC8vVGhpcyBmdW5jdGlvbiB0dXJucyB0aGUgc2VsZWN0aW9uIHByb2Nlc3Mgb3ZlciB0byBlaXRoZXIgYSBjb21wdXRlciBvciBwbGF5ZXIgMlxuICAgIC8vanVzdCBkb2luZyBwbGF5ZXIgMiBpbXBsZW1ldGF0aW9uIGZvciBub3dcbiAgICBjaGFuUGxheWVyKCk7XG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgIFxuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLmxvb3ApIFxuICAgICAgICAgICAgY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuICAgIH1cbnNlbGVjdGlvbk1vZHVsZS5wMWNhcnJpZXJTaGlwKCk7XG59XG4gICAgfX1cblxuXG4gICAgXG4gICAgICAgIHJldHVybntwMWNhcnJpZXJTaGlwLHAxYmF0dGxlU2hpcCxwMWNydWlzZXJTaGlwLHAxc3VibWFyaW5lU2hpcCxwMWRlc3Ryb3llclNoaXAsbG9vcH1cbiAgICBcbiAgICB9KSgpO1xuXG5cblxuXG4gICBtb2RhbE1vZHVsZS5wbGF5ZXJTZWxlY3QoKTtcbiAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR2FtZWJvYXJkKCk7XG5zZWxlY3Rpb25Nb2R1bGUucDFjYXJyaWVyU2hpcCgpO1xuXG4vL3Rlc3RpbmcgaGl0IGZ1bmN0aW9uXG4vL3BsYXlHYW1lKCk7XG5cblxuXG5leHBvcnQge2hpdCxzdGFydEdhbWUsc2VsZWN0aW9uTW9kdWxlLGNpcCxQaGl0LHNxLGRpcmVjdGlvbixwaXAscGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwbGF5ZXJCYXNlLGNoYW5QbGF5ZXIscGxheWVyMVN1bmtTaGlwcyxwbGF5ZXIyU3Vua1NoaXBzLHBsYXllcjFzdHJpa2VzLHBsYXllcjJzdHJpa2VzfVxuXG5cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiR2FtZWJvYXJkTW9kdWxlIiwiY3JlYXRlR3JpZHMiLCJsdHIiLCJubyIsImlkIiwiZ3JpZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicGFkZGluZyIsImJvcmRlciIsInRleHRDb250ZW50IiwidGV4dEFsaWduIiwiZGF0YXNldCIsImhpdCIsIlAxaGl0IiwiUDJoaXQiLCJsZXR0ZXIiLCJudW1iZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiY3JlYXRlR2FtZWJvYXJkIiwiaSIsImNob29zZUNyZG50cyIsIlN0cnRMdHRycyIsIlN0cnRObyIsImxlbmd0aCIsIlZvckgiLCJjb29yZCIsIm92ZXIiLCJwdXNoIiwiTHRyTnVtYmVyIiwiY2hhckNvZGVBdCIsImNvbnNvbGUiLCJsb2ciLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJvdmVyTGFwIiwiYSIsImIiLCJwbGMiLCJjcmQiLCJvdnJsYXAiLCJ6IiwicCIsImNvb3JkaW5hdGVzIiwic2hpcGZhY3RvcnkiLCJuYW1lIiwidGhpcyIsImhpdFNoaXAiLCJhbGVydCIsImlzU3VuayIsImNvb3JkaWQiLCJjYXJyaWVyIiwidCIsInRhcmdldCIsImJhY2tncm91bmRDb2xvciIsIlBDIiwiZ3VubiIsImRpcmVjdGlvbiIsInBpcCIsInBsYXllckJhc2UiLCJwbGF5ZXIxY29vcmQiLCJwbGF5ZXIyY29vcmQiLCJiYXR0bGVzaGlwIiwiY3J1aXNlciIsInN1Ym1hcmluZSIsImRlc3Ryb3llciIsImRvbU1vZHVsZSIsIm51bWIiLCJsZXR0ZXJyIiwiY29sb3IiLCJzcSIsInN0cmlrZSIsInBsYXllcjFzdHJpa2VzIiwicGxheWVyMnN0cmlrZXMiLCJjZWxscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJQaGl0Iiwic2hvdyIsImlpIiwibW9kYWxNb2R1bGUiLCJtb2RhbCIsImJ0biIsInBhcmExIiwicGFyYTIiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicHNidG5zIiwiZGlzcGxheSIsImNvbXBIaXQiLCJjbG9zZU1vZGFsIiwib25jbGljayIsImZybmQiLCJjb21wIiwic2hvd01vZHVsZSIsInBsYXllclNlbGVjdCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiY2lwIiwiY29tcEhpdE1vZGFsIiwiY29tcHV0ZXJBSSIsInJhbmRvbUludEZyb21JbnRlcnZhbCIsIm1pbiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNlbGVjdENhcnJpZXIiLCJyYW5kb21ObyIsInNlbGVjdEJhdHRsZXNoaXAiLCJzZWxlY3RDcnVpc2VyIiwic2VsZWN0U3VibWFyaW5lIiwic2VsZWN0RGVzdHJveWVyIiwic3RhcnRHYW1lIiwiUGNyZCIsImNoYW5QbGF5ZXIiLCJybmR0aWxlIiwicmFuZG9tVGlsZSIsIk0iLCJPIiwiTCIsIk4iLCJoaXRDb29yZCIsInNwbGljZSIsImdhbWVPdmVyIiwicGxyIiwiY291bnQiLCJwbGF5R2FtZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZWxlY3Rpb25Nb2R1bGUiLCJwMWNhcnJpZXJTaGlwIiwicDFiYXR0bGVTaGlwIiwicDFjcnVpc2VyU2hpcCIsInAxc3VibWFyaW5lU2hpcCIsInAxZGVzdHJveWVyU2hpcCIsImxvb3AiXSwic291cmNlUm9vdCI6IiJ9