(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{o7:()=>f,P4:()=>v,VL:()=>m,yR:()=>p,w7:()=>y,sq:()=>h});const t={createGrids:(e,t,r)=>{let n=document.createElement("div");n.style.padding="10px",n.style.border=0===r||0===t?"none":"solid black 2px",n.textContent=r,n.style.textAlign="center",0===r&&"0"===e?n.textContent=t:0===t&&"0"!=e&&(n.textContent=e),n.dataset.hit="No",n.dataset.hit,n.dataset.letter=e,n.dataset.number=t,n.classList.add("cell"),n.setAttribute("id",n.dataset.letter+n.dataset.number),document.getElementById("gameboard1").appendChild(n)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function r(e,t,r,n){let l=[];if("V"===n){let n=11-r;t>n&&(t=n);for(let n=1;n<r+1;n++)l.push(e+t++)}else if("H"===n){let n=e.charCodeAt(0),o=75-r;n>o&&(n=o),console.log(n),console.log(o);for(let e=1;e<r+1;e++)l.push(String.fromCharCode(n++)+t)}return l}function n(e,t){let r=e,n=t,l=0;for(let e=0;e<n.length;e++)for(let t=0;t<r.length;t++)for(let o=0;o<r[t].coordinates.length;o++)r[t].coordinates[o]===n[e]&&l++;return l=l>0?"Y":"N",l}function l(e,t){this.name=e,this.coordinates=t,this.hitShip=()=>{alert("You struck the "+e+" ship")},this.isSunk=()=>{0===t.length&&alert("You sunk the "+e+" ship")}}let o;const a=e=>{e.target.style.backgroundColor="red";let t,n=e.target.dataset.letter,a=e.target.dataset.number,i=new l("Carrier",r(n,a,2,f));if("0"===a)console.log("Stay in the grid.");else{v===y[0]?(t=m,o="p1c"):v===y[1]&&(t=p,o="p2c"),t.push(i);let e=document.createElement("p");e.textContent="Carrier-"+r(n,a,2,f),document.getElementById(o).appendChild(e)}return t},i=e=>{e.target.style.backgroundColor="red";let t,a=e.target.dataset.letter,i=e.target.dataset.number,s=new l("Battleship",r(a,i,3,f));if("0"===i)console.log("Stay in the grid.");else if(v===y[0]?(t=m,o="p1c"):v===y[1]&&(t=p,o="p2c"),"Y"===n(t,r(a,i,3,f)))alert("These tiles have already been assigned, please choose different tiles");else{t.push(s);let e=document.createElement("p");e.textContent="BattleShip-"+r(a,i,3,f),document.getElementById(o).appendChild(e)}return t},s=e=>{e.target.style.backgroundColor="red";let t,a=e.target.dataset.letter,i=e.target.dataset.number,s=new l("Cruiser",r(a,i,4,f));if("0"===i)console.log("Stay in the grid.");else if(v===y[0]?(t=m,o="p1c"):v===y[1]&&(t=p,o="p2c"),"Y"===n(t,r(a,i,4,f)))alert("These tiles have already been assigned, please choose different tiles");else{t.push(s);let e=document.createElement("p");e.textContent="Cruiser-"+r(a,i,4,f),document.getElementById(o).appendChild(e)}return t},d=e=>{e.target.style.backgroundColor="red";let t,a=e.target.dataset.letter,i=e.target.dataset.number,s=new l("Submarine",r(a,i,5,f));if("0"===i)console.log("Stay in the grid.");else if(v===y[0]?(t=m,o="p1c"):v===y[1]&&(t=p,o="p2c"),"Y"===n(t,r(a,i,5,f)))alert("These tiles have already been assigned, please choose different tiles");else{t.push(s);let e=document.createElement("p");e.textContent="Submarine-"+r(a,i,5,f),document.getElementById(o).appendChild(e)}return t},c=e=>{e.target.style.backgroundColor="red";let t,a=e.target.dataset.letter,i=e.target.dataset.number,s=new l("Destroyer",r(a,i,6,f));if("0"===i)console.log("Stay in the grid.");else if(v===y[0]?(t=m,o="p1c"):v===y[1]&&(t=p,o="p2c"),"Y"===n(t,r(a,i,6,f)))alert("These tiles have already been assigned, please choose different tiles");else{t.push(s);let e=document.createElement("p");e.textContent="Destroyer-"+r(a,i,6,f),document.getElementById(o).appendChild(e)}return t},u=function(e){let t=e.target.dataset.number,r=e.target.dataset.letter,n="blue";if("V"===f){let e=11-h;t>e&&(t=e),n="0"===t?"white":"grey";for(let e=0;e<h;e++)document.getElementById(r+(+t+e)).style.backgroundColor=n}else if("H"===f){let e=r.charCodeAt(0),n=75-h;e>n&&(e=n);for(let r=0;r<h;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="grey"}},g=function(e){e.target.style.backgroundColor="white";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===f){let e=11-h;t>e&&(t=e);for(let e=0;e<h;e++)document.getElementById(r+(+t+e)).style.backgroundColor="white"}else if("H"===f){let e=r.charCodeAt(0),n=75-h;e>n&&(e=n);for(let r=0;r<h;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}};console.log("FUYOU");let h,m=[],p=[],f="V",y=["player1","player2"],v=y[0],E=m;v===y[0]?E=m:v===y[1]&&(E=p),document.getElementById("pip").textContent=v,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===f?(f="H",document.getElementById("position").textContent="Horizontal"):"H"===f&&(f="V",document.getElementById("position").textContent="Vertical")}));const C=()=>{v===y[0]?(v=y[1],E=p,document.getElementById("pip").textContent=v):v===y[1]?(v=y[0],E=m,document.getElementById("pip").textContent=v):(v=y[0],E=p,document.getElementById("pip").textContent=v)};function b(e){console.log(e.target.dataset.letter);let t=m,r=e.target.dataset.letter,n=e.target.dataset.number,l=r+n;if(console.log(l),console.log(t.length),"0"===n)console.log("Stay in the grid.");else{v===y[0]?t=p:v===y[1]&&(t=m);for(let e=0;e<t.length;e++)for(let r=0;r<t[e].coordinates.length;r++)t[e].coordinates[r]===l&&(console.log(t[e].coordinates),t[e].coordinates.splice(r,1),t[e].hitShip(),t[e].isSunk(),k(),console.log(t[e].coordinates),console.log("Player one sunk ships: 0"),console.log("Player two sunk ships: 0"));C()}}function k(){let e,t=0,r=m;v===y[0]?(r=p,e="Player One"):v===y[1]&&(r=m,e="Player Two");for(let e=0;e<r.length;e++)0===r[e].coordinates.length&&++t;console.log(t),5===t&&alert(e+" has won!")}function L(){if(E.length>4){h=1,C();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",L),e[t].style.backgroundColor="white";!function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",b),e[t].style.backgroundColor="white",e[t].addEventListener("mouseover",(e=>{"0"===e.target.dataset.number?e.target.style.backgroundColor="white":e.target.style.backgroundColor="red"})),e[t].addEventListener("mouseleave",(e=>{e.target.style.backgroundColor="white"}))}()}}const S={p1carrierShip:function(){let e=document.querySelectorAll(".cell");h=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",a),e[t].addEventListener("click",S.p1battleShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)},p1battleShip:function(){if(E.length>0){let e=document.querySelectorAll(".cell");h=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",a),e[t].removeEventListener("click",S.p1battleShip),e[t].addEventListener("click",i),e[t].addEventListener("click",S.p1cruiserShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1cruiserShip:function(){if(E.length>1){console.log(E);let e=document.querySelectorAll(".cell");h=4;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",S.p1cruiserShip),e[t].addEventListener("click",s),e[t].addEventListener("click",S.p1submarineShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1submarineShip:function(){if(E.length>2){let e=document.querySelectorAll(".cell");h=5;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",s),e[t].removeEventListener("click",S.p1submarineShip),e[t].addEventListener("click",d),e[t].addEventListener("click",S.p1destroyerShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1destroyerShip:function(){if(E.length>3){let e=document.querySelectorAll(".cell");h=6;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",S.p1destroyerShip),e[t].addEventListener("click",c),v===y[1]?e[t].addEventListener("click",L):v===y[0]&&e[t].addEventListener("click",S.loop),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},loop:function(){if(E.length>4){C();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",S.loop),e[t].style.backgroundColor="white";S.p1carrierShip()}}};t.createGameboard(),S.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWlCLFlBQVlOLEdBQzFDZ0IsRUFBTTlELEdBQUdvRCxpQkFBaUIsYUFBYU4sS0E4Q3lCeUIsZ0JBekNwRSxXQUVJLEdBQUdwQixFQUFLL0MsT0FBTyxFQUFFLENBQ2pCLElBQUkwRCxFQUFRL0UsU0FBU2dGLGlCQUFpQixTQUd0Q2IsRUFBRyxFQUNILElBQUksSUFBSWxELEVBQUUsRUFBRUEsRUFBRThELEVBQU0xRCxPQUFPSixJQUN2QjhELEVBQU05RCxHQUFHZ0Usb0JBQW9CLFFBQVFwQixHQUNyQ2tCLEVBQU05RCxHQUFHZ0Usb0JBQW9CLFFBQVFFLEVBQWdCSyxpQkFDckRULEVBQU05RCxHQUFHb0QsaUJBQWlCLFFBQVFQLEdBRy9CUCxJQUFRQyxFQUFXLEdBQUl1QixFQUFNOUQsR0FBR29ELGlCQUFpQixRQUFRUyxHQUN6RHZCLElBQVFDLEVBQVcsSUFBSXVCLEVBQU05RCxHQUFHb0QsaUJBQWlCLFFBQVFjLEVBQWdCTSxNQUU1RVYsRUFBTTlELEdBQUdvRCxpQkFBaUIsWUFBWU4sR0FDMUNnQixFQUFNOUQsR0FBR29ELGlCQUFpQixhQUFhTixLQXdCeUMwQixLQW5CcEYsV0FDSSxHQUFHckIsRUFBSy9DLE9BQU8sRUFBRSxDQUlyQmlELElBQ0ksSUFBSVMsRUFBUS9FLFNBQVNnRixpQkFBaUIsU0FFdEMsSUFBSSxJQUFJL0QsRUFBRSxFQUFFQSxFQUFFOEQsRUFBTTFELE9BQU9KLElBQ3ZCOEQsRUFBTTlELEdBQUdnRSxvQkFBb0IsUUFBUW5CLEdBQ3JDaUIsRUFBTTlELEdBQUdnRSxvQkFBb0IsUUFBUUUsRUFBZ0JNLE1BQ3JEVixFQUFNOUQsR0FBR2YsTUFBTWlELGdCQUFrQixRQUU3Q2dDLEVBQWdCQyxtQkFjWjFGLEVBQWdCc0Isa0JBQ3BCbUUsRUFBZ0JDLGlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2Nob29zZUNvb3JkaW5hdGVzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL292ZXJMYXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvc2hpcHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiY29uc3QgR2FtZWJvYXJkTW9kdWxlID0gKCgpID0+IHtcblxuICAgIGxldCBib3JkID0gXCJzb2xpZCBibGFjayAycHhcIjtcbiAgICBsZXQgbm9ib3JkID0gXCJub25lXCI7XG4gICAgXG4gICAgXG4gICAgY29uc3QgY3JlYXRlR3JpZHMgPSAobHRyLG5vLGlkKSA9PntcbiAgICBsZXQgZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICBncmlkLnN0eWxlLnBhZGRpbmcgPSBcIjEwcHhcIjtcbiAgICAvL3RyeWluZyB0byB0YWtlIG91dCB0aGUgYm9yZGVyaW5nIG9mIHRoZSBub3QgaW4gcGxheSBjZWxsc1xuICAgIGlmKGlkPT09IDApe2dyaWQuc3R5bGUuYm9yZGVyPW5vYm9yZH1cbiAgICBlbHNlIGlmKG5vPT09MCl7Z3JpZC5zdHlsZS5ib3JkZXIgPSBub2JvcmQ7fVxuICAgIGVsc2V7Z3JpZC5zdHlsZS5ib3JkZXIgPSBib3JkO31cbiAgICBcbiAgICBcbiAgICBncmlkLnRleHRDb250ZW50ID0gaWQ7XG4gICAgZ3JpZC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgIGlmKGlkPT09MCAmJiBsdHI9PT1cIjBcIil7Z3JpZC50ZXh0Q29udGVudCA9IG5vfVxuICAgIGVsc2UgaWYobm89PT0wICYmIGx0ciE9XCIwXCIpe2dyaWQudGV4dENvbnRlbnQgPSBsdHJ9XG4gICAgZ3JpZC5kYXRhc2V0LmhpdCA9IFwiTm9cIlxuICAgIGxldCBncmRhdGEgPSBncmlkLmRhdGFzZXQuaGl0O1xuICAgIGxldCBsZXR0ZXIgPSBncmlkLmRhdGFzZXQubGV0dGVyID0gbHRyO1xuICAgIGxldCBudW1iZXIgPSBncmlkLmRhdGFzZXQubnVtYmVyID0gbm87XG4gICAgLy9zaG93cyB3aGljaCBwbGF5ZXIgb3ducyB0aGUgY2VsbC8vXG4gICAgLy9sZXQgcGxheWVyID0gZ3JpZC5kYXRhc2V0LnBsYXllcmNlbGwgPSBcInBsYXllclwiK3BseXI7XG4gICAgXG4gICAgLy9jcmVhdGluZyBhIGNsYXNzIGZvciBlYWNoIGdyaWQgc28gd2UgY2FuIGFjY2VzcyBpdCBmcm9tIHRoZSBmdW5jdGlvbnNcbiAgICBncmlkLmNsYXNzTGlzdC5hZGQoXCJjZWxsXCIpO1xuICAgIC8vY3JlYXRpbmcgYW4gaWQgdGhhdCBtYXRjaGVzIGl0cyBjb29yZGluYXRlc1xuICAgIGdyaWQuc2V0QXR0cmlidXRlKCdpZCcsZ3JpZC5kYXRhc2V0LmxldHRlcitncmlkLmRhdGFzZXQubnVtYmVyKVxuICAgIFxuICAgICAgICAgXG4gICAgbGV0IGdhbWVib2FyZCA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVib2FyZDFcIik7XG4gICAgXG4gICAgZ2FtZWJvYXJkLmFwcGVuZENoaWxkKGdyaWQpO1xuICAgIFxuICAgIH1cbiAgICBcbiAgICAvL2NyZWF0ZSB0aGUgd2hvbGUgZ3JpZCB3aXRoIGJlbG93IGZ1bmN0aW9uXG4gICAgY29uc3QgY3JlYXRlR2FtZWJvYXJkID0gKCkgPT57XG4gICAgXG4gICAgZm9yKGxldCBpPTA7aTwxMTtpKyspe1xuICAgICAgICBcbiAgICBcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiMFwiLDAsaSlcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJCXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkNcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRFwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJFXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkZcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiR1wiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJIXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIklcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSlwiLGkpO1xuICAgIFxuICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtjcmVhdGVHcmlkcyxjcmVhdGVHYW1lYm9hcmR9XG4gICAgfSkoKTtcblxuICAgIGV4cG9ydHtHYW1lYm9hcmRNb2R1bGV9OyIsIi8vdGhlIGNob29vc2UgY29vcmRpbmF0ZXMgZnVuY3Rpb25cbmZ1bmN0aW9uIGNob29zZUNyZG50cyhTdHJ0THR0cnMsU3RydE5vLGxlbmd0aCxWb3JIKXtcbiAgICBsZXQgY29vcmQgPSBbXTtcbiAgICBcbiAgICBpZihWb3JIPT09XCJWXCIpe1xuICAgIGxldCBvdmVyID0gMTEtbGVuZ3RoO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKFN0cnRObz5vdmVyKXtTdHJ0Tm8gPSBvdmVyfVxuICAgIC8vaWYoVm9ySD09PVwiVmVydGljYWxcIil7fSBXaWxsIGJlIHRyZWF0aW5nIHRoaXMgdGVzdGluZyBhcyBjb21wbGV0ZSB2ZXJ0aWNhbCBwb3NpdGlvbmluZ1xuICAgIGZvcihsZXQgaT0xO2k8bGVuZ3RoKzE7aSsrKXtcbiAgICAgICAgY29vcmQucHVzaChTdHJ0THR0cnMgKyBTdHJ0Tm8rKylcbiAgICB9XG59XG5cbmVsc2UgaWYoVm9ySD09PVwiSFwiKXtcbiAgICBsZXQgTHRyTnVtYmVyID0gU3RydEx0dHJzLmNoYXJDb2RlQXQoMClcbiAgICBsZXQgb3ZlciA9IDc1LWxlbmd0aDtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihMdHJOdW1iZXI+b3Zlcil7THRyTnVtYmVyID0gb3Zlcn1cbiAgICBjb25zb2xlLmxvZyhMdHJOdW1iZXIpXG4gICAgY29uc29sZS5sb2cob3ZlcilcbiAgICBcbiAgICBmb3IobGV0IGk9MTtpPGxlbmd0aCsxO2krKyl7XG4gICAgICAgIGNvb3JkLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBTdHJ0Tm8pXG4gICAgfVxuXG59XG4gICAgcmV0dXJuIGNvb3JkO1xuXG59XG5cbmV4cG9ydCB7Y2hvb3NlQ3JkbnRzfSIsIi8vY29kZSBmb3IgaWRlbnRpZnlpbmcgd2hlbiB0aGUgY2hvc2VuIGNvb3JkaW5hdGVzIG92ZXJsYXAgXG4vL3dpdGggY29vcmRpbmF0ZXMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBhc3NpZ25lZFxuXG5cblxuXG5cbmZ1bmN0aW9uIG92ZXJMYXAoYSxiKXtcbi8vUGxjPSBwbGF5ZXIgY29vcmRpbmF0ZXMgICAgXG5sZXQgcGxjPWE7XG4vL2NyZCBpcyB0aGUgbmV3IGNvb3JkaW5hdGVzXG5sZXQgY3JkID1iO1xuLy92YXJpYWJsZSB0byByZXR1cm5cbmxldCBvdnJsYXA9MDtcblxuZm9yKGxldCB6PTA7ejxjcmQubGVuZ3RoO3orKyl7XG5mb3IobGV0IHA9MDtwPHBsYy5sZW5ndGg7cCsrKXtcbiAgICBmb3IobGV0IGk9MDtpPHBsY1twXS5jb29yZGluYXRlcy5sZW5ndGg7aSsrKXtcbiAgICBpZihwbGNbcF0uY29vcmRpbmF0ZXNbaV09PT1jcmRbel0pe292cmxhcCsrfVxuICAgIFxufVxufVxufVxuaWYob3ZybGFwPjApe292cmxhcD1cIllcIn1cbiAgICBlbHNle292cmxhcD1cIk5cIn1cbnJldHVybiBvdnJsYXBcbn1cblxuLypcblxuLy9zZWNvbmQgYXR0ZW1wdCBkdW1iaW5nIGl0IGRvd25cbmZ1bmN0aW9uIG92ZXJMYXAoYSxiKXtcbiAgICAvL1BsYz0gcGxheWVyIGNvb3JkaW5hdGVzICAgIFxuICAgIGxldCBwbGM9YTtcbiAgICAvL2NyZCBpcyB0aGUgbmV3IGNvb3JkaW5hdGVzXG4gICAgbGV0IGNyZCA9YjtcbiAgICAvL3ZhcmlhYmxlIHRvIHJldHVyblxuICAgIGxldCBvdnJsYXAgPTA7XG4gICAgXG4gICAgZm9yKGxldCBwPTA7cDxwbGMubGVuZ3RoO3ArKyl7XG4gICAgZm9yKGxldCB6PTA7ejxjcmQubGVuZ3RoO3orKyl7XG4gICAgICAgIGlmKHBsY1twXT09PWNyZFt6XSl7b3ZybGFwKyt9XG4gICAgICAgIFxuICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYob3ZybGFwPjApe292cmxhcD1cIllcIn1cbiAgICBlbHNle292cmxhcD1cIk5cIn1cbiAgICByZXR1cm4gb3ZybGFwXG4gICAgfVxuICAgICovXG5cbmV4cG9ydCB7b3ZlckxhcH0iLCJpbXBvcnR7cGlwLGRpcmVjdGlvbixwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBsYXllckJhc2V9IGZyb20gJy4vaW5kZXgnXG5pbXBvcnR7Y2hvb3NlQ3JkbnRzfSBmcm9tICcuL2Nob29zZUNvb3JkaW5hdGVzJ1xuaW1wb3J0e292ZXJMYXB9IGZyb20gJy4vb3ZlckxhcCdcblxuXG5cbmZ1bmN0aW9uIHNoaXBmYWN0b3J5KG5hbWUsY29vcmRpbmF0ZXMpe1xuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLmNvb3JkaW5hdGVzID0gY29vcmRpbmF0ZXNcbiAgICB0aGlzLmhpdFNoaXAgPSAoKT0+e2FsZXJ0KFwiWW91IHN0cnVjayB0aGUgXCIgKyBuYW1lICsgXCIgc2hpcFwiKX1cbiAgICB0aGlzLmlzU3VuayA9ICgpID0+e2lmKGNvb3JkaW5hdGVzLmxlbmd0aD09PTApe2FsZXJ0KFwiWW91IHN1bmsgdGhlIFwiKyBuYW1lICtcIiBzaGlwXCIpO319XG4gICAgXG4gIH1cblxuICBsZXQgY29vcmRpZDtcblxuXG4gIGNvbnN0IGNhcnJpZXIgPSAodCkgPT57ICAgIFxuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDYXJyaWVyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihudW1iZXI9PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNle1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gXG4gICAgUEMucHVzaChndW5uKTtcbiAgXG4gICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICBwLnRleHRDb250ZW50ID0gJ0NhcnJpZXInICtcIi1cIisgY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb29yZGlkKS5hcHBlbmRDaGlsZChwKTtcbiAgICB9XG4gICAgcmV0dXJuIFBDO1xuICAgIH1cblxuICBjb25zdCBiYXR0bGVzaGlwID0gKHQpID0+e1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJCYXR0bGVzaGlwXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMyxkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihudW1iZXI9PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNle1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbikpPT09XCJZXCIpe2FsZXJ0KFwiVGhlc2UgdGlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWQsIHBsZWFzZSBjaG9vc2UgZGlmZmVyZW50IHRpbGVzXCIpfVxuICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgIFxuXG4gICAgbGV0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuICAgICAgcC50ZXh0Q29udGVudCA9ICdCYXR0bGVTaGlwJyArXCItXCIrIGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKVxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29vcmRpZCkuYXBwZW5kQ2hpbGQocCk7XG4gIH19XG4gICAgcmV0dXJuIFBDO1xuICB9XG4gIGNvbnN0IGNydWlzZXIgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkNydWlzZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw0LGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKG51bWJlcj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2V7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDsgY29vcmRpZCA9IFwicDFjXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkOyBjb29yZGlkID0gXCJwMmNcIn1cbiAgICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDQsZGlyZWN0aW9uKSk9PT1cIllcIil7YWxlcnQoXCJUaGVzZSB0aWxlcyBoYXZlIGFscmVhZHkgYmVlbiBhc3NpZ25lZCwgcGxlYXNlIGNob29zZSBkaWZmZXJlbnQgdGlsZXNcIil9XG4gICAgZWxzZXsgXG4gICAgUEMucHVzaChndW5uKTtcbiAgICBcblxuICAgIGxldCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgIHAudGV4dENvbnRlbnQgPSAnQ3J1aXNlcicgK1wiLVwiKyBjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw0LGRpcmVjdGlvbilcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvb3JkaWQpLmFwcGVuZENoaWxkKHApO1xuICAgIH19XG4gICAgcmV0dXJuIFBDO1xuICB9XG4gIGNvbnN0IHN1Ym1hcmluZSA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiU3VibWFyaW5lXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNSxkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihudW1iZXI9PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNle1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw1LGRpcmVjdGlvbikpPT09XCJZXCIpe2FsZXJ0KFwiVGhlc2UgdGlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWQsIHBsZWFzZSBjaG9vc2UgZGlmZmVyZW50IHRpbGVzXCIpfVxuICAgIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgXG4gICAgbGV0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuICAgICAgcC50ZXh0Q29udGVudCA9ICdTdWJtYXJpbmUnICtcIi1cIisgY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNSxkaXJlY3Rpb24pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb29yZGlkKS5hcHBlbmRDaGlsZChwKTtcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBkZXN0cm95ZXIgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkRlc3Ryb3llclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDYsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuXG4gICAgbGV0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuICAgICAgcC50ZXh0Q29udGVudCA9ICdEZXN0cm95ZXInICtcIi1cIisgY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb29yZGlkKS5hcHBlbmRDaGlsZChwKTtcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuXG4gIGV4cG9ydCB7c2hpcGZhY3RvcnksY2FycmllcixiYXR0bGVzaGlwLGNydWlzZXIsc3VibWFyaW5lLGRlc3Ryb3llcn0iLCJpbXBvcnQge3NxLGRpcmVjdGlvbixwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkfSBmcm9tICcuL2luZGV4J1xuY29uc3QgZG9tTW9kdWxlID0gKCgpID0+e1xuLy9mdW5jdGlvbiBmb3IgaGlnaGxpZ2h0aW5nIHNxdWFyZXMgd2hlbiBob3ZlcmluZ1xuZnVuY3Rpb24gaG92ZXIodCl7XG5sZXQgbnVtYiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xubGV0IGxldHRlcnIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbmxldCBjb2xvciA9IFwiYmx1ZVwiO1xuXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1zcTtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihudW1iPm92ZXIpe251bWIgPSBvdmVyfVxuICAgIGlmKG51bWI9PT1cIjBcIil7Y29sb3IgPSBcIndoaXRlXCJ9XG4gICAgZWxzZXtjb2xvcj1cImdyZXlcIn1cbmZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcn19XG5lbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtcbiAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICBsZXQgb3ZlciA9IDc1LXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKEx0ck51bWJlcj5vdmVyKXtMdHJOdW1iZXIgPSBvdmVyfVxuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIG51bWIpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZXlcIn1cbn1cbn1cblxuLy9mdW5jdGlvbiBmb3IgcmV0dXJuaW5nIHNxdWFyZSBjb2xvciB0byB3aGl0ZSBhZnRlciBsZWF2aW5nXG5mdW5jdGlvbiBsZWF2ZSh0KXt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwiO1xubGV0IG51bWIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbmxldCBsZXR0ZXJyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXJcbmlmKGRpcmVjdGlvbj09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKG51bWI+b3Zlcil7bnVtYiA9IG92ZXJ9XG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCJ9fVxuICAgIGVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgICAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICAgICAgbGV0IG92ZXIgPSA3NS1zcTtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihMdHJOdW1iZXI+b3Zlcil7THRyTnVtYmVyID0gb3Zlcn1cbiAgICAgICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIG51bWIpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJ9XG4gICAgfVxuICAgIH1cblxuICAgIC8vcmVtZW1iZXIgdG8gaW1wbGVtZW50IHRoaXMgYmVmb3JlIGZpbmlzaGluZyB1cCB0aGUgcHJvamVjdFxuICAgIC8vKioqXG4gICAgZnVuY3Rpb24gc2hvd0Nvb3JkcCgpe1xuICAgIGZvcihsZXQgaT0wO2k8cGxheWVyMWNvb3JkLmxlbmd0aDtpKyspe1xuICAgICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICAgIHAudGV4dENvbnRlbnQgPSBwbGF5ZXIxY29vcmRbaV0ubmFtZSArJy0nK3BsYXllcjFjb29yZFtpXS5jb29yZGluYXRlcztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMWNcIikuYXBwZW5kQ2hpbGQocCk7XG4gICAgICB9XG5cbiAgICAgIGZvcihsZXQgaT0wO2k8cGxheWVyMmNvb3JkLmxlbmd0aDtpKyspe1xuICAgICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICAgIHAudGV4dENvbnRlbnQgPSBwbGF5ZXIyY29vcmRbaV0ubmFtZSArJy0nK3BsYXllcjJjb29yZFtpXS5jb29yZGluYXRlcztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMmNcIikuYXBwZW5kQ2hpbGQocCk7XG4gICAgICB9fVxuXG5yZXR1cm4ge2hvdmVyLGxlYXZlLHNob3dDb29yZHB9XG59KSgpO1xuXG5cbmV4cG9ydHtkb21Nb2R1bGV9IiwiaW1wb3J0IHtHYW1lYm9hcmRNb2R1bGV9IGZyb20gJy4vZ2FtZWJvYXJkJ1xuaW1wb3J0IHtjYXJyaWVyLGJhdHRsZXNoaXAsY3J1aXNlcixzdWJtYXJpbmUsZGVzdHJveWVyfSBmcm9tICcuL3NoaXBzJ1xuaW1wb3J0IHtkb21Nb2R1bGV9IGZyb20gJy4vZG9tJ1xuXG5cbmNvbnNvbGUubG9nKFwiRlVZT1VcIilcblxuXG4gIC8vY29vcmRpbmF0ZXMgb2YgZWFjaCBwbGF5ZXJzIHNoaXAsIGp1c3QgZm9yIHRlc3RpbmcgdW50aWwgd2UgdXNlIG11bHRpcGxlIHNoaXBzXG4gIGxldCBwbGF5ZXIxY29vcmQ9W107XG4gIGxldCBwbGF5ZXIyY29vcmQ9W107XG4gIGxldCBwbGF5ZXIxU3Vua1NoaXBzPTA7XG4gIGxldCBwbGF5ZXIyU3Vua1NoaXBzPTA7XG4gIC8vVj1WZXJ0aWNhbCwgSD1Ib3Jpem9udGFsXG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICAvL3BsYXllciBpbiBwbGF5XG4gIGxldCBwbGF5ZXJCYXNlID0gW1wicGxheWVyMVwiLFwicGxheWVyMlwiXTtcbiAgbGV0IHBpcCA9IHBsYXllckJhc2VbMF07XG4gIGxldCBQY3JkID0gcGxheWVyMWNvb3JkO1xuICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BjcmQgPSBwbGF5ZXIxY29vcmQ7fVxuICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UGNyZCA9IHBsYXllcjJjb29yZDt9XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO1xuICAvL3RoZSBzcXVhcmVzIHRoYXQgbmVlZCBoaWdobGlnaHRpbmcgZm9yIHRoZSBkb21cbiAgbGV0IHNxO1xuXG5cbiAgXG4gIFxuXG4vL2J1dHRvbiB0byBjaGFuZ2UgdGhlIHBvc2l0aW9uaW5nIG9mIHRoZSBwbGFjZW1lbnRcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQ2huZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57aWYoZGlyZWN0aW9uPT09XCJWXCIpe2RpcmVjdGlvbj1cIkhcIjtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uXCIpLnRleHRDb250ZW50PVwiSG9yaXpvbnRhbFwiO31lbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtkaXJlY3Rpb249XCJWXCI7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblwiKS50ZXh0Q29udGVudD1cIlZlcnRpY2FsXCJ9fSlcblxuXG4vL2Z1bmN0aW9uIGNoYW5nZXMgcGxheWVyXG5jb25zdCBjaGFuUGxheWVyID0gKCk9PntcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe3BpcCA9IHBsYXllckJhc2VbMV07XG4gICAgICAgIFBjcmQgPSBwbGF5ZXIyY29vcmQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7cGlwID0gcGxheWVyQmFzZVswXTtcbiAgICAgICAgUGNyZCA9IHBsYXllcjFjb29yZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgIGVsc2V7cGlwID0gcGxheWVyQmFzZVswXTtcbiAgICAgICAgUGNyZD1wbGF5ZXIyY29vcmQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cblxufVxuXG5cbi8vYmVsb3cgZnVuY3Rpb25zIG5lZWQgdG8gYmUgZ3JvdXBlZCBpbnRvIGEgbW9kdWxlXG5cbmZ1bmN0aW9uIGhpdCh0KXtjb25zb2xlLmxvZyh0LnRhcmdldC5kYXRhc2V0LmxldHRlcik7XG4gICAgbGV0IFBDID0gcGxheWVyMWNvb3JkO1xuICAgIGxldCBMID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IE4gPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICBsZXQgaGl0Q29vcmQgPSBMK047XG4gICAgY29uc29sZS5sb2coaGl0Q29vcmQpO1xuICAgIGNvbnNvbGUubG9nKFBDLmxlbmd0aCk7XG4gICAgaWYoTj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2V7ICAgXG4gICAgXG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjJjb29yZDt9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMWNvb3JkO31cbiAgICBmb3IobGV0IHA9MDtwPFBDLmxlbmd0aDtwKyspe1xuICAgICAgICBmb3IobGV0IGk9MDtpPFBDW3BdLmNvb3JkaW5hdGVzLmxlbmd0aDtpKyspe1xuICAgICAgICBpZihQQ1twXS5jb29yZGluYXRlc1tpXT09PWhpdENvb3JkKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFBDW3BdLmNvb3JkaW5hdGVzKVxuICAgICAgICAgICAgUENbcF0uY29vcmRpbmF0ZXMuc3BsaWNlKGksMSlcbiAgICAgICAgUENbcF0uaGl0U2hpcCgpO1xuICAgICAgICBQQ1twXS5pc1N1bmsoKTsgICAgICAgIFxuICAgICAgICBnYW1lT3ZlcigpO1xuICAgICAgICBjb25zb2xlLmxvZyhQQ1twXS5jb29yZGluYXRlcylcbiAgICAgICAgY29uc29sZS5sb2coXCJQbGF5ZXIgb25lIHN1bmsgc2hpcHM6IFwiKyBwbGF5ZXIxU3Vua1NoaXBzKSAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUGxheWVyIHR3byBzdW5rIHNoaXBzOiBcIisgcGxheWVyMlN1bmtTaGlwcykgIFxuICAgICAgICBcbiAgICAgICAgfX1cbiAgICB9XG4gICAgY2hhblBsYXllcigpfSB9XG5cblxuIGZ1bmN0aW9uIGdhbWVPdmVyKCl7XG4gICAgbGV0IGNvdW50ID0wO1xuICAgIGxldCBQQyA9IHBsYXllcjFjb29yZDtcbiAgICBsZXQgcGxyO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IHBscj1cIlBsYXllciBPbmVcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IHBscj1cIlBsYXllciBUd29cIn1cbiAgICBmb3IobGV0IGkgPTA7aTxQQy5sZW5ndGg7aSsrKXtcbiAgICAgICBpZihQQ1tpXS5jb29yZGluYXRlcy5sZW5ndGg9PT0wKXsrK2NvdW50fVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhjb3VudCk7XG4gICAgaWYoY291bnQ9PT01KXthbGVydCggcGxyKyBcIiBoYXMgd29uIVwiKX1cbiAgICB9XG4gICAgXG5cbmZ1bmN0aW9uIHN0YXJ0R2FtZSgpe1xuICAgIGlmKFBjcmQubGVuZ3RoPjQpe1xuICAgIHNxPTFcbiAgICBjaGFuUGxheWVyKCk7XG4gICAgbGV0IGNlbGxzPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIik7XG5mb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkZXN0cm95ZXIpIFxuY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHN0YXJ0R2FtZSlcbmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbn1cbnBsYXlHYW1lKCl9fVxuICAgIFxuICAgIFxuZnVuY3Rpb24gcGxheUdhbWUoKXtcbiAgICBcbiAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbmZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG5cbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxoaXQpXG5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5jZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCh0KT0+e2lmKHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyPT09XCIwXCIpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJ9ZWxzZXt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJyZWRcIn19KVxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsKHQpPT57dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIn0pXG59XG5cbn1cblxuXG5cblxuLy9TZWxlY3Rpb24gbW9kdWxlXG5jb25zdCBzZWxlY3Rpb25Nb2R1bGUgPSAoKCkgPT57XG4gICAgXG4gICAgXG5cbiAgICAgICAgXG4gICAgLy9hZGRzIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGV2ZXJ5IGdyaWQgY2VsbCBhbGxvd2luZyB1cyB0byBjaG9vc2Ugb3VyIGNvb3JkaW5hdGVzLG1hcCB0aGVtIHRvIHRoZSBhcnJheSB0aGVuIGNoYW5nZSBwbGF5ZXJcbiAgICBmdW5jdGlvbiBwMWNhcnJpZXJTaGlwKCl7XG4gICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTI7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY2FycmllcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxYmF0dGxlU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgICAgIH1cbiAgICBmdW5jdGlvbiBwMWJhdHRsZVNoaXAoKXsgICBcblxuICAgICAgICBpZihQY3JkLmxlbmd0aD4wKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT0zO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWJhdHRsZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGJhdHRsZXNoaXApIFxuICAgICAgICAgICAgLy9pZiBjb29yZGluYXRlcyBtYXRjaCBsZW5ndGggbmVlZGVkIG1vdmUgb250byBuZXh0IHBhcnRcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFjcnVpc2VyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICBmdW5jdGlvbiBwMWNydWlzZXJTaGlwKCl7XG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+MSl7XG4gICAgICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFBjcmQpXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT00O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGJhdHRsZXNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWNydWlzZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjcnVpc2VyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFzdWJtYXJpbmVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcDFzdWJtYXJpbmVTaGlwKCl7XG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+Mil7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9NTtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjcnVpc2VyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFzdWJtYXJpbmVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdWJtYXJpbmUpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWRlc3Ryb3llclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwMWRlc3Ryb3llclNoaXAoKXtcblxuICAgICAgICBpZihQY3JkLmxlbmd0aD4zKXtcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTY7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc3VibWFyaW5lKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFkZXN0cm95ZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkZXN0cm95ZXIpIFxuICAgICAgICAgICAgLy90aGlzIGRlY2lkZXMgd2hldGhlciB0aGUgZ2FtZSBzdGFydHMgYWZ0ZXIgcGxheWVyIHR3byBvciB0aGUgY29tcHV0ZXIgaGFzIHNlbGVjdGVkIHRoZWlyIGdyaWRzXG4gICAgICAgICAgICAvL2lmIG5vdCBpdCBsb29wcyBhcm91bmRcbiAgICAgICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7Y2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHN0YXJ0R2FtZSl9XG4gICAgICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe2NlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUubG9vcCkgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvb3AoKXtcbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+NCl7XG5cbiAgICAgICAgLy9UaGlzIGZ1bmN0aW9uIHR1cm5zIHRoZSBzZWxlY3Rpb24gcHJvY2VzcyBvdmVyIHRvIGVpdGhlciBhIGNvbXB1dGVyIG9yIHBsYXllciAyXG4gICAgLy9qdXN0IGRvaW5nIHBsYXllciAyIGltcGxlbWV0YXRpb24gZm9yIG5vd1xuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgXG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUubG9vcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgfVxuc2VsZWN0aW9uTW9kdWxlLnAxY2FycmllclNoaXAoKTtcbn1cbiAgICB9XG5cblxuICAgIFxuICAgICAgICByZXR1cm57cDFjYXJyaWVyU2hpcCxwMWJhdHRsZVNoaXAscDFjcnVpc2VyU2hpcCxwMXN1Ym1hcmluZVNoaXAscDFkZXN0cm95ZXJTaGlwLGxvb3B9XG4gICAgXG4gICAgfSkoKTtcblxuXG5cblxuXG4gICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdhbWVib2FyZCgpO1xuc2VsZWN0aW9uTW9kdWxlLnAxY2FycmllclNoaXAoKTtcblxuXG5cbmV4cG9ydCB7c3EsZGlyZWN0aW9uLHBpcCxwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBsYXllckJhc2UsY2hhblBsYXllcixwbGF5ZXIxU3Vua1NoaXBzLHBsYXllcjJTdW5rU2hpcHN9XG5cblxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJHYW1lYm9hcmRNb2R1bGUiLCJjcmVhdGVHcmlkcyIsImx0ciIsIm5vIiwiaWQiLCJncmlkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwYWRkaW5nIiwiYm9yZGVyIiwidGV4dENvbnRlbnQiLCJ0ZXh0QWxpZ24iLCJkYXRhc2V0IiwiaGl0IiwibGV0dGVyIiwibnVtYmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUdhbWVib2FyZCIsImkiLCJjaG9vc2VDcmRudHMiLCJTdHJ0THR0cnMiLCJTdHJ0Tm8iLCJsZW5ndGgiLCJWb3JIIiwiY29vcmQiLCJvdmVyIiwicHVzaCIsIkx0ck51bWJlciIsImNoYXJDb2RlQXQiLCJjb25zb2xlIiwibG9nIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwib3ZlckxhcCIsImEiLCJiIiwicGxjIiwiY3JkIiwib3ZybGFwIiwieiIsInAiLCJjb29yZGluYXRlcyIsInNoaXBmYWN0b3J5IiwibmFtZSIsInRoaXMiLCJoaXRTaGlwIiwiYWxlcnQiLCJpc1N1bmsiLCJjb29yZGlkIiwiY2FycmllciIsInQiLCJ0YXJnZXQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJQQyIsImd1bm4iLCJkaXJlY3Rpb24iLCJwaXAiLCJwbGF5ZXJCYXNlIiwicGxheWVyMWNvb3JkIiwicGxheWVyMmNvb3JkIiwiYmF0dGxlc2hpcCIsImNydWlzZXIiLCJzdWJtYXJpbmUiLCJkZXN0cm95ZXIiLCJkb21Nb2R1bGUiLCJudW1iIiwibGV0dGVyciIsImNvbG9yIiwic3EiLCJQY3JkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNoYW5QbGF5ZXIiLCJMIiwiTiIsImhpdENvb3JkIiwic3BsaWNlIiwiZ2FtZU92ZXIiLCJwbHIiLCJjb3VudCIsInN0YXJ0R2FtZSIsImNlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwbGF5R2FtZSIsInNlbGVjdGlvbk1vZHVsZSIsInAxY2FycmllclNoaXAiLCJwMWJhdHRsZVNoaXAiLCJwMWNydWlzZXJTaGlwIiwicDFzdWJtYXJpbmVTaGlwIiwicDFkZXN0cm95ZXJTaGlwIiwibG9vcCJdLCJzb3VyY2VSb290IjoiIn0=