(()=>{"use strict";var e={d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{jK:()=>b,zf:()=>k,o5:()=>x,o7:()=>w,bF:()=>q,P4:()=>Y,VL:()=>S,hJ:()=>B,yR:()=>L,He:()=>I,w7:()=>A,q2:()=>M,UX:()=>H,sq:()=>C,t:()=>D,Nn:()=>V});const t={createGrids:(e,t,n)=>{let l=document.createElement("div");l.style.padding="10px",l.style.border=0===n||0===t?"none":"solid black 2px",l.textContent=n,l.style.textAlign="center",0===n&&"0"===e?l.textContent=t:0===t&&"0"!=e&&(l.textContent=e),l.dataset.hit="No",l.dataset.P1hit="N",l.dataset.P2hit="N",l.dataset.letter=e,l.dataset.number=t,l.classList.add("cell"),l.setAttribute("id",l.dataset.letter+l.dataset.number),document.getElementById("gameboard1").appendChild(l)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function n(e,t,n,l){let o=[];if("V"===l){let l=11-n;t>l&&(t=l);for(let l=1;l<n+1;l++)o.push(e+t++)}else if("H"===l){let l=e.charCodeAt(0),r=75-n;l>r&&(l=r),console.log(l),console.log(r);for(let e=1;e<n+1;e++)o.push(String.fromCharCode(l++)+t)}return o}function l(e,t){let n=e,l=t,o=0;for(let e=0;e<l.length;e++)for(let t=0;t<n.length;t++)for(let r=0;r<n[t].coordinates.length;r++)n[t].coordinates[r]===l[e]&&o++;return o=o>0?"Y":"N",o}function o(e,t){this.name=e,this.coordinates=t,this.hitShip=t=>{if(alert("Struck the "+e+" ship"),"Y"===k&&Y===A[1]){alert("well done computer"),alert(t+" has been hit.");for(let n=0;n<x.length;n++)e===x[n].name&&x[n].coordinates.push(t);0===H&&H++}},this.isSunk=()=>{0===t.length&&alert("Sunk the "+e+" ship")}}let r;const s=e=>{e.target.style.backgroundColor="red";let t,l=e.target.dataset.letter,s=e.target.dataset.number,a=new o("Carrier",n(l,s,2,w));return"0"===s?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),t.push(a)),t},a=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Battleship",n(s,a,3,w));return"0"===a?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),"Y"===l(t,n(s,a,3,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},i=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Cruiser",n(s,a,4,w));return"0"===a?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),"Y"===l(t,n(s,a,4,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},c=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Submarine",n(s,a,5,w));return"0"===a?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),"Y"===l(t,n(s,a,5,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},d=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Destroyer",n(s,a,6,w));return"0"===a?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),"Y"===l(t,n(s,a,6,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},u=function(e){let t=e.target.dataset.number,n=e.target.dataset.letter,l="blue";if("V"===w){let e=11-C;t>e&&(t=e),l="0"===t?"white":"grey";for(let e=0;e<C;e++)document.getElementById(n+(+t+e)).style.backgroundColor=l}else if("H"===w){let e=n.charCodeAt(0),l=75-C;e>l&&(e=l);for(let n=0;n<C;n++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="grey"}},g=function(e){e.target.backgroundColor="white";let t=e.target.dataset.number,n=e.target.dataset.letter,l=n+t;if(console.log(l),"V"===w){let e=11-C;t>e&&(t=e);for(let e=0;e<C;e++)document.getElementById(n+(+t+e)).style.backgroundColor="white"}else if("H"===w){let e=n.charCodeAt(0),l=75-C;e>l&&(e=l);for(let n=0;n<C;n++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}},h=function(){let e=B;Y===A[0]?e=B:Y===A[1]&&(e=I);for(let t=0;t<e.length;t++)document.getElementById(e[t]).style.backgroundColor="red"},m=function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white"},y=function(e){"0"===e.target.dataset.number?e.target.style.backgroundColor="white":e.target.style.backgroundColor="red"},p=function(e){Y===A[0]?b=e.target.dataset.P1hit:Y===A[1]&&(b=e.target.dataset.P2hit),"Y"===b?e.target.style.backgroundColor="red":"N"===b&&(e.target.style.backgroundColor="white")},f=function(){let e=S;Y===A[0]?(e=S,console.log(e)):Y===A[1]&&(e=L,console.log(e));for(let t=0;t<e.length;t++)for(let n=0;n<e[t].coordinates.length;n++)document.getElementById(e[t].coordinates[n]).style.backgroundColor="grey"},v=(()=>{var e=document.getElementById("myModal"),t=document.getElementById("myBtn");let n=document.getElementById("para1"),l=document.getElementById("para2");document.getElementsByClassName("close")[0];let o=document.getElementById("PSbuttons");o.style.display="none";let r=document.getElementById("compHit");function s(){e.style.display="none"}r.style.display="none",t.onclick=function(){e.style.display="None"};let a=document.getElementById("frnd"),i=document.getElementById("comp");return{showModule:function(){e.style.display="block",n.textContent="CHANGE PLACES!",l.textContent="Click button when ready.",o.style.display="none",t.style.display="block"},playerSelect:function(){e.style.display="block",n.textContent="Are you playing with a friend or against our AI?",t.style.display="none",document.querySelector(".close").style.display="none",o.style.display="block",a.addEventListener("click",(()=>{k="N",e.style.display="none"})),i.addEventListener("click",(()=>{k="Y",e.style.display="none"}))},compHitModal:function(){e.style.display="block",n.textContent="Please click the button below to activate the AI choice!",t.style.display="none",r.style.display="block",document.querySelector(".close").style.display="none",o.style.display="none",r.addEventListener("click",q),r.addEventListener("click",s)},closeModal:s}})(),E=(()=>{function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}return{hit:function(){console.log(H),console.log(x),1===H||2===H||(M=e(0,V.length-1));let t=V[M];return V.splice(M,1),console.log("Random no: "+M),console.log("Length: "+V.length),console.log(V),t},selectCarrier:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Carrier",n(r,s,2,a));"Y"===l(i,n(r,s,2,a))?E.selectCarrier():(i.push(c),E.selectBattleship())},selectBattleship:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Battleship",n(r,s,3,a));"Y"===l(i,n(r,s,3,a))?E.selectBattleship():(i.push(c),E.selectCruiser())},selectCruiser:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Cruiser",n(r,s,4,a));"Y"===l(i,n(r,s,4,a))?E.selectCruiser():(i.push(c),E.selectSubmarine())},selectSubmarine:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Submarine",n(r,s,5,a));"Y"===l(i,n(r,s,5,a))?E.selectSubmarine():(i.push(c),E.selectDestroyer())},selectDestroyer:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Destroyer",n(r,s,6,a));"Y"===l(i,n(r,s,6,a))?E.selectDestroyer():(i.push(c),D())},randomIntFromInterval:e,targetArray:function(){for(let e=65;e<75;e++)for(let t=1;t<3;t++)V.push(String.fromCharCode(e)+t)}}})();let C,b,k="N",S=[],L=[],B=[],I=[],w="V",A=["player1","player2"],Y=A[0],P=S;Y===A[0]?P=S:Y===A[1]&&(P=L),document.getElementById("pip").textContent=Y;let M,V=[],H=0;E.targetArray(),console.log(V);let x=[{name:"Carrier",coordinates:[]},{name:"Battleship",coordinates:[]},{name:"Cruiser",coordinates:[]},{name:"Submarine",coordinates:[]},{name:"Destroyer",coordinates:[]}];document.getElementById("Chnge").addEventListener("click",(()=>{"V"===w?(w="H",document.getElementById("position").textContent="Horizontal"):"H"===w&&(w="V",document.getElementById("position").textContent="Vertical")})),document.getElementById("shwshipos").addEventListener("mouseover",(()=>{m(),f()})),document.getElementById("shwshipos").addEventListener("mouseleave",(()=>{m(),h()}));const G=()=>{let e;e="Y"===k?v.compHitModal():v.showModule(),Y===A[0]?(Y=A[1],P=L,document.getElementById("pip").textContent=Y):Y===A[1]?(Y=A[0],P=S,document.getElementById("pip").textContent=Y):(Y=A[0],P=L,document.getElementById("pip").textContent=Y),m(),h()};function q(e){console.log(e.target.dataset.letter),console.log(Y);let t,n,l,o=S,r=B,s=0;if(console.log(s),"Y"===k&&Y===A[1]?(l=E.hit(),alert("Computer has struck Tile: "+l)):(t=e.target.dataset.letter,n=e.target.dataset.number,l=t+n),console.log(l),console.log(o.length),Y===A[0]?(o=L,r=B,b=e.target.dataset.P1hit):Y===A[1]&&"Y"!=k?(o=S,r=I,b=e.target.dataset.P2hit):Y===A[1]&&"Y"===k&&(o=S,r=I),"0"===n)console.log("Stay in the grid.");else if("Y"===b)console.log("Already been hit, try again.");else{Y===A[0]?(o=L,r=B,b=e.target.dataset.P1hit="Y"):Y===A[1]&&(o=S,r=I,b=e.target.dataset.P2hit="Y");for(let e=0;e<o.length;e++)for(let t=0;t<o[e].coordinates.length;t++)o[e].coordinates[t]===l&&(console.log(o[e].coordinates),o[e].coordinates.splice(t,1),o[e].hitShip(l),o[e].isSunk(),s++,N(),console.log("Player one sunk ships: 0"),console.log("Player two sunk ships: 0"));r.push(l),console.log("P1 strikes: "+B),console.log("P2 strikes: "+I),"Y"===k&&Y===A[1]&&H>0&&s>0&&H++,G()}}function N(){let e,t=0,n=S;Y===A[0]?(n=L,e="Player One"):Y===A[1]&&(n=S,e="Player Two");for(let e=0;e<n.length;e++)0===n[e].coordinates.length&&++t;console.log(t),5===t&&alert(e+" has won!")}function D(){if(P.length>4)if("Y"===k){alert("Computer is choosing battle positions"),C=1;let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white",document.getElementById("ingamebuttons").style.display="block",document.getElementById("positionPara").style.display="none",document.getElementById("Chnge").style.display="none";T()}else{C=1,G();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",D),e[t].style.backgroundColor="white",document.getElementById("ingamebuttons").style.display="block",document.getElementById("positionPara").style.display="none",document.getElementById("Chnge").style.display="none";T()}}function T(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",q),e[t].style.backgroundColor="white",e[t].removeEventListener("mouseover",u),e[t].removeEventListener("mouseleave",g),e[t].addEventListener("mouseover",y),e[t].addEventListener("mouseleave",p)}console.log("OIL"),console.log("Nnnnn"),console.log("INRST");const O={p1carrierShip:function(){let e=document.querySelectorAll(".cell");C=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",s),e[t].addEventListener("click",O.p1battleShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)},p1battleShip:function(){if(P.length>0){let e=document.querySelectorAll(".cell");C=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",s),e[t].removeEventListener("click",O.p1battleShip),e[t].addEventListener("click",a),e[t].addEventListener("click",O.p1cruiserShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1cruiserShip:function(){if(P.length>1){console.log(P);let e=document.querySelectorAll(".cell");C=4;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",a),e[t].removeEventListener("click",O.p1cruiserShip),e[t].addEventListener("click",i),e[t].addEventListener("click",O.p1submarineShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1submarineShip:function(){if(P.length>2){let e=document.querySelectorAll(".cell");C=5;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",O.p1submarineShip),e[t].addEventListener("click",c),e[t].addEventListener("click",O.p1destroyerShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1destroyerShip:function(){if(P.length>3){let e=document.querySelectorAll(".cell");C=6;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",O.p1destroyerShip),e[t].addEventListener("click",d),Y===A[1]?e[t].addEventListener("click",D):Y===A[0]&&e[t].addEventListener("click",O.loop),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},loop:function(){if(P.length>4)if("Y"===k){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",O.loop),e[t].style.backgroundColor="white";E.selectCarrier()}else{G();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",O.loop),e[t].style.backgroundColor="white";O.p1carrierShip()}}};v.playerSelect(),t.createGameboard(),O.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBRzZHLG9CQUFvQixRQUFRQyxFQUFnQk0sTUFDckQzRCxFQUFNekQsR0FBR2pCLE1BQU13RCxnQkFBa0IsUUFFN0N1RSxFQUFnQkMsbUJBYWJqRCxFQUFZYyxlQUNYckcsRUFBZ0J3QixrQkFDcEIrRyxFQUFnQkMsaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvY2hvb3NlQ29vcmRpbmF0ZXMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvb3ZlckxhcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9zaGlwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvY29tcHV0ZXJBSS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IEdhbWVib2FyZE1vZHVsZSA9ICgoKSA9PiB7XG5cbiAgICBsZXQgYm9yZCA9IFwic29saWQgYmxhY2sgMnB4XCI7XG4gICAgbGV0IG5vYm9yZCA9IFwibm9uZVwiO1xuICAgIFxuICAgIFxuICAgIGNvbnN0IGNyZWF0ZUdyaWRzID0gKGx0cixubyxpZCkgPT57XG4gICAgbGV0IGdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgZ3JpZC5zdHlsZS5wYWRkaW5nID0gXCIxMHB4XCI7XG4gICAgLy90cnlpbmcgdG8gdGFrZSBvdXQgdGhlIGJvcmRlcmluZyBvZiB0aGUgbm90IGluIHBsYXkgY2VsbHNcbiAgICBpZihpZD09PSAwKXtncmlkLnN0eWxlLmJvcmRlcj1ub2JvcmR9XG4gICAgZWxzZSBpZihubz09PTApe2dyaWQuc3R5bGUuYm9yZGVyID0gbm9ib3JkO31cbiAgICBlbHNle2dyaWQuc3R5bGUuYm9yZGVyID0gYm9yZDt9XG4gICAgXG4gICAgXG4gICAgZ3JpZC50ZXh0Q29udGVudCA9IGlkO1xuICAgIGdyaWQuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICBpZihpZD09PTAgJiYgbHRyPT09XCIwXCIpe2dyaWQudGV4dENvbnRlbnQgPSBub31cbiAgICBlbHNlIGlmKG5vPT09MCAmJiBsdHIhPVwiMFwiKXtncmlkLnRleHRDb250ZW50ID0gbHRyfVxuICAgIGdyaWQuZGF0YXNldC5oaXQgPSBcIk5vXCJcbiAgICBncmlkLmRhdGFzZXQuUDFoaXQ9XCJOXCJcbiAgICBncmlkLmRhdGFzZXQuUDJoaXQ9XCJOXCJcbiAgICBsZXQgbGV0dGVyID0gZ3JpZC5kYXRhc2V0LmxldHRlciA9IGx0cjtcbiAgICBsZXQgbnVtYmVyID0gZ3JpZC5kYXRhc2V0Lm51bWJlciA9IG5vO1xuICAgIC8vc2hvd3Mgd2hpY2ggcGxheWVyIG93bnMgdGhlIGNlbGwvL1xuICAgIC8vbGV0IHBsYXllciA9IGdyaWQuZGF0YXNldC5wbGF5ZXJjZWxsID0gXCJwbGF5ZXJcIitwbHlyO1xuICAgIFxuICAgIC8vY3JlYXRpbmcgYSBjbGFzcyBmb3IgZWFjaCBncmlkIHNvIHdlIGNhbiBhY2Nlc3MgaXQgZnJvbSB0aGUgZnVuY3Rpb25zXG4gICAgZ3JpZC5jbGFzc0xpc3QuYWRkKFwiY2VsbFwiKTtcbiAgICAvL2NyZWF0aW5nIGFuIGlkIHRoYXQgbWF0Y2hlcyBpdHMgY29vcmRpbmF0ZXNcbiAgICBncmlkLnNldEF0dHJpYnV0ZSgnaWQnLGdyaWQuZGF0YXNldC5sZXR0ZXIrZ3JpZC5kYXRhc2V0Lm51bWJlcilcbiAgICBcbiAgICAgICAgIFxuICAgIGxldCBnYW1lYm9hcmQgPSAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lYm9hcmQxXCIpO1xuICAgIFxuICAgIGdhbWVib2FyZC5hcHBlbmRDaGlsZChncmlkKTtcbiAgICBcbiAgICB9XG4gICAgXG4gICAgLy9jcmVhdGUgdGhlIHdob2xlIGdyaWQgd2l0aCBiZWxvdyBmdW5jdGlvblxuICAgIGNvbnN0IGNyZWF0ZUdhbWVib2FyZCA9ICgpID0+e1xuICAgIFxuICAgIGZvcihsZXQgaT0wO2k8MTE7aSsrKXtcbiAgICAgICAgXG4gICAgXG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIjBcIiwwLGkpXG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkFcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQlwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJDXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkRcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJGXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkdcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSFwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJJXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkpcIixpKTtcbiAgICBcbiAgICB9XG4gICAgfVxuICAgIHJldHVybiB7Y3JlYXRlR3JpZHMsY3JlYXRlR2FtZWJvYXJkfVxuICAgIH0pKCk7XG5cbiAgICBleHBvcnR7R2FtZWJvYXJkTW9kdWxlfTsiLCIvL3RoZSBjaG9vb3NlIGNvb3JkaW5hdGVzIGZ1bmN0aW9uXG5mdW5jdGlvbiBjaG9vc2VDcmRudHMoU3RydEx0dHJzLFN0cnRObyxsZW5ndGgsVm9ySCl7XG4gICAgbGV0IGNvb3JkID0gW107XG4gICAgXG4gICAgaWYoVm9ySD09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLWxlbmd0aDtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihTdHJ0Tm8+b3Zlcil7U3RydE5vID0gb3Zlcn1cbiAgICAvL2lmKFZvckg9PT1cIlZlcnRpY2FsXCIpe30gV2lsbCBiZSB0cmVhdGluZyB0aGlzIHRlc3RpbmcgYXMgY29tcGxldGUgdmVydGljYWwgcG9zaXRpb25pbmdcbiAgICBmb3IobGV0IGk9MTtpPGxlbmd0aCsxO2krKyl7XG4gICAgICAgIGNvb3JkLnB1c2goU3RydEx0dHJzICsgU3RydE5vKyspXG4gICAgfVxufVxuXG5lbHNlIGlmKFZvckg9PT1cIkhcIil7XG4gICAgbGV0IEx0ck51bWJlciA9IFN0cnRMdHRycy5jaGFyQ29kZUF0KDApXG4gICAgbGV0IG92ZXIgPSA3NS1sZW5ndGg7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgY29uc29sZS5sb2coTHRyTnVtYmVyKVxuICAgIGNvbnNvbGUubG9nKG92ZXIpXG4gICAgXG4gICAgZm9yKGxldCBpPTE7aTxsZW5ndGgrMTtpKyspe1xuICAgICAgICBjb29yZC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgU3RydE5vKVxuICAgIH1cblxufVxuICAgIHJldHVybiBjb29yZDtcblxufVxuXG5leHBvcnQge2Nob29zZUNyZG50c30iLCIvL2NvZGUgZm9yIGlkZW50aWZ5aW5nIHdoZW4gdGhlIGNob3NlbiBjb29yZGluYXRlcyBvdmVybGFwIFxuLy93aXRoIGNvb3JkaW5hdGVzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWRcblxuXG5cblxuXG5mdW5jdGlvbiBvdmVyTGFwKGEsYil7XG4vL1BsYz0gcGxheWVyIGNvb3JkaW5hdGVzICAgIFxubGV0IHBsYz1hO1xuLy9jcmQgaXMgdGhlIG5ldyBjb29yZGluYXRlc1xubGV0IGNyZCA9Yjtcbi8vdmFyaWFibGUgdG8gcmV0dXJuXG5sZXQgb3ZybGFwPTA7XG5cbmZvcihsZXQgej0wO3o8Y3JkLmxlbmd0aDt6Kyspe1xuZm9yKGxldCBwPTA7cDxwbGMubGVuZ3RoO3ArKyl7XG4gICAgZm9yKGxldCBpPTA7aTxwbGNbcF0uY29vcmRpbmF0ZXMubGVuZ3RoO2krKyl7XG4gICAgaWYocGxjW3BdLmNvb3JkaW5hdGVzW2ldPT09Y3JkW3pdKXtvdnJsYXArK31cbiAgICBcbn1cbn1cbn1cbmlmKG92cmxhcD4wKXtvdnJsYXA9XCJZXCJ9XG4gICAgZWxzZXtvdnJsYXA9XCJOXCJ9XG5yZXR1cm4gb3ZybGFwXG59XG5cbi8qXG5cbi8vc2Vjb25kIGF0dGVtcHQgZHVtYmluZyBpdCBkb3duXG5mdW5jdGlvbiBvdmVyTGFwKGEsYil7XG4gICAgLy9QbGM9IHBsYXllciBjb29yZGluYXRlcyAgICBcbiAgICBsZXQgcGxjPWE7XG4gICAgLy9jcmQgaXMgdGhlIG5ldyBjb29yZGluYXRlc1xuICAgIGxldCBjcmQgPWI7XG4gICAgLy92YXJpYWJsZSB0byByZXR1cm5cbiAgICBsZXQgb3ZybGFwID0wO1xuICAgIFxuICAgIGZvcihsZXQgcD0wO3A8cGxjLmxlbmd0aDtwKyspe1xuICAgIGZvcihsZXQgej0wO3o8Y3JkLmxlbmd0aDt6Kyspe1xuICAgICAgICBpZihwbGNbcF09PT1jcmRbel0pe292cmxhcCsrfVxuICAgICAgICBcbiAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmKG92cmxhcD4wKXtvdnJsYXA9XCJZXCJ9XG4gICAgZWxzZXtvdnJsYXA9XCJOXCJ9XG4gICAgcmV0dXJuIG92cmxhcFxuICAgIH1cbiAgICAqL1xuXG5leHBvcnQge292ZXJMYXB9IiwiaW1wb3J0e2NvbXBBaXJlY29yZCxzbWFydENvdW50ZXIsY2lwLHBpcCxkaXJlY3Rpb24scGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwbGF5ZXJCYXNlfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0e2Nob29zZUNyZG50c30gZnJvbSAnLi9jaG9vc2VDb29yZGluYXRlcydcbmltcG9ydHtvdmVyTGFwfSBmcm9tICcuL292ZXJMYXAnXG5cblxuXG5mdW5jdGlvbiBzaGlwZmFjdG9yeShuYW1lLGNvb3JkaW5hdGVzKXtcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy5jb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzXG4gICAgdGhpcy5oaXRTaGlwID0gKGhpdCk9PnthbGVydChcIlN0cnVjayB0aGUgXCIgKyBuYW1lICsgXCIgc2hpcFwiKVxuICAgIGlmKGNpcD09PVwiWVwiJiZwaXA9PT1wbGF5ZXJCYXNlWzFdKXthbGVydChcIndlbGwgZG9uZSBjb21wdXRlclwiKVxuICAgICBhbGVydChoaXQrXCIgaGFzIGJlZW4gaGl0LlwiKVxuICAgIGZvcihsZXQgaT0wO2k8Y29tcEFpcmVjb3JkLmxlbmd0aDtpKyspe1xuICAgICAgaWYobmFtZT09PWNvbXBBaXJlY29yZFtpXS5uYW1lKXtjb21wQWlyZWNvcmRbaV0uY29vcmRpbmF0ZXMucHVzaChoaXQpfVxuICAgIH1cbiAgICAgIGlmKHNtYXJ0Q291bnRlcj09PTApe3NtYXJ0Q291bnRlcisrfVxuICAgICAgZWxzZSBpZihzbWFydENvdW50ZXI+MCl7c21hcnRDb3VudGVyO31cblxuICAgICAgXG4gIFxuICB9XG59XG4gICAgdGhpcy5pc1N1bmsgPSAoKSA9PntpZihjb29yZGluYXRlcy5sZW5ndGg9PT0wKXthbGVydChcIlN1bmsgdGhlIFwiKyBuYW1lICtcIiBzaGlwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICBcbiAgfVxuXG4gIGxldCBjb29yZGlkO1xuXG5cbiAgY29uc3QgY2FycmllciA9ICh0KSA9PnsgICAgXG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkNhcnJpZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKG51bWJlcj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2V7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDsgY29vcmRpZCA9IFwicDFjXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkOyBjb29yZGlkID0gXCJwMmNcIn1cbiBcbiAgICBQQy5wdXNoKGd1bm4pO1xuICBcbiAgICAgIFxuICAgIH1cbiAgICByZXR1cm4gUEM7XG4gICAgfVxuXG4gIGNvbnN0IGJhdHRsZXNoaXAgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkJhdHRsZXNoaXBcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKG51bWJlcj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2V7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDsgY29vcmRpZCA9IFwicDFjXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkOyBjb29yZGlkID0gXCJwMmNcIn1cbiAgICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKSk9PT1cIllcIil7YWxlcnQoXCJUaGVzZSB0aWxlcyBoYXZlIGFscmVhZHkgYmVlbiBhc3NpZ25lZCwgcGxlYXNlIGNob29zZSBkaWZmZXJlbnQgdGlsZXNcIil9XG4gIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgXG5cbiAgICBcbiAgfX1cbiAgICByZXR1cm4gUEM7XG4gIH1cbiAgY29uc3QgY3J1aXNlciA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQ3J1aXNlclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDQsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgIFxuXG4gICAgXG4gICAgfX1cbiAgICByZXR1cm4gUEM7XG4gIH1cbiAgY29uc3Qgc3VibWFyaW5lID0gKHQpID0+e1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJTdWJtYXJpbmVcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw1LGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKG51bWJlcj09PVwiMFwiKXtjb25zb2xlLmxvZyhcIlN0YXkgaW4gdGhlIGdyaWQuXCIpfVxuICAgIGVsc2V7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQQyA9IHBsYXllcjFjb29yZDsgY29vcmRpZCA9IFwicDFjXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMmNvb3JkOyBjb29yZGlkID0gXCJwMmNcIn1cbiAgICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDUsZGlyZWN0aW9uKSk9PT1cIllcIil7YWxlcnQoXCJUaGVzZSB0aWxlcyBoYXZlIGFscmVhZHkgYmVlbiBhc3NpZ25lZCwgcGxlYXNlIGNob29zZSBkaWZmZXJlbnQgdGlsZXNcIil9XG4gICAgZWxzZXsgXG4gICAgUEMucHVzaChndW5uKTtcbiAgICBcbiAgICBcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBkZXN0cm95ZXIgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkRlc3Ryb3llclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDYsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuXG4gICAgXG4gICAgfX1cbiAgICByZXR1cm4gUEM7XG4gIH1cblxuICBleHBvcnQge3NoaXBmYWN0b3J5LGNhcnJpZXIsYmF0dGxlc2hpcCxjcnVpc2VyLHN1Ym1hcmluZSxkZXN0cm95ZXJ9IiwiaW1wb3J0IHtzcSxkaXJlY3Rpb24scGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwaXAscGxheWVyMXN0cmlrZXMscGxheWVyMnN0cmlrZXMscGxheWVyQmFzZSxQaGl0fSBmcm9tICcuL2luZGV4J1xuY29uc3QgZG9tTW9kdWxlID0gKCgpID0+e1xuLy9mdW5jdGlvbiBmb3IgaGlnaGxpZ2h0aW5nIHNxdWFyZXMgd2hlbiBob3ZlcmluZ1xuZnVuY3Rpb24gaG92ZXIodCl7XG5sZXQgbnVtYiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xubGV0IGxldHRlcnIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbmxldCBjb2xvciA9IFwiYmx1ZVwiO1xuXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1zcTtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihudW1iPm92ZXIpe251bWIgPSBvdmVyfVxuICAgIGlmKG51bWI9PT1cIjBcIil7Y29sb3IgPSBcIndoaXRlXCJ9XG4gICAgZWxzZXtjb2xvcj1cImdyZXlcIn1cbmZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcn19XG5lbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtcbiAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICBsZXQgb3ZlciA9IDc1LXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKEx0ck51bWJlcj5vdmVyKXtMdHJOdW1iZXIgPSBvdmVyfVxuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIG51bWIpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZXlcIn1cbn1cbn1cblxuLy9mdW5jdGlvbiBmb3IgcmV0dXJuaW5nIHNxdWFyZSBjb2xvciB0byB3aGl0ZSBhZnRlciBsZWF2aW5nXG5mdW5jdGlvbiBsZWF2ZSh0KXt0LnRhcmdldC5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwiXG5sZXQgbnVtYiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xubGV0IGxldHRlcnIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbmxldCBoaXQgPSBsZXR0ZXJyK251bWI7XG5jb25zb2xlLmxvZyhoaXQpO1xuXG5pZihkaXJlY3Rpb249PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1zcTtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihudW1iPm92ZXIpe251bWIgPSBvdmVyfVxuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXR0ZXJyKygrbnVtYitpKSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwifX1cbiAgICBlbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtcbiAgICAgICAgbGV0IEx0ck51bWJlciA9bGV0dGVyci5jaGFyQ29kZUF0KDApXG4gICAgICAgIGxldCBvdmVyID0gNzUtc3E7XG4gICAgICAgIFxuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKEx0ck51bWJlcj5vdmVyKXtMdHJOdW1iZXIgPSBvdmVyfVxuICAgICAgICBmb3IobGV0IGk9MDtpPHNxO2krKyl7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgbnVtYikuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIn1cbiAgICB9XG5cbiAgICBcbiAgICB9XG5cbiAgICBcbiAgIFxuICAgICAgLy9mdW5jdGlvbiB0aGF0IGFsbG93cyB1cyB0byB1cGRhdGUgdGlsZXMgd2l0aG91dCBjYXJyeWluZyBwcmV2aW91cyB0aWxlcyBvdmVyXG4gICAgICBmdW5jdGlvbiB3aGl0ZU91dCgpe1xuICAgICAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjt9XG4gICAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gYXR0YWNrQm9hcmQoKXtcbiAgICAgICAgbGV0IHN0cmlrZSA9IHBsYXllcjFzdHJpa2VzO1xuICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe3N0cmlrZT1wbGF5ZXIxc3RyaWtlc31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7c3RyaWtlPXBsYXllcjJzdHJpa2VzfSAgICBcbiAgICBmb3IobGV0IGk9MDtpPHN0cmlrZS5sZW5ndGg7aSsrKXtcbiAgICAgICAgXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0cmlrZVtpXSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwbGF5ZXJCb2FyZCgpe1xuICAgICAgICBsZXQgc2hvdyA9IHBsYXllcjFjb29yZDtcbiAgICAgICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtzaG93PXBsYXllcjFjb29yZDtjb25zb2xlLmxvZyhzaG93KX1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7c2hvdz1wbGF5ZXIyY29vcmQ7IGNvbnNvbGUubG9nKHNob3cpfSBcbiAgICBmb3IobGV0IGk9MDtpPHNob3cubGVuZ3RoO2krKyl7XG4gICAgICAgIGZvcihsZXQgaWk9MDtpaTxzaG93W2ldLmNvb3JkaW5hdGVzLmxlbmd0aDtpaSsrKXtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2hvd1tpXS5jb29yZGluYXRlc1tpaV0pLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZXlcIjtcbiAgICAgICAgICAgIFxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgICAgXG4gICAgfVxuXG4gICAgLy9mdW5jdGlvbnMgZm9yIHdoZW4gdGhlIGhpdCBmdW5jdGlvbiBpcyBpbiBwbGF5XG4gICAgZnVuY3Rpb24gaGl0SG92ZXIodCl7XG4gICAgICAgIGlmKHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyPT09XCIwXCIpXG57dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIn1lbHNle3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInJlZFwifVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGl0TGVhdmUodCl7XG4gICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAxaGl0fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDJoaXR9ICBcbiAgICBcbiAgICAgICAgaWYoUGhpdD09PVwiWVwiKXt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJyZWRcIn1cbiAgICAgICAgZWxzZSBpZihQaGl0PT09XCJOXCIpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIn1cbiAgICB9XG5cbnJldHVybiB7aG92ZXIsbGVhdmUsYXR0YWNrQm9hcmQsd2hpdGVPdXQsaGl0SG92ZXIsaGl0TGVhdmUscGxheWVyQm9hcmR9XG59KSgpO1xuXG5cbmV4cG9ydHtkb21Nb2R1bGV9IiwiaW1wb3J0IHtjaXAsc2VsZWN0aW9uTW9kdWxlLGhpdH0gZnJvbSAnLi9pbmRleCdcblxuY29uc3QgbW9kYWxNb2R1bGUgPSAoKCkgPT57XG4vLyBHZXQgdGhlIG1vZGFsXG52YXIgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15TW9kYWxcIik7XG5cbi8vIEdldCB0aGUgYnV0dG9uIHRoYXQgb3BlbnMgdGhlIG1vZGFsXG52YXIgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUJ0blwiKTtcblxuLy9nZXQgdGhlIGNvbnRlbnQgb2YgdGhlIHBhcmFncmFwaFxubGV0IHBhcmExID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXJhMVwiKTtcbmxldCBwYXJhMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFyYTJcIilcblxuLy8gR2V0IHRoZSA8c3Bhbj4gZWxlbWVudCB0aGF0IGNsb3NlcyB0aGUgbW9kYWxcbnZhciBzcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlXCIpWzBdO1xuXG4vL3BsYXllciBzZWxlY3QgYnV0dG9uc1xubGV0IHBzYnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiUFNidXR0b25zXCIpO1xucHNidG5zLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuXG4vL2NvbXB1dGVyIGhpdCBidXR0b25cbmxldCBjb21wSGl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wSGl0XCIpO1xuY29tcEhpdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cblxuLy8gV2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGJ1dHRvbiwgY2xvc2VzIHRoZSBtb2RhbFxuYnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiTm9uZVwiO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKCl7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG59XG5cblxuXG4vL3BsYXllciBzZWxlY3QgYnV0dG9uc1xubGV0IGZybmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZybmRcIik7XG5sZXQgY29tcCA9ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbXBcIik7XG5cblxuZnVuY3Rpb24gc2hvd01vZHVsZSgpe1xuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgcGFyYTEudGV4dENvbnRlbnQgPSBcIkNIQU5HRSBQTEFDRVMhXCJcbiAgICBwYXJhMi50ZXh0Q29udGVudCA9IFwiQ2xpY2sgYnV0dG9uIHdoZW4gcmVhZHkuXCJcbiAgICBwc2J0bnMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG5cbiBcbn1cblxuZnVuY3Rpb24gcGxheWVyU2VsZWN0KCl7XG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgcGFyYTEudGV4dENvbnRlbnQgPSBcIkFyZSB5b3UgcGxheWluZyB3aXRoIGEgZnJpZW5kIG9yIGFnYWluc3Qgb3VyIEFJP1wiXG4gICAgYnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgIHBzYnRucy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgZnJuZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcbiAgICAgIGNpcCA9IFwiTlwiXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBcblxuICAgIH0pXG5cbiAgIGNvbXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XG4gICAgICBjaXAgPSBcIllcIlxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgXG5cbiAgICB9KVxufVxuXG5cbmZ1bmN0aW9uIGNvbXBIaXRNb2RhbCgpe1xuXG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIHBhcmExLnRleHRDb250ZW50ID0gXCJQbGVhc2UgY2xpY2sgdGhlIGJ1dHRvbiBiZWxvdyB0byBhY3RpdmF0ZSB0aGUgQUkgY2hvaWNlIVwiXG4gIGJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIGNvbXBIaXQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgcHNidG5zLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBjb21wSGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxoaXQpO1xuICAgIGNvbXBIaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNsb3NlTW9kYWwpXG59XG5cbnJldHVybiB7c2hvd01vZHVsZSxwbGF5ZXJTZWxlY3QsY29tcEhpdE1vZGFsLGNsb3NlTW9kYWx9XG59KSgpO1xuXG5leHBvcnQge21vZGFsTW9kdWxlfVxuIiwiaW1wb3J0IHsgY2hvb3NlQ3JkbnRzIH0gZnJvbSBcIi4vY2hvb3NlQ29vcmRpbmF0ZXNcIjtcbmltcG9ydCB7IGNvbXBBaXJlY29yZCxyTm8sc21hcnRDb3VudGVyLHBsYXllcjFjb29yZCxwbGF5ZXIyY29vcmQsc3RhcnRHYW1lLHRhcmdldEFycmF5eSB9IGZyb20gXCIuL2luZGV4XCJcbmltcG9ydCB7IG92ZXJMYXAgfSBmcm9tIFwiLi9vdmVyTGFwXCI7XG5pbXBvcnQgeyBzaGlwZmFjdG9yeSB9IGZyb20gXCIuL3NoaXBzXCI7XG5cblxuLyogXG5UaGUgY29tcHV0ZXIgQUkgbmVlZHMgdG8gYmUgYWJsZSB0byByYW5kb21seSBzZWxlY3QgaXRzJyBzaGlwIHBvc2l0aW9ucy5cblJhbmRvbWx5IHNlbGVjdCBpdHMnIGhpdCBwb2ludHMuXG5cbnJhbmRvbSBudW1iZXIgYmV0d2VlbiBvbmUgYW5kIHRlblxuTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwKSArIDEpO1xuXG5BIG1vcmUgYWR2YW5jZWQgQUkgd291bGQgdGhlbiBiZSBhYmxlIHRvIGhpdCBhZGphY2VudCBncmlkcyB3aGVuIGl0IGRldGVjdHMgYSBoaXQuXG4qL1xuXG5cbi8vV2UgbmVlZCB0aGUgY29tcHV0ZXIgdG8gZ2VuZXJhdGUgaXRzIGNvb3JkaW5hdGVzIHJhbmRvbWx5IHRoZW4gc3RhcnQgdGhlIGdhbWUgXG5cbmNvbnN0IGNvbXB1dGVyQUkgPSAoKCkgPT57XG5cbiAgXG5cbiAgLy9Qcm9kdWNlcyB0aGUgdGFyZ2V0IGFycmF5IHRoYXQgdGhlIGNvbXB1dGVyIHdpbGwgc2VsZWN0IGNvb3JkaW5hdGVzIGZyb21cbiAgZnVuY3Rpb24gdGFyZ2V0QXJyYXkoKXtcbiAgICAgIGZvcihsZXQgaT02NTtpPDc1O2krKyl7XG4gICAgICAgIC8vY2hhbmdlIGJhY2sgdG8gMTAgYmVsb3dcbiAgICAgICAgICBmb3IobGV0IG89MTtvPDM7bysrKXtcbiAgICAgICAgICAgICAgdGFyZ2V0QXJyYXl5LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShpKSArIG8pXG4gICAgICAgICAgfVxuICAgICAgfVxuICB9XG4gIFxuXG5cblxuZnVuY3Rpb24gcmFuZG9tSW50RnJvbUludGVydmFsKG1pbiwgbWF4KSB7IC8vIG1pbiBhbmQgbWF4IGluY2x1ZGVkIFxuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKVxufVxuXG5mdW5jdGlvbiBoaXQoKXtcbiAgY29uc29sZS5sb2coc21hcnRDb3VudGVyKVxuICBjb25zb2xlLmxvZyhjb21wQWlyZWNvcmQpXG5cbiAgICAgICAgIGlmKHNtYXJ0Q291bnRlcj09PTEpe1xuICAgICAgICAgICByTm87XG4gICAgICAgICB9XG4gICAgICAgICBlbHNlIGlmKHNtYXJ0Q291bnRlcj09PTIpe3JObys3fVxuXG4gICAgICAgICBlbHNle1xuICAgICAgICAgIFxuICAgICAgICAgck5vID0gcmFuZG9tSW50RnJvbUludGVydmFsKDAsIHRhcmdldEFycmF5eS5sZW5ndGgtMSl9XG4gICAgICAgICBsZXQgZmlyZSA9IHRhcmdldEFycmF5eVtyTm9dO1xuICAgICAgICAgdGFyZ2V0QXJyYXl5LnNwbGljZShyTm8sMSlcbiAgICAgICAgY29uc29sZS5sb2coXCJSYW5kb20gbm86IFwiK3JObylcbiAgICAgICAgIGNvbnNvbGUubG9nKFwiTGVuZ3RoOiBcIit0YXJnZXRBcnJheXkubGVuZ3RoKVxuICAgICAgICAgY29uc29sZS5sb2codGFyZ2V0QXJyYXl5KVxuICAgICAgICAgcmV0dXJuIGZpcmVcblxufVxuXG4vL3dvcmsgY2xvc2VseSB3aXRoIHNoaXBzLmpzIHRvIGNyYWZ0IHRoaXNcbmZ1bmN0aW9uIHNlbGVjdENhcnJpZXIoKXtcbiAgICAvL2xldHRlciBuZWVkcyB0byBiZSBtb2RpZmllZCB0byBjaHVybiBvdXQgbGV0dGVyIGJldHdlZW4gYSBhbmQgalxuICAgIGxldCByYW5kb21ObyA9IHJhbmRvbUludEZyb21JbnRlcnZhbCg2NSw3NCk7XG4gICAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUocmFuZG9tTm8pO1xuICAgIGxldCBudW1iZXIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApICsgMSk7XG4gICAgbGV0IGRpciA9IHJhbmRvbUludEZyb21JbnRlcnZhbCgxLDIpO1xuICAgIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICAgIGlmKGRpcj09PTEpe2RpcmVjdGlvbj1cIlZcIn1lbHNle2RpcmVjdGlvbj1cIkhcIn1cbiAgICBsZXQgUEMgPSBwbGF5ZXIyY29vcmQ7XG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDYXJyaWVyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKT09PVwiWVwiKXtjb21wdXRlckFJLnNlbGVjdENhcnJpZXIoKX1cbiAgZWxzZXsgXG4gICAgUEMucHVzaChndW5uKTtcbiAgICAvL3Rlc3RpbmcgZmlyc3RcbiAgICBjb21wdXRlckFJLnNlbGVjdEJhdHRsZXNoaXAoKTtcbiAgICBcbn1cbn1cblxuXG5mdW5jdGlvbiBzZWxlY3RCYXR0bGVzaGlwKCl7XG4gIC8vbGV0dGVyIG5lZWRzIHRvIGJlIG1vZGlmaWVkIHRvIGNodXJuIG91dCBsZXR0ZXIgYmV0d2VlbiBhIGFuZCBqXG4gIGxldCByYW5kb21ObyA9IHJhbmRvbUludEZyb21JbnRlcnZhbCg2NSw3NCk7XG4gIGxldCBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHJhbmRvbU5vKTtcbiAgbGV0IG51bWJlciA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxKTtcbiAgbGV0IGRpciA9IHJhbmRvbUludEZyb21JbnRlcnZhbCgxLDIpO1xuICBsZXQgZGlyZWN0aW9uID0gXCJWXCJcbiAgaWYoZGlyPT09MSl7ZGlyZWN0aW9uPVwiVlwifWVsc2V7ZGlyZWN0aW9uPVwiSFwifVxuICBsZXQgUEMgPSBwbGF5ZXIyY29vcmQ7XG4gIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQmF0dGxlc2hpcFwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKSlcbiAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbikpPT09XCJZXCIpe2NvbXB1dGVyQUkuc2VsZWN0QmF0dGxlc2hpcCgpfVxuZWxzZXsgXG4gIFBDLnB1c2goZ3Vubik7XG4gIC8vdGVzdGluZyBmaXJzdFxuICBjb21wdXRlckFJLnNlbGVjdENydWlzZXIoKTtcbiAgXG4gIFxufVxufVxuXG5cbmZ1bmN0aW9uIHNlbGVjdENydWlzZXIoKXtcbiAgLy9sZXR0ZXIgbmVlZHMgdG8gYmUgbW9kaWZpZWQgdG8gY2h1cm4gb3V0IGxldHRlciBiZXR3ZWVuIGEgYW5kIGpcbiAgbGV0IHJhbmRvbU5vID0gcmFuZG9tSW50RnJvbUludGVydmFsKDY1LDc0KTtcbiAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUocmFuZG9tTm8pO1xuICBsZXQgbnVtYmVyID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwKSArIDEpO1xuICBsZXQgZGlyID0gcmFuZG9tSW50RnJvbUludGVydmFsKDEsMik7XG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICBpZihkaXI9PT0xKXtkaXJlY3Rpb249XCJWXCJ9ZWxzZXtkaXJlY3Rpb249XCJIXCJ9XG4gIGxldCBQQyA9IHBsYXllcjJjb29yZDtcbiAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDcnVpc2VyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pKVxuICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDQsZGlyZWN0aW9uKSk9PT1cIllcIil7Y29tcHV0ZXJBSS5zZWxlY3RDcnVpc2VyKCl9XG5lbHNleyBcbiAgUEMucHVzaChndW5uKTtcbiAgLy90ZXN0aW5nIGZpcnN0XG4gIGNvbXB1dGVyQUkuc2VsZWN0U3VibWFyaW5lKCk7XG4gIFxufVxufVxuXG5cbmZ1bmN0aW9uIHNlbGVjdFN1Ym1hcmluZSgpe1xuICAvL2xldHRlciBuZWVkcyB0byBiZSBtb2RpZmllZCB0byBjaHVybiBvdXQgbGV0dGVyIGJldHdlZW4gYSBhbmQgalxuICBsZXQgcmFuZG9tTm8gPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoNjUsNzQpO1xuICBsZXQgbGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShyYW5kb21Obyk7XG4gIGxldCBudW1iZXIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApICsgMSk7XG4gIGxldCBkaXIgPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoMSwyKTtcbiAgbGV0IGRpcmVjdGlvbiA9IFwiVlwiXG4gIGlmKGRpcj09PTEpe2RpcmVjdGlvbj1cIlZcIn1lbHNle2RpcmVjdGlvbj1cIkhcIn1cbiAgbGV0IFBDID0gcGxheWVyMmNvb3JkO1xuICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIlN1Ym1hcmluZVwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDUsZGlyZWN0aW9uKSlcbiAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw1LGRpcmVjdGlvbikpPT09XCJZXCIpe2NvbXB1dGVyQUkuc2VsZWN0U3VibWFyaW5lKCl9XG5lbHNleyBcbiAgUEMucHVzaChndW5uKTtcbiAgLy90ZXN0aW5nIGZpcnN0XG4gIGNvbXB1dGVyQUkuc2VsZWN0RGVzdHJveWVyKCk7XG4gIFxuICBcbn1cbn1cblxuXG5mdW5jdGlvbiBzZWxlY3REZXN0cm95ZXIoKXtcbiAgLy9sZXR0ZXIgbmVlZHMgdG8gYmUgbW9kaWZpZWQgdG8gY2h1cm4gb3V0IGxldHRlciBiZXR3ZWVuIGEgYW5kIGpcbiAgbGV0IHJhbmRvbU5vID0gcmFuZG9tSW50RnJvbUludGVydmFsKDY1LDc0KTtcbiAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUocmFuZG9tTm8pO1xuICBsZXQgbnVtYmVyID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwKSArIDEpO1xuICBsZXQgZGlyID0gcmFuZG9tSW50RnJvbUludGVydmFsKDEsMik7XG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICBpZihkaXI9PT0xKXtkaXJlY3Rpb249XCJWXCJ9ZWxzZXtkaXJlY3Rpb249XCJIXCJ9XG4gIGxldCBQQyA9IHBsYXllcjJjb29yZDtcbiAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJEZXN0cm95ZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw2LGRpcmVjdGlvbikpXG4gIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pKT09PVwiWVwiKXtjb21wdXRlckFJLnNlbGVjdERlc3Ryb3llcigpfVxuZWxzZXsgXG4gIFBDLnB1c2goZ3Vubik7XG4gIC8vdGVzdGluZyBmaXJzdFxuICBzdGFydEdhbWUoKTsgIFxuICBcbn1cbn1cbnJldHVybiB7aGl0LHNlbGVjdENhcnJpZXIsc2VsZWN0QmF0dGxlc2hpcCxzZWxlY3RDcnVpc2VyLHNlbGVjdFN1Ym1hcmluZSxzZWxlY3REZXN0cm95ZXIscmFuZG9tSW50RnJvbUludGVydmFsLHRhcmdldEFycmF5fVxufSkoKTtcblxuXG5leHBvcnQge2NvbXB1dGVyQUl9IiwiaW1wb3J0IHtHYW1lYm9hcmRNb2R1bGV9IGZyb20gJy4vZ2FtZWJvYXJkJ1xuaW1wb3J0IHtjYXJyaWVyLGJhdHRsZXNoaXAsY3J1aXNlcixzdWJtYXJpbmUsZGVzdHJveWVyfSBmcm9tICcuL3NoaXBzJ1xuaW1wb3J0IHtkb21Nb2R1bGV9IGZyb20gJy4vZG9tJ1xuaW1wb3J0IHttb2RhbE1vZHVsZX0gZnJvbSAnLi9tb2RhbCdcbmltcG9ydCB7Y29tcHV0ZXJBSX0gZnJvbSAnLi9jb21wdXRlckFJJ1xuXG5cbi8vY29tcHV0ZXIgaW4gcGxheVxubGV0IGNpcCA9IFwiTlwiXG4gIC8vY29vcmRpbmF0ZXMgb2YgZWFjaCBwbGF5ZXJzIHNoaXBcbiAgbGV0IHBsYXllcjFjb29yZD1bXTtcbiAgbGV0IHBsYXllcjJjb29yZD1bXTtcbiAgLy9hbW91bnQgb2Ygc3VuayBzaGlwcyBkZXRlcm1pbmluZyB3aGV0aGVyIHRoZSBnYW1lIGlzIG92ZXIgb3Igbm90XG4gIGxldCBwbGF5ZXIxU3Vua1NoaXBzPTA7XG4gIGxldCBwbGF5ZXIyU3Vua1NoaXBzPTA7XG4gIC8vY29vcmRpbmF0ZXMgb2YgZWFjaCB0aWxlIGhpdCBieSBlYWNoIHBsYXllclxuICBsZXQgcGxheWVyMXN0cmlrZXM9W11cbiAgbGV0IHBsYXllcjJzdHJpa2VzPVtdXG4gIC8vVj1WZXJ0aWNhbCwgSD1Ib3Jpem9udGFsXG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICAvL3BsYXllciBpbiBwbGF5XG4gIGxldCBwbGF5ZXJCYXNlID0gW1wicGxheWVyMVwiLFwicGxheWVyMlwiXTtcbiAgbGV0IHBpcCA9IHBsYXllckJhc2VbMF07XG4gIGxldCBQY3JkID0gcGxheWVyMWNvb3JkO1xuICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BjcmQgPSBwbGF5ZXIxY29vcmQ7fVxuICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UGNyZCA9IHBsYXllcjJjb29yZDt9XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO1xuICAvL3RoZSBzcXVhcmVzIHRoYXQgbmVlZCBoaWdobGlnaHRpbmcgZm9yIHRoZSBkb21cbiAgbGV0IHNxO1xuICBsZXQgUGhpdDtcbiAgbGV0IHRhcmdldEFycmF5eSA9IFtdO1xuICBsZXQgc21hcnRDb3VudGVyID0gMDtcbiAgbGV0IHJObztcbiAgXG4gIGNvbXB1dGVyQUkudGFyZ2V0QXJyYXkoKTtcbiAgY29uc29sZS5sb2codGFyZ2V0QXJyYXl5KVxuXG4gIGxldCBjb21wQWlyZWNvcmQ9W3tuYW1lOlwiQ2FycmllclwiLGNvb3JkaW5hdGVzOltdfSxcbiAgICAgICAgICAgICAgICAgICAge25hbWU6XCJCYXR0bGVzaGlwXCIsY29vcmRpbmF0ZXM6W119LFxuICAgICAgICAgICAgICAgICAgICB7bmFtZTpcIkNydWlzZXJcIixjb29yZGluYXRlczpbXX0sXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOlwiU3VibWFyaW5lXCIsY29vcmRpbmF0ZXM6W119LFxuICAgICAgICAgICAgICAgICAgICB7bmFtZTpcIkRlc3Ryb3llclwiLGNvb3JkaW5hdGVzOltdfV07XG4gIFxuICBcblxuXG5cblxuXG4gIFxuICBcblxuLy9idXR0b24gdG8gY2hhbmdlIHRoZSBwb3NpdGlvbmluZyBvZiB0aGUgcGxhY2VtZW50XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e2lmKGRpcmVjdGlvbj09PVwiVlwiKXtkaXJlY3Rpb249XCJIXCI7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblwiKS50ZXh0Q29udGVudD1cIkhvcml6b250YWxcIjt9ZWxzZSBpZihkaXJlY3Rpb249PT1cIkhcIil7ZGlyZWN0aW9uPVwiVlwiO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25cIikudGV4dENvbnRlbnQ9XCJWZXJ0aWNhbFwifX0pXG4vL2F0dGFja2JvYXJkIGJ1dHRvbiB0aGF0IHNob3dzIHBvc2l0aW9ucyB3aGVyZSB0aGUgcGxheWVyIGhhcyBhdHRhY2tlZFxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaHdzaGlwb3NcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywoKT0+e2RvbU1vZHVsZS53aGl0ZU91dCgpO1xuICAgIGRvbU1vZHVsZS5wbGF5ZXJCb2FyZCgpO1xuICAgIH0pXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNod3NoaXBvc1wiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywoKT0+e2RvbU1vZHVsZS53aGl0ZU91dCgpO1xuICAgIGRvbU1vZHVsZS5hdHRhY2tCb2FyZCgpO30pXG5cbiAgIC8vY29uc29sZS5sb2coXCJIRVlFRVwiKVxuLy9mdW5jdGlvbiBjaGFuZ2VzIHBsYXllclxuY29uc3QgY2hhblBsYXllciA9ICgpPT57XG4gICAgbGV0IHQ7XG5pZihjaXA9PT1cIllcIil7ICAgICAgXG4gICAgICAgIHQgPSBtb2RhbE1vZHVsZS5jb21wSGl0TW9kYWwoKTt9XG4gICAgICAgIFxuZWxzZXt0ID0gbW9kYWxNb2R1bGUuc2hvd01vZHVsZSgpO31cbnQ7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtwaXAgPSBwbGF5ZXJCYXNlWzFdO1xuICAgICAgICBQY3JkID0gcGxheWVyMmNvb3JkO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe3BpcCA9IHBsYXllckJhc2VbMF07XG4gICAgICAgIFBjcmQgPSBwbGF5ZXIxY29vcmQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICAgICAgZWxzZXtwaXAgPSBwbGF5ZXJCYXNlWzBdO1xuICAgICAgICBQY3JkPXBsYXllcjJjb29yZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgICAgICBkb21Nb2R1bGUud2hpdGVPdXQoKTtcbiAgICAgICAgZG9tTW9kdWxlLmF0dGFja0JvYXJkKCk7XG4gICAgICAgIH1cbiAgICBcbmNvbnNvbGUubG9nKFwiT0lMXCIpXG4gICAgY29uc29sZS5sb2coXCJObm5ublwiKVxuXG5cblxuLy9iZWxvdyBmdW5jdGlvbnMgbmVlZCB0byBiZSBncm91cGVkIGludG8gYSBtb2R1bGVcbmNvbnNvbGUubG9nKFwiSU5SU1RcIilcblxuZnVuY3Rpb24gaGl0KHQpe2NvbnNvbGUubG9nKHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyKTtcblxuICAgIGNvbnNvbGUubG9nKHBpcClcbiAgICBcbiAgICBsZXQgUEMgPSBwbGF5ZXIxY29vcmQ7XG4gICAgbGV0IHN0cmlrZSA9IHBsYXllcjFzdHJpa2VzO1xuICAgIGxldCBMO1xuICAgIGxldCBOO1xuICAgIGxldCBoaXRDb29yZDtcbiAgICBsZXQgc21hcnRUZWxsID0gMDtcbiAgICBjb25zb2xlLmxvZyhzbWFydFRlbGwpXG5cbiAgICBpZihjaXA9PT1cIllcIiYmcGlwPT09cGxheWVyQmFzZVsxXSl7XG5cbiAgICAgICAgaGl0Q29vcmQgPSBjb21wdXRlckFJLmhpdCgpO1xuICAgICAgICBcbiAgICBcbiAgICBhbGVydChcIkNvbXB1dGVyIGhhcyBzdHJ1Y2sgVGlsZTogXCIraGl0Q29vcmQpXG4gICAgXG4gICAgfVxuICAgIGVsc2V7XG4gICAgXG4gICAgTCA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIE4gPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICBoaXRDb29yZCA9IEwrTjt9XG4gICAgY29uc29sZS5sb2coaGl0Q29vcmQpO1xuICAgIGNvbnNvbGUubG9nKFBDLmxlbmd0aCk7IFxuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIyY29vcmQ7c3RyaWtlPXBsYXllcjFzdHJpa2VzO1BoaXQ9dC50YXJnZXQuZGF0YXNldC5QMWhpdH1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSAmJiBjaXAhPVwiWVwiKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdICYmIGNpcD09PVwiWVwiKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7fVxuICAgIGlmKE49PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNlIGlmKFBoaXQ9PT1cIllcIil7Y29uc29sZS5sb2coXCJBbHJlYWR5IGJlZW4gaGl0LCB0cnkgYWdhaW4uXCIpfVxuICAgIGVsc2V7ICAgICAgIFxuICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkO3N0cmlrZT1wbGF5ZXIxc3RyaWtlcztQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDFoaXQ9XCJZXCJ9XG4gICAgICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0PVwiWVwifVxuICAgIGZvcihsZXQgcD0wO3A8UEMubGVuZ3RoO3ArKyl7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8UENbcF0uY29vcmRpbmF0ZXMubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmKFBDW3BdLmNvb3JkaW5hdGVzW2ldPT09aGl0Q29vcmQpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coUENbcF0uY29vcmRpbmF0ZXMpXG4gICAgICAgICAgICBQQ1twXS5jb29yZGluYXRlcy5zcGxpY2UoaSwxKVxuICAgICAgICBQQ1twXS5oaXRTaGlwKGhpdENvb3JkKTtcbiAgICAgICAgUENbcF0uaXNTdW5rKCk7ICBcblxuICAgICAgICAvL2FpICBcbiAgICAgICAgc21hcnRUZWxsKytcblxuXG4gICAgICAgIGdhbWVPdmVyKCk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIlBsYXllciBvbmUgc3VuayBzaGlwczogXCIrIHBsYXllcjFTdW5rU2hpcHMpICBcbiAgICAgICAgY29uc29sZS5sb2coXCJQbGF5ZXIgdHdvIHN1bmsgc2hpcHM6IFwiKyBwbGF5ZXIyU3Vua1NoaXBzKSAgXG4gICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIC8vdGVzdGluZyBmb3Igc21hcnQgQUkgZGVsZXRlIGlmIG5vdCB3b3JrXG4gICAgICAgIC8vZWxzZSBpZihQQ1twXS5jb29yZGluYXRlc1tpXSE9aGl0Q29vcmQgJiYgc21hcnRDb3VudGVyPjApe3NtYXJ0Q291bnRlcisrfVxuICAgIFxuICAgIH1cbiAgICB9c3RyaWtlLnB1c2goaGl0Q29vcmQpICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIlAxIHN0cmlrZXM6IFwiKyBwbGF5ZXIxc3RyaWtlcylcbiAgICAgICAgY29uc29sZS5sb2coXCJQMiBzdHJpa2VzOiBcIisgcGxheWVyMnN0cmlrZXMpXG5cbiAgICAgICAgLy9haVxuICAgICAgICBpZihjaXA9PT1cIllcIiYmcGlwPT09cGxheWVyQmFzZVsxXSAmJiBzbWFydENvdW50ZXI+MCAmJiBzbWFydFRlbGw+MCl7c21hcnRDb3VudGVyKyt9XG4gICAgICAgIFxuICAgIGNoYW5QbGF5ZXIoKVxuXG4gICAgfX1cbi8vY29uc29sZS5sb2coXCJJSUlcIilcblxuIGZ1bmN0aW9uIGdhbWVPdmVyKCl7XG4gICAgbGV0IGNvdW50ID0wO1xuICAgIGxldCBQQyA9IHBsYXllcjFjb29yZDtcbiAgICBsZXQgcGxyO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IHBscj1cIlBsYXllciBPbmVcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IHBscj1cIlBsYXllciBUd29cIn1cbiAgICBmb3IobGV0IGkgPTA7aTxQQy5sZW5ndGg7aSsrKXtcbiAgICAgICBpZihQQ1tpXS5jb29yZGluYXRlcy5sZW5ndGg9PT0wKXsrK2NvdW50fVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhjb3VudCk7XG5cbiAgICAvL2NoYW5nZSBiZWxvdyBjb3VudCB0byAxIGZvciBhIHF1aWNrIGdhbWUsIDUgZm9yIGEgZnVsbCBnYW1lXG4gICAgLy9tYXkgYmUgd29ydGggYWxsb3dpbmcgcGxheWVycyB0byBjaGFuZ2UgaXQgYmVmb3JlIGdhbWUgdG8gc2VlIHdoYXQgbGVuZ3RoIG9mIGdhbWUgdGhleSB3YW50IHRvIHBsYXlcbiAgICBpZihjb3VudD09PTUpe2FsZXJ0KCBwbHIrIFwiIGhhcyB3b24hXCIpfVxuICAgIH1cbiAgICBcblxuZnVuY3Rpb24gc3RhcnRHYW1lKCl7XG4gICAgXG4gICAgaWYoUGNyZC5sZW5ndGg+NCl7XG4gICAgICAgIGlmKGNpcD09PVwiWVwiKXtcbiAgICAgICAgICAgIGFsZXJ0KFwiQ29tcHV0ZXIgaXMgY2hvb3NpbmcgYmF0dGxlIHBvc2l0aW9uc1wiKVxuICAgICAgICAgICAgc3E9MVxuICAgICAgICAgICAgbGV0IGNlbGxzPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIik7XG5mb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmdhbWVidXR0b25zXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uUGFyYVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICB9IHBsYXlHYW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICBzcT0xXG4gICAgY2hhblBsYXllcigpO1xuICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbmNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdGFydEdhbWUpXG5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluZ2FtZWJ1dHRvbnNcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25QYXJhXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiQ2huZ2VcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xufVxucGxheUdhbWUoKX19fVxuICAgIFxuICAgIFxuZnVuY3Rpb24gcGxheUdhbWUoKXtcbiAgICBcbiAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbmZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG5cbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxoaXQpXG5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5jZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbmNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhpdEhvdmVyKVxuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmhpdExlYXZlKVxuXG5cbn1cbn1cblxuXG5cbi8vU2VsZWN0aW9uIG1vZHVsZVxuY29uc3Qgc2VsZWN0aW9uTW9kdWxlID0gKCgpID0+e1xuICAgIFxuICAgIFxuXG4gICAgICAgIFxuICAgIC8vYWRkcyBhbiBldmVudCBsaXN0ZW5lciB0byBldmVyeSBncmlkIGNlbGwgYWxsb3dpbmcgdXMgdG8gY2hvb3NlIG91ciBjb29yZGluYXRlcyxtYXAgdGhlbSB0byB0aGUgYXJyYXkgdGhlbiBjaGFuZ2UgcGxheWVyXG4gICAgZnVuY3Rpb24gcDFjYXJyaWVyU2hpcCgpe1xuICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT0yO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWJhdHRsZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgZnVuY3Rpb24gcDFiYXR0bGVTaGlwKCl7ICAgXG4gICAgICAgIFxuICAgICAgICBpZihQY3JkLmxlbmd0aD4wKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT0zO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWJhdHRsZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGJhdHRsZXNoaXApIFxuICAgICAgICAgICAgLy9pZiBjb29yZGluYXRlcyBtYXRjaCBsZW5ndGggbmVlZGVkIG1vdmUgb250byBuZXh0IHBhcnRcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFjcnVpc2VyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICBmdW5jdGlvbiBwMWNydWlzZXJTaGlwKCl7XG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+MSl7XG4gICAgICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFBjcmQpXG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT00O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGJhdHRsZXNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWNydWlzZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjcnVpc2VyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFzdWJtYXJpbmVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcDFzdWJtYXJpbmVTaGlwKCl7XG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+Mil7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9NTtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjcnVpc2VyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFzdWJtYXJpbmVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdWJtYXJpbmUpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWRlc3Ryb3llclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwMWRlc3Ryb3llclNoaXAoKXtcblxuICAgICAgICBpZihQY3JkLmxlbmd0aD4zKXtcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTY7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc3VibWFyaW5lKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFkZXN0cm95ZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkZXN0cm95ZXIpIFxuICAgICAgICAgICAgLy90aGlzIGRlY2lkZXMgd2hldGhlciB0aGUgZ2FtZSBzdGFydHMgYWZ0ZXIgcGxheWVyIHR3byBvciB0aGUgY29tcHV0ZXIgaGFzIHNlbGVjdGVkIHRoZWlyIGdyaWRzXG4gICAgICAgICAgICAvL2lmIG5vdCBpdCBsb29wcyBhcm91bmRcbiAgICAgICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7Y2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHN0YXJ0R2FtZSl9XG4gICAgICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe2NlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUubG9vcCkgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvb3AoKXtcbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+NCl7XG5cbiAgICAgICAgICAgIGlmKGNpcD09PVwiWVwiKXtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICBcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkZXN0cm95ZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5sb29wKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb21wdXRlckFJLnNlbGVjdENhcnJpZXIoKTt9XG4gICAgICAgICAgICBlbHNle1xuXG4gICAgICAgIC8vVGhpcyBmdW5jdGlvbiB0dXJucyB0aGUgc2VsZWN0aW9uIHByb2Nlc3Mgb3ZlciB0byBlaXRoZXIgYSBjb21wdXRlciBvciBwbGF5ZXIgMlxuICAgIC8vanVzdCBkb2luZyBwbGF5ZXIgMiBpbXBsZW1ldGF0aW9uIGZvciBub3dcbiAgICBjaGFuUGxheWVyKCk7XG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgIFxuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLmxvb3ApIFxuICAgICAgICAgICAgY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuICAgIH1cbnNlbGVjdGlvbk1vZHVsZS5wMWNhcnJpZXJTaGlwKCk7XG59XG4gICAgfX1cblxuXG4gICAgXG4gICAgICAgIHJldHVybntwMWNhcnJpZXJTaGlwLHAxYmF0dGxlU2hpcCxwMWNydWlzZXJTaGlwLHAxc3VibWFyaW5lU2hpcCxwMWRlc3Ryb3llclNoaXAsbG9vcH1cbiAgICBcbiAgICB9KSgpO1xuXG5cblxuXG4gICBtb2RhbE1vZHVsZS5wbGF5ZXJTZWxlY3QoKTtcbiAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR2FtZWJvYXJkKCk7XG5zZWxlY3Rpb25Nb2R1bGUucDFjYXJyaWVyU2hpcCgpO1xuXG4vL3Rlc3RpbmcgaGl0IGZ1bmN0aW9uXG4vL3BsYXlHYW1lKCk7XG5cblxuXG5leHBvcnQge2NvbXBBaXJlY29yZCxyTm8sc21hcnRDb3VudGVyLHRhcmdldEFycmF5eSxoaXQsc3RhcnRHYW1lLHNlbGVjdGlvbk1vZHVsZSxjaXAsUGhpdCxzcSxkaXJlY3Rpb24scGlwLHBsYXllcjFjb29yZCxwbGF5ZXIyY29vcmQscGxheWVyQmFzZSxjaGFuUGxheWVyLHBsYXllcjFTdW5rU2hpcHMscGxheWVyMlN1bmtTaGlwcyxwbGF5ZXIxc3RyaWtlcyxwbGF5ZXIyc3RyaWtlc31cblxuXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkdhbWVib2FyZE1vZHVsZSIsImNyZWF0ZUdyaWRzIiwibHRyIiwibm8iLCJpZCIsImdyaWQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBhZGRpbmciLCJib3JkZXIiLCJ0ZXh0Q29udGVudCIsInRleHRBbGlnbiIsImRhdGFzZXQiLCJoaXQiLCJQMWhpdCIsIlAyaGl0IiwibGV0dGVyIiwibnVtYmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUdhbWVib2FyZCIsImkiLCJjaG9vc2VDcmRudHMiLCJTdHJ0THR0cnMiLCJTdHJ0Tm8iLCJsZW5ndGgiLCJWb3JIIiwiY29vcmQiLCJvdmVyIiwicHVzaCIsIkx0ck51bWJlciIsImNoYXJDb2RlQXQiLCJjb25zb2xlIiwibG9nIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwib3ZlckxhcCIsImEiLCJiIiwicGxjIiwiY3JkIiwib3ZybGFwIiwieiIsInAiLCJjb29yZGluYXRlcyIsInNoaXBmYWN0b3J5IiwibmFtZSIsInRoaXMiLCJoaXRTaGlwIiwiYWxlcnQiLCJjaXAiLCJwaXAiLCJwbGF5ZXJCYXNlIiwiY29tcEFpcmVjb3JkIiwic21hcnRDb3VudGVyIiwiaXNTdW5rIiwiY29vcmRpZCIsImNhcnJpZXIiLCJ0IiwidGFyZ2V0IiwiYmFja2dyb3VuZENvbG9yIiwiUEMiLCJndW5uIiwiZGlyZWN0aW9uIiwicGxheWVyMWNvb3JkIiwicGxheWVyMmNvb3JkIiwiYmF0dGxlc2hpcCIsImNydWlzZXIiLCJzdWJtYXJpbmUiLCJkZXN0cm95ZXIiLCJkb21Nb2R1bGUiLCJudW1iIiwibGV0dGVyciIsImNvbG9yIiwic3EiLCJzdHJpa2UiLCJwbGF5ZXIxc3RyaWtlcyIsInBsYXllcjJzdHJpa2VzIiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiUGhpdCIsInNob3ciLCJpaSIsIm1vZGFsTW9kdWxlIiwibW9kYWwiLCJidG4iLCJwYXJhMSIsInBhcmEyIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBzYnRucyIsImRpc3BsYXkiLCJjb21wSGl0IiwiY2xvc2VNb2RhbCIsIm9uY2xpY2siLCJmcm5kIiwiY29tcCIsInNob3dNb2R1bGUiLCJwbGF5ZXJTZWxlY3QiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbXBIaXRNb2RhbCIsImNvbXB1dGVyQUkiLCJyYW5kb21JbnRGcm9tSW50ZXJ2YWwiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyTm8iLCJ0YXJnZXRBcnJheXkiLCJmaXJlIiwic3BsaWNlIiwic2VsZWN0Q2FycmllciIsInJhbmRvbU5vIiwic2VsZWN0QmF0dGxlc2hpcCIsInNlbGVjdENydWlzZXIiLCJzZWxlY3RTdWJtYXJpbmUiLCJzZWxlY3REZXN0cm95ZXIiLCJzdGFydEdhbWUiLCJ0YXJnZXRBcnJheSIsIlBjcmQiLCJjaGFuUGxheWVyIiwiTCIsIk4iLCJoaXRDb29yZCIsInNtYXJ0VGVsbCIsImdhbWVPdmVyIiwicGxyIiwiY291bnQiLCJwbGF5R2FtZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZWxlY3Rpb25Nb2R1bGUiLCJwMWNhcnJpZXJTaGlwIiwicDFiYXR0bGVTaGlwIiwicDFjcnVpc2VyU2hpcCIsInAxc3VibWFyaW5lU2hpcCIsInAxZGVzdHJveWVyU2hpcCIsImxvb3AiXSwic291cmNlUm9vdCI6IiJ9