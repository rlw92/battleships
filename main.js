(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Rd:()=>g,o7:()=>i,P4:()=>m,VL:()=>d,yR:()=>c,w7:()=>u,sq:()=>s});const t={createGrids:(e,t,r)=>{let n=document.createElement("div");n.style.padding="10px",n.style.border=0===r||0===t?"none":"solid black 2px",n.textContent=r,n.style.textAlign="center",0===r&&"0"===e?n.textContent=t:0===t&&"0"!=e&&(n.textContent=e),n.dataset.hit="No",n.dataset.hit,n.dataset.letter=e,n.dataset.number=t,n.classList.add("cell"),n.setAttribute("id",n.dataset.letter+n.dataset.number),document.getElementById("gameboard1").appendChild(n)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function r(e,t,r,n){let o=[];if("V"===n){let n=11-r;t>n&&(t=n);for(let n=1;n<r+1;n++)o.push(e+t++)}else if("H"===n){let n=e.charCodeAt(0),l=107-r;n>l&&(n=l);for(let e=1;e<r+1;e++)o.push(String.fromCharCode(n++)+t)}return o}function n(e,t){this.name=e,this.coordinates=t}const o=e=>{e.target.style.backgroundColor="red";let t,o=new n("Carrier",r(e.target.dataset.letter,e.target.dataset.number,2,i));return m===u[0]?t=d:m===u[1]&&(t=c),t.push(o),document.getElementById("p1c").textContent=t,g(),document.getElementById("p1c").textContent=t[0].name+"-"+t[0].coordinates,t},l=function(e){e.target.style.backgroundColor="green";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===i)for(let e=0;e<s;e++)document.getElementById(r+(+t+e)).style.backgroundColor="green";else if("H"===i){let e=r.charCodeAt(0);for(let r=0;r<s;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="green"}},a=function(e){e.target.style.backgroundColor="white";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===i)for(let e=0;e<s;e++)document.getElementById(r+(+t+e)).style.backgroundColor="white";else if("H"===i){let e=r.charCodeAt(0);for(let r=0;r<s;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}};let d=[],c=[];document.getElementById("p2c").textContent=c;let s,i="V",u=["player1","player2"],m=u[0];document.getElementById("pip").textContent=m,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===i?(i="H",document.getElementById("position").textContent="Horizontal"):"H"===i&&(i="V",document.getElementById("position").textContent="Vertical")}));const g=()=>{document.getElementById("p2c").textContent=c,m===u[0]?(m=u[1],document.getElementById("pip").textContent=m):(u[1],m=u[0],document.getElementById("pip").textContent=m)};function y(e){let t=d,r=e.target.dataset.letter+e.target.dataset.number;console.log(r),m===u[0]?t=c:m===u[1]&&(t=d);for(let e=0;e<t[0].length;e++)t[0][e]===r&&(alert("HIT"),t[0].splice(e,1),console.log(t[0]),console.log(d[0]),0===d[0].length?alert("Player two wins"):0===c[0].length&&alert("Player one wins"));return g(),t}function C(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)s=2,e[t].removeEventListener("click",o),e[t].removeEventListener("click",C),e[t].addEventListener("click",f)}function f(e){e.target.style.backgroundColor="red";let t=e.target.dataset.letter,n=e.target.dataset.number;c.push(r(t,n,2,i)),document.getElementById("p2c").textContent=c,g(),function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",f),e[t].removeEventListener("mouseover",l),e[t].removeEventListener("mouseleave",a)}(),function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",y),e[t].style.backgroundColor="white",e[t].addEventListener("mouseover",(e=>{e.target.style.backgroundColor="red"})),e[t].addEventListener("mouseleave",(e=>{e.target.style.backgroundColor="white"}))}()}!function(){t.createGameboard();let e=document.querySelectorAll(".cell");s=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",o),e[t].addEventListener("click",C),e[t].addEventListener("mouseover",l),e[t].addEventListener("mouseleave",a)}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJekIsRUFBRSxFQUFFQSxFQUFFaUMsRUFBTTlCLE9BQU9ILElBQ3ZCaUMsRUFBTWpDLEdBQUcwQixpQkFBaUIsUUFBUVYsR0FDbENpQixFQUFNakMsR0FBRzBCLGlCQUFpQixRQUFRTSxHQUNsQ0MsRUFBTWpDLEdBQUcwQixpQkFBaUIsWUFBWUosR0FDMUNXLEVBQU1qQyxHQUFHMEIsaUJBQWlCLGFBQWFKLEdBYS9DaUIsSSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9jaG9vc2VDb29yZGluYXRlcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9zaGlwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCBHYW1lYm9hcmRNb2R1bGUgPSAoKCkgPT4ge1xuXG4gICAgbGV0IGJvcmQgPSBcInNvbGlkIGJsYWNrIDJweFwiO1xuICAgIGxldCBub2JvcmQgPSBcIm5vbmVcIjtcbiAgICBcbiAgICBcbiAgICBjb25zdCBjcmVhdGVHcmlkcyA9IChsdHIsbm8saWQpID0+e1xuICAgIGxldCBncmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIGdyaWQuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuICAgIC8vdHJ5aW5nIHRvIHRha2Ugb3V0IHRoZSBib3JkZXJpbmcgb2YgdGhlIG5vdCBpbiBwbGF5IGNlbGxzXG4gICAgaWYoaWQ9PT0gMCl7Z3JpZC5zdHlsZS5ib3JkZXI9bm9ib3JkfVxuICAgIGVsc2UgaWYobm89PT0wKXtncmlkLnN0eWxlLmJvcmRlciA9IG5vYm9yZDt9XG4gICAgZWxzZXtncmlkLnN0eWxlLmJvcmRlciA9IGJvcmQ7fVxuICAgIFxuICAgIFxuICAgIGdyaWQudGV4dENvbnRlbnQgPSBpZDtcbiAgICBncmlkLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgaWYoaWQ9PT0wICYmIGx0cj09PVwiMFwiKXtncmlkLnRleHRDb250ZW50ID0gbm99XG4gICAgZWxzZSBpZihubz09PTAgJiYgbHRyIT1cIjBcIil7Z3JpZC50ZXh0Q29udGVudCA9IGx0cn1cbiAgICBncmlkLmRhdGFzZXQuaGl0ID0gXCJOb1wiXG4gICAgbGV0IGdyZGF0YSA9IGdyaWQuZGF0YXNldC5oaXQ7XG4gICAgbGV0IGxldHRlciA9IGdyaWQuZGF0YXNldC5sZXR0ZXIgPSBsdHI7XG4gICAgbGV0IG51bWJlciA9IGdyaWQuZGF0YXNldC5udW1iZXIgPSBubztcbiAgICAvL3Nob3dzIHdoaWNoIHBsYXllciBvd25zIHRoZSBjZWxsLy9cbiAgICAvL2xldCBwbGF5ZXIgPSBncmlkLmRhdGFzZXQucGxheWVyY2VsbCA9IFwicGxheWVyXCIrcGx5cjtcbiAgICBcbiAgICAvL2NyZWF0aW5nIGEgY2xhc3MgZm9yIGVhY2ggZ3JpZCBzbyB3ZSBjYW4gYWNjZXNzIGl0IGZyb20gdGhlIGZ1bmN0aW9uc1xuICAgIGdyaWQuY2xhc3NMaXN0LmFkZChcImNlbGxcIik7XG4gICAgLy9jcmVhdGluZyBhbiBpZCB0aGF0IG1hdGNoZXMgaXRzIGNvb3JkaW5hdGVzXG4gICAgZ3JpZC5zZXRBdHRyaWJ1dGUoJ2lkJyxncmlkLmRhdGFzZXQubGV0dGVyK2dyaWQuZGF0YXNldC5udW1iZXIpXG4gICAgXG4gICAgICAgICBcbiAgICBsZXQgZ2FtZWJvYXJkID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZWJvYXJkMVwiKTtcbiAgICBcbiAgICBnYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ3JpZCk7XG4gICAgXG4gICAgfVxuICAgIFxuICAgIC8vY3JlYXRlIHRoZSB3aG9sZSBncmlkIHdpdGggYmVsb3cgZnVuY3Rpb25cbiAgICBjb25zdCBjcmVhdGVHYW1lYm9hcmQgPSAoKSA9PntcbiAgICBcbiAgICBmb3IobGV0IGk9MDtpPDExO2krKyl7XG4gICAgICAgIFxuICAgIFxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCIwXCIsMCxpKVxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJBXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkJcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQ1wiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJEXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkVcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRlwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJHXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkhcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJKXCIsaSk7XG4gICAgXG4gICAgfVxuICAgIH1cbiAgICByZXR1cm4ge2NyZWF0ZUdyaWRzLGNyZWF0ZUdhbWVib2FyZH1cbiAgICB9KSgpO1xuXG4gICAgZXhwb3J0e0dhbWVib2FyZE1vZHVsZX07IiwiLy90aGUgY2hvb29zZSBjb29yZGluYXRlcyBmdW5jdGlvblxuZnVuY3Rpb24gY2hvb3NlQ3JkbnRzKFN0cnRMdHRycyxTdHJ0Tm8sbGVuZ3RoLFZvckgpe1xuICAgIGxldCBjb29yZCA9IFtdO1xuICAgIFxuICAgIGlmKFZvckg9PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1sZW5ndGg7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoU3RydE5vPm92ZXIpe1N0cnRObyA9IG92ZXJ9XG4gICAgLy9pZihWb3JIPT09XCJWZXJ0aWNhbFwiKXt9IFdpbGwgYmUgdHJlYXRpbmcgdGhpcyB0ZXN0aW5nIGFzIGNvbXBsZXRlIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gICAgZm9yKGxldCBpPTE7aTxsZW5ndGgrMTtpKyspe1xuICAgICAgICBjb29yZC5wdXNoKFN0cnRMdHRycyArIFN0cnRObysrKVxuICAgIH1cbn1cblxuZWxzZSBpZihWb3JIPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPSBTdHJ0THR0cnMuY2hhckNvZGVBdCgwKVxuICAgIGxldCBvdmVyID0gMTA3LWxlbmd0aDtcbiAgICAvL2J1aWxkaW5nIGl0IHNvIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyBhIG51bWJlciBpdCBrZWVwcyBpdCB3aXRoaW4gdGhlIGdyaWRcbiAgICBpZihMdHJOdW1iZXI+b3Zlcil7THRyTnVtYmVyID0gb3Zlcn1cbiAgICBcbiAgICBmb3IobGV0IGk9MTtpPGxlbmd0aCsxO2krKyl7XG4gICAgICAgIGNvb3JkLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBTdHJ0Tm8pXG4gICAgfVxuXG59XG4gICAgcmV0dXJuIGNvb3JkO1xuXG59XG5cbmV4cG9ydCB7Y2hvb3NlQ3JkbnRzfSIsImltcG9ydHtwaXAsZGlyZWN0aW9uLHBsYXllcjFjb29yZCxwbGF5ZXIyY29vcmQscGxheWVyQmFzZSxjaGFuUGxheWVyfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0e2Nob29zZUNyZG50c30gZnJvbSAnLi9jaG9vc2VDb29yZGluYXRlcydcblxuXG5mdW5jdGlvbiBzaGlwZmFjdG9yeShuYW1lLGNvb3JkaW5hdGVzKXtcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy5jb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzXG4gICAgXG4gIH1cblxuXG4gIGNvbnN0IGNhcnJpZXIgPSAodCkgPT57ICAgIFxuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDYXJyaWVyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkO31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7fVxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMWNcIikudGV4dENvbnRlbnQgPSBQQ1xuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAxY1wiKS50ZXh0Q29udGVudCA9IFBDWzBdLm5hbWUgK1wiLVwiKyBQQ1swXS5jb29yZGluYXRlcztcbiAgICByZXR1cm4gUEM7XG4gICAgfVxuXG4gIGNvbnN0IGJhdHRsZXNoaXAgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkJhdHRsZXNoaXBcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDt9XG4gICAgUEMucHVzaChndW5uKTtcbiAgICBjaGFuUGxheWVyKCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMWNcIikudGV4dENvbnRlbnQgPSBQQ1swXS5uYW1lICtcIi1cIisgUENbMF0uY29vcmRpbmF0ZXM7XG4gICAgcmV0dXJuIFBDO1xuICB9XG4gIGNvbnN0IGNydWlzZXIgPSAoKSA9Pnt9XG4gIGNvbnN0IHN1Ym1hcmluZSA9ICgpID0+e31cbiAgY29uc3QgZGVzdHJveWVyID0gKCkgPT57fVxuXG4gIGV4cG9ydCB7c2hpcGZhY3RvcnksY2Fycmllcn0iLCJpbXBvcnQge3NxLGRpcmVjdGlvbn0gZnJvbSAnLi9pbmRleCdcbmNvbnN0IGRvbU1vZHVsZSA9ICgoKSA9Pntcbi8vZnVuY3Rpb24gZm9yIGhpZ2hsaWdodGluZyBzcXVhcmVzIHdoZW4gaG92ZXJpbmdcbmZ1bmN0aW9uIGhvdmVyKHQpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cImdyZWVuXCI7XG5sZXQgbnVtYiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xubGV0IGxldHRlcnIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlclxuaWYoZGlyZWN0aW9uPT09XCJWXCIpe1xuZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGV0dGVycisoK251bWIraSkpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiZ3JlZW5cIn19XG5lbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtcbiAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICBmb3IobGV0IGk9MDtpPHNxO2krKyl7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBudW1iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJncmVlblwifVxufVxufVxuXG4vL2Z1bmN0aW9uIGZvciByZXR1cm5pbmcgc3F1YXJlIGNvbG9yIHRvIHdoaXRlIGFmdGVyIGxlYXZpbmdcbmZ1bmN0aW9uIGxlYXZlKHQpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCI7XG5sZXQgbnVtYiA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xubGV0IGxldHRlcnIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlclxuaWYoZGlyZWN0aW9uPT09XCJWXCIpe1xuICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZXR0ZXJyKygrbnVtYitpKSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwifX1cbiAgICBlbHNlIGlmKGRpcmVjdGlvbj09PVwiSFwiKXtcbiAgICAgICAgbGV0IEx0ck51bWJlciA9bGV0dGVyci5jaGFyQ29kZUF0KDApXG4gICAgICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBudW1iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwifVxuICAgIH1cbiAgICB9XG5cbnJldHVybntob3ZlcixsZWF2ZX1cbn0pKCk7XG5cblxuZXhwb3J0e2RvbU1vZHVsZX0iLCJpbXBvcnQge0dhbWVib2FyZE1vZHVsZX0gZnJvbSAnLi9nYW1lYm9hcmQnXG5pbXBvcnQge2Nob29zZUNyZG50c30gZnJvbSAnLi9jaG9vc2VDb29yZGluYXRlcydcbmltcG9ydCB7c2hpcGZhY3RvcnksY2Fycmllcn0gZnJvbSAnLi9zaGlwcydcbmltcG9ydCB7ZG9tTW9kdWxlfSBmcm9tICcuL2RvbSdcblxuXG5cblxuICAvL2Nvb3JkaW5hdGVzIG9mIGVhY2ggcGxheWVycyBzaGlwLCBqdXN0IGZvciB0ZXN0aW5nIHVudGlsIHdlIHVzZSBtdWx0aXBsZSBzaGlwc1xuICBcbiAgbGV0IHBsYXllcjFjb29yZD1bXTtcbiAgbGV0IHBsYXllcjJjb29yZD1bXTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMmNcIikudGV4dENvbnRlbnQgPSBwbGF5ZXIyY29vcmQ7XG4gIC8vVj1WZXJ0aWNhbCwgSD1Ib3Jpem9udGFsXG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICAvL3BsYXllciBpbiBwbGF5XG4gIGxldCBwbGF5ZXJCYXNlID0gW1wicGxheWVyMVwiLFwicGxheWVyMlwiXTtcbiAgbGV0IHBpcCA9IHBsYXllckJhc2VbMF07XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO1xuICAvL3RoZSBzcXVhcmVzIHRoYXQgbmVlZCBoaWdobGlnaHRpbmcgZm9yIHRoZSBkb21cbiAgbGV0IHNxO1xuICBcblxuLy9idXR0b24gdG8gY2hhbmdlIHRoZSBwb3NpdGlvbmluZyBvZiB0aGUgcGxhY2VtZW50XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e2lmKGRpcmVjdGlvbj09PVwiVlwiKXtkaXJlY3Rpb249XCJIXCI7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblwiKS50ZXh0Q29udGVudD1cIkhvcml6b250YWxcIjt9ZWxzZSBpZihkaXJlY3Rpb249PT1cIkhcIil7ZGlyZWN0aW9uPVwiVlwiO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25cIikudGV4dENvbnRlbnQ9XCJWZXJ0aWNhbFwifX0pXG5cblxuLy9mdW5jdGlvbiBjaGFuZ2VzIHBsYXllclxuY29uc3QgY2hhblBsYXllciA9ICgpPT57XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAyY1wiKS50ZXh0Q29udGVudCA9IHBsYXllcjJjb29yZDtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe3BpcCA9IHBsYXllckJhc2VbMV07IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7cGlwID0gcGxheWVyQmFzZVswXTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG4gICAgZWxzZXtwaXAgPSBwbGF5ZXJCYXNlWzBdO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cblxufVxuXG5cblxuXG5cblxuLy9oaXQgZnVuY3Rpb24gZm9yIHRoZSBtYWluIGdhbWUgbG9vcFxuLy9pbiBmdXR1cmUgd2lsbCBtYXJrIHRoZWUgc3F1YXJlIGFzIGhpdCBub3QgYWxsb3dpbmcgdGhlIHBsYXllciB0byBoaXQgYWdhaW5cbi8vdGFrZXMgdGhlIGNvb3JkaW5hdGVzIG91dCBvZiB0aGUgcGxheWVycyBhcnJheVxuZnVuY3Rpb24gaGl0KHQpe1xuICAgIGxldCBQQyA9IHBsYXllcjFjb29yZDtcbiAgICBsZXQgTCA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBOID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgbGV0IGhpdENvb3JkID0gTCtOO1xuICAgIGNvbnNvbGUubG9nKGhpdENvb3JkKTtcbiAgICBcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkO31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIxY29vcmQ7fVxuZm9yKGxldCBpPTA7aTxQQ1swXS5sZW5ndGg7aSsrKXtcbiAgICBpZihQQ1swXVtpXT09PWhpdENvb3JkKXtcbiAgICAgICAgYWxlcnQoXCJISVRcIik7XG4gICAgUENbMF0uc3BsaWNlKGksMSk7XG4gICAgY29uc29sZS5sb2coUENbMF0pO1xuICAgIGdhbWVPdmVyKCk7XG4gICAgfX1jaGFuUGxheWVyKCk7XG4gICAgcmV0dXJuIFBDfVxuXG4gICAgZnVuY3Rpb24gZ2FtZU92ZXIoKXtcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyMWNvb3JkWzBdKVxuICAgICAgICBpZihwbGF5ZXIxY29vcmRbMF0ubGVuZ3RoID09PSAwKXthbGVydChcIlBsYXllciB0d28gd2luc1wiKTt9XG4gICAgICAgIGVsc2UgaWYocGxheWVyMmNvb3JkWzBdLmxlbmd0aCA9PT0gMCl7YWxlcnQoXCJQbGF5ZXIgb25lIHdpbnNcIil9XG4gICAgfVxuICAgIFxuXG4vL2Jhc2ljYWxseSBhIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGEgMiBzcXVhcmUgc2hpcFxuLypjb21tZW50ZWQgb3V0IHRvIHRlc3QgY3Jvc3Mgd2VicGFja1xuZnVuY3Rpb24gYnR0bHNoaXAxKHQpe1xuICAgIFxudC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbmxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbmxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbi8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKVxubGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJHdW5uZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpXG5wbGF5ZXIxY29vcmQucHVzaChndW5uKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicDFjXCIpLnRleHRDb250ZW50ID0gcGxheWVyMWNvb3JkO1xuY2hhblBsYXllcigpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMWNcIikudGV4dENvbnRlbnQgPSBwbGF5ZXIxY29vcmRbMF0ubmFtZSArXCItXCIrIHBsYXllcjFjb29yZFswXS5jb29yZGluYXRlcztcbnJldHVybiBwbGF5ZXIxY29vcmQ7XG59Ki9cblxuLy90byBiZSBhYmxlIHRvIGludm9rZSBib3RoIGZ1bmN0aW9ucyBhbmQgdG8gcmVtb3ZlIGl0XG4vL25lZWQgdG8gZ2V0IHJpZCBvZiB0aGlzIGFuZCBjYWxsIGl0IGFsbCBpbiB0aGUgbGlzdGVuZXJcblxuXG5cblxuXG5mdW5jdGlvbiBwYjIoKXtcbiAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcblxuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICBzcT0yO1xuICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYXJyaWVyKSBcbiAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycscGIyKVxuICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxidHRsc2hpcDIpXG59XG59XG5cbmZ1bmN0aW9uIGJ0dGxzaGlwMih0KXtcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgICAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKVxuICAgICAgICAgcGxheWVyMmNvb3JkLnB1c2goY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKTtcbiAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicDJjXCIpLnRleHRDb250ZW50ID0gcGxheWVyMmNvb3JkO1xuICAgICAgICAgY2hhblBsYXllcigpO1xuICAgICAgICAgcm12ZXZlbigpO1xuICAgICAgICAgcGxheUdhbWUoKTt9XG5cbi8vcmVtb3ZlIGV2ZW50IGxpc3RlbmVyc1xuZnVuY3Rpb24gcm12ZXZlbigpe1xuICAgIGxldCBjZWxscz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsYnR0bHNoaXAyKVxuICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbn1cbn1cblxuXG5cbiAgICBcbiAgICBcbmZ1bmN0aW9uIHBsYXlHYW1lKCl7XG4gICAgbGV0IGNlbGxzPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIik7XG5mb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuXG5jZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsaGl0KVxuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywodCk9Pnt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJyZWRcIn0pXG5jZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywodCk9Pnt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwifSlcbn1cblxufVxuXG5cbmNvbnN0IHNlbGVjdGlvbk1vZHVsZSA9ICgoKSA9PntcblxuICAgICAgICBcbiAgICAvL2FkZHMgYW4gZXZlbnQgbGlzdGVuZXIgdG8gZXZlcnkgZ3JpZCBjZWxsIGFsbG93aW5nIHVzIHRvIGNob29zZSBvdXIgY29vcmRpbmF0ZXMsbWFwIHRoZW0gdG8gdGhlIGFycmF5IHRoZW4gY2hhbmdlIHBsYXllclxuICAgIGZ1bmN0aW9uIHBiMSgpe1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR2FtZWJvYXJkKCk7XG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTI7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY2FycmllcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscGIyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm57cGIxfVxuICAgIFxuICAgIH0pKCk7XG5cblxuXG5cblxuXG5zZWxlY3Rpb25Nb2R1bGUucGIxKCk7XG5cblxuXG5cbmV4cG9ydCB7c3EsZGlyZWN0aW9uLHBpcCxwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBsYXllckJhc2UsY2hhblBsYXllcn1cblxuXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkdhbWVib2FyZE1vZHVsZSIsImNyZWF0ZUdyaWRzIiwibHRyIiwibm8iLCJpZCIsImdyaWQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBhZGRpbmciLCJib3JkZXIiLCJ0ZXh0Q29udGVudCIsInRleHRBbGlnbiIsImRhdGFzZXQiLCJoaXQiLCJsZXR0ZXIiLCJudW1iZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiY3JlYXRlR2FtZWJvYXJkIiwiaSIsIlN0cnRMdHRycyIsIlN0cnRObyIsImxlbmd0aCIsIlZvckgiLCJjb29yZCIsIm92ZXIiLCJwdXNoIiwiTHRyTnVtYmVyIiwiY2hhckNvZGVBdCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInNoaXBmYWN0b3J5IiwibmFtZSIsImNvb3JkaW5hdGVzIiwidGhpcyIsImNhcnJpZXIiLCJ0IiwidGFyZ2V0IiwiYmFja2dyb3VuZENvbG9yIiwiUEMiLCJndW5uIiwiZG9tTW9kdWxlIiwibnVtYiIsImxldHRlcnIiLCJzcSIsImFkZEV2ZW50TGlzdGVuZXIiLCJoaXRDb29yZCIsImNvbnNvbGUiLCJsb2ciLCJhbGVydCIsInNwbGljZSIsInBiMiIsImNlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJidHRsc2hpcDIiLCJybXZldmVuIiwicGxheUdhbWUiLCJzZWxlY3Rpb25Nb2R1bGUiXSwic291cmNlUm9vdCI6IiJ9