(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Rd:()=>p,o7:()=>u,P4:()=>g,VL:()=>c,yR:()=>i,w7:()=>m,sq:()=>s});const t={createGrids:(e,t,r)=>{let n=document.createElement("div");n.style.padding="10px",n.style.border=0===r||0===t?"none":"solid black 2px",n.textContent=r,n.style.textAlign="center",0===r&&"0"===e?n.textContent=t:0===t&&"0"!=e&&(n.textContent=e),n.dataset.hit="No",n.dataset.hit,n.dataset.letter=e,n.dataset.number=t,n.classList.add("cell"),n.setAttribute("id",n.dataset.letter+n.dataset.number),document.getElementById("gameboard1").appendChild(n)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function r(e,t,r,n){let l=[];if("V"===n){let n=11-r;t>n&&(t=n);for(let n=1;n<r+1;n++)l.push(e+t++)}else if("H"===n){let n=e.charCodeAt(0),o=75-r;n>o&&(n=o),console.log(n),console.log(o);for(let e=1;e<r+1;e++)l.push(String.fromCharCode(n++)+t)}return l}function n(e,t){this.name=e,this.coordinates=t}const l=e=>{e.target.style.backgroundColor="red";let t,l=e.target.dataset.letter,o=e.target.dataset.number,a=new n("Carrier",r(l,o,2,u));g===m[0]?t=c:g===m[1]&&(t=i),t.push(a);let d=document.createElement("p");return d.textContent="Carrier-"+r(l,o,2,u),document.getElementById("p1c").appendChild(d),t},o=e=>{e.target.style.backgroundColor="red";let t,l=e.target.dataset.letter,o=e.target.dataset.number,a=new n("Battleship",r(l,o,3,u));g===m[0]?t=c:g===m[1]&&(t=i),t.push(a),p();let d=document.createElement("p");return d.textContent="BattleShip-"+r(l,o,3,u),document.getElementById("p1c").appendChild(d),t},a=function(e){e.target.style.backgroundColor="green";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===u)for(let e=0;e<s;e++)document.getElementById(r+(+t+e)).style.backgroundColor="green";else if("H"===u){let e=r.charCodeAt(0);for(let r=0;r<s;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="green"}},d=function(e){e.target.style.backgroundColor="white";let t=e.target.dataset.number,r=e.target.dataset.letter;if("V"===u)for(let e=0;e<s;e++)document.getElementById(r+(+t+e)).style.backgroundColor="white";else if("H"===u){let e=r.charCodeAt(0);for(let r=0;r<s;r++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}};let c=[],i=[];document.getElementById("p2c").textContent=i;let s,u="V",m=["player1","player2"],g=m[0];document.getElementById("pip").textContent=g,document.getElementById("Chnge").addEventListener("click",(()=>{"V"===u?(u="H",document.getElementById("position").textContent="Horizontal"):"H"===u&&(u="V",document.getElementById("position").textContent="Vertical")}));const p=()=>{document.getElementById("p2c").textContent=i,g===m[0]?(g=m[1],document.getElementById("pip").textContent=g):(m[1],g=m[0],document.getElementById("pip").textContent=g)};function y(e){let t=c,r=e.target.dataset.letter+e.target.dataset.number;console.log(r),g===m[0]?t=i:g===m[1]&&(t=c);for(let e=0;e<t[0].length;e++)t[0][e]===r&&(alert("HIT"),t[0].splice(e,1),console.log(t[0]),console.log(c[0]),0===c[0].length?alert("Player two wins"):0===i[0].length&&alert("Player one wins"));return p(),t}function C(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)s=2,e[t].removeEventListener("click",l),e[t].removeEventListener("click",C),e[t].addEventListener("click",h)}function h(e){e.target.style.backgroundColor="red";let t=e.target.dataset.letter,n=e.target.dataset.number;i.push(r(t,n,2,u)),document.getElementById("p2c").textContent=i,p(),function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",h),e[t].removeEventListener("mouseover",a),e[t].removeEventListener("mouseleave",d)}(),function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",y),e[t].style.backgroundColor="white",e[t].addEventListener("mouseover",(e=>{e.target.style.backgroundColor="red"})),e[t].addEventListener("mouseleave",(e=>{e.target.style.backgroundColor="white"}))}()}const E={p1carrierShip:function(){t.createGameboard();let e=document.querySelectorAll(".cell");s=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",l),e[t].addEventListener("click",E.p1battleShip),e[t].addEventListener("mouseover",a),e[t].addEventListener("mouseleave",d)},p1battleShip:function(){let e=document.querySelectorAll(".cell");s=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",l),e[t].removeEventListener("click",E.p1battleShip),e[t].addEventListener("click",o),e[t].addEventListener("click",C),e[t].addEventListener("mouseover",a),e[t].addEventListener("mouseleave",d)}};E.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixHQUNyQ3NCLEVBQU16QyxHQUFHMkMsb0JBQW9CLFFBQVFJLEVBQWdCRSxjQUNyRFIsRUFBTXpDLEdBQUdvQyxpQkFBaUIsUUFBUU4sR0FDbENXLEVBQU16QyxHQUFHb0MsaUJBQWlCLFFBQVFJLEdBQ2xDQyxFQUFNekMsR0FBR29DLGlCQUFpQixZQUFZSixHQUMxQ1MsRUFBTXpDLEdBQUdvQyxpQkFBaUIsYUFBYUosS0FhL0NlLEVBQWdCQyxpQiIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9jaG9vc2VDb29yZGluYXRlcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9zaGlwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwcy8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCBHYW1lYm9hcmRNb2R1bGUgPSAoKCkgPT4ge1xuXG4gICAgbGV0IGJvcmQgPSBcInNvbGlkIGJsYWNrIDJweFwiO1xuICAgIGxldCBub2JvcmQgPSBcIm5vbmVcIjtcbiAgICBcbiAgICBcbiAgICBjb25zdCBjcmVhdGVHcmlkcyA9IChsdHIsbm8saWQpID0+e1xuICAgIGxldCBncmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIGdyaWQuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuICAgIC8vdHJ5aW5nIHRvIHRha2Ugb3V0IHRoZSBib3JkZXJpbmcgb2YgdGhlIG5vdCBpbiBwbGF5IGNlbGxzXG4gICAgaWYoaWQ9PT0gMCl7Z3JpZC5zdHlsZS5ib3JkZXI9bm9ib3JkfVxuICAgIGVsc2UgaWYobm89PT0wKXtncmlkLnN0eWxlLmJvcmRlciA9IG5vYm9yZDt9XG4gICAgZWxzZXtncmlkLnN0eWxlLmJvcmRlciA9IGJvcmQ7fVxuICAgIFxuICAgIFxuICAgIGdyaWQudGV4dENvbnRlbnQgPSBpZDtcbiAgICBncmlkLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgaWYoaWQ9PT0wICYmIGx0cj09PVwiMFwiKXtncmlkLnRleHRDb250ZW50ID0gbm99XG4gICAgZWxzZSBpZihubz09PTAgJiYgbHRyIT1cIjBcIil7Z3JpZC50ZXh0Q29udGVudCA9IGx0cn1cbiAgICBncmlkLmRhdGFzZXQuaGl0ID0gXCJOb1wiXG4gICAgbGV0IGdyZGF0YSA9IGdyaWQuZGF0YXNldC5oaXQ7XG4gICAgbGV0IGxldHRlciA9IGdyaWQuZGF0YXNldC5sZXR0ZXIgPSBsdHI7XG4gICAgbGV0IG51bWJlciA9IGdyaWQuZGF0YXNldC5udW1iZXIgPSBubztcbiAgICAvL3Nob3dzIHdoaWNoIHBsYXllciBvd25zIHRoZSBjZWxsLy9cbiAgICAvL2xldCBwbGF5ZXIgPSBncmlkLmRhdGFzZXQucGxheWVyY2VsbCA9IFwicGxheWVyXCIrcGx5cjtcbiAgICBcbiAgICAvL2NyZWF0aW5nIGEgY2xhc3MgZm9yIGVhY2ggZ3JpZCBzbyB3ZSBjYW4gYWNjZXNzIGl0IGZyb20gdGhlIGZ1bmN0aW9uc1xuICAgIGdyaWQuY2xhc3NMaXN0LmFkZChcImNlbGxcIik7XG4gICAgLy9jcmVhdGluZyBhbiBpZCB0aGF0IG1hdGNoZXMgaXRzIGNvb3JkaW5hdGVzXG4gICAgZ3JpZC5zZXRBdHRyaWJ1dGUoJ2lkJyxncmlkLmRhdGFzZXQubGV0dGVyK2dyaWQuZGF0YXNldC5udW1iZXIpXG4gICAgXG4gICAgICAgICBcbiAgICBsZXQgZ2FtZWJvYXJkID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZWJvYXJkMVwiKTtcbiAgICBcbiAgICBnYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ3JpZCk7XG4gICAgXG4gICAgfVxuICAgIFxuICAgIC8vY3JlYXRlIHRoZSB3aG9sZSBncmlkIHdpdGggYmVsb3cgZnVuY3Rpb25cbiAgICBjb25zdCBjcmVhdGVHYW1lYm9hcmQgPSAoKSA9PntcbiAgICBcbiAgICBmb3IobGV0IGk9MDtpPDExO2krKyl7XG4gICAgICAgIFxuICAgIFxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCIwXCIsMCxpKVxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJBXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkJcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQ1wiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJEXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkVcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRlwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJHXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkhcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJKXCIsaSk7XG4gICAgXG4gICAgfVxuICAgIH1cbiAgICByZXR1cm4ge2NyZWF0ZUdyaWRzLGNyZWF0ZUdhbWVib2FyZH1cbiAgICB9KSgpO1xuXG4gICAgZXhwb3J0e0dhbWVib2FyZE1vZHVsZX07IiwiLy90aGUgY2hvb29zZSBjb29yZGluYXRlcyBmdW5jdGlvblxuZnVuY3Rpb24gY2hvb3NlQ3JkbnRzKFN0cnRMdHRycyxTdHJ0Tm8sbGVuZ3RoLFZvckgpe1xuICAgIGxldCBjb29yZCA9IFtdO1xuICAgIFxuICAgIGlmKFZvckg9PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1sZW5ndGg7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoU3RydE5vPm92ZXIpe1N0cnRObyA9IG92ZXJ9XG4gICAgLy9pZihWb3JIPT09XCJWZXJ0aWNhbFwiKXt9IFdpbGwgYmUgdHJlYXRpbmcgdGhpcyB0ZXN0aW5nIGFzIGNvbXBsZXRlIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gICAgZm9yKGxldCBpPTE7aTxsZW5ndGgrMTtpKyspe1xuICAgICAgICBjb29yZC5wdXNoKFN0cnRMdHRycyArIFN0cnRObysrKVxuICAgIH1cbn1cblxuZWxzZSBpZihWb3JIPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPSBTdHJ0THR0cnMuY2hhckNvZGVBdCgwKVxuICAgIGxldCBvdmVyID0gNzUtbGVuZ3RoO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKEx0ck51bWJlcj5vdmVyKXtMdHJOdW1iZXIgPSBvdmVyfVxuICAgIGNvbnNvbGUubG9nKEx0ck51bWJlcilcbiAgICBjb25zb2xlLmxvZyhvdmVyKVxuICAgIFxuICAgIGZvcihsZXQgaT0xO2k8bGVuZ3RoKzE7aSsrKXtcbiAgICAgICAgY29vcmQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIFN0cnRObylcbiAgICB9XG5cbn1cbiAgICByZXR1cm4gY29vcmQ7XG5cbn1cblxuZXhwb3J0IHtjaG9vc2VDcmRudHN9IiwiaW1wb3J0e3BpcCxkaXJlY3Rpb24scGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwbGF5ZXJCYXNlLGNoYW5QbGF5ZXJ9IGZyb20gJy4vaW5kZXgnXG5pbXBvcnR7Y2hvb3NlQ3JkbnRzfSBmcm9tICcuL2Nob29zZUNvb3JkaW5hdGVzJ1xuXG5cbmZ1bmN0aW9uIHNoaXBmYWN0b3J5KG5hbWUsY29vcmRpbmF0ZXMpe1xuICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB0aGlzLmNvb3JkaW5hdGVzID0gY29vcmRpbmF0ZXNcbiAgICBcbiAgfVxuXG5cbiAgY29uc3QgY2FycmllciA9ICh0KSA9PnsgICAgXG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkNhcnJpZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDt9XG4gICAgUEMucHVzaChndW5uKTtcbiAgICAgICAgXG4gICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICBwLnRleHRDb250ZW50ID0gJ0NhcnJpZXInICtcIi1cIisgY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAxY1wiKS5hcHBlbmRDaGlsZChwKTtcbiAgICBcbiAgICByZXR1cm4gUEM7XG4gICAgfVxuXG4gIGNvbnN0IGJhdHRsZXNoaXAgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkJhdHRsZXNoaXBcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwzLGRpcmVjdGlvbikpXG4gICAgbGV0IFBDO1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDt9XG4gICAgUEMucHVzaChndW5uKTtcbiAgICBjaGFuUGxheWVyKCk7XG5cbiAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICBwLnRleHRDb250ZW50ID0gJ0JhdHRsZVNoaXAnICtcIi1cIisgY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMyxkaXJlY3Rpb24pXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAxY1wiKS5hcHBlbmRDaGlsZChwKTtcbiAgICBcbiAgICByZXR1cm4gUEM7XG4gIH1cbiAgY29uc3QgY3J1aXNlciA9ICgpID0+e31cbiAgY29uc3Qgc3VibWFyaW5lID0gKCkgPT57fVxuICBjb25zdCBkZXN0cm95ZXIgPSAoKSA9Pnt9XG5cbiAgZXhwb3J0IHtzaGlwZmFjdG9yeSxjYXJyaWVyLGJhdHRsZXNoaXB9IiwiaW1wb3J0IHtzcSxkaXJlY3Rpb259IGZyb20gJy4vaW5kZXgnXG5jb25zdCBkb21Nb2R1bGUgPSAoKCkgPT57XG4vL2Z1bmN0aW9uIGZvciBoaWdobGlnaHRpbmcgc3F1YXJlcyB3aGVuIGhvdmVyaW5nXG5mdW5jdGlvbiBob3Zlcih0KXt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJncmVlblwiO1xubGV0IG51bWIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbmxldCBsZXR0ZXJyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXJcbmlmKGRpcmVjdGlvbj09PVwiVlwiKXtcbmZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImdyZWVuXCJ9fVxuZWxzZSBpZihkaXJlY3Rpb249PT1cIkhcIil7XG4gICAgbGV0IEx0ck51bWJlciA9bGV0dGVyci5jaGFyQ29kZUF0KDApXG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgbnVtYikuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwiZ3JlZW5cIn1cbn1cbn1cblxuLy9mdW5jdGlvbiBmb3IgcmV0dXJuaW5nIHNxdWFyZSBjb2xvciB0byB3aGl0ZSBhZnRlciBsZWF2aW5nXG5mdW5jdGlvbiBsZWF2ZSh0KXt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwiO1xubGV0IG51bWIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbmxldCBsZXR0ZXJyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXJcbmlmKGRpcmVjdGlvbj09PVwiVlwiKXtcbiAgICBmb3IobGV0IGk9MDtpPHNxO2krKyl7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGV0dGVycisoK251bWIraSkpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIn19XG4gICAgZWxzZSBpZihkaXJlY3Rpb249PT1cIkhcIil7XG4gICAgICAgIGxldCBMdHJOdW1iZXIgPWxldHRlcnIuY2hhckNvZGVBdCgwKVxuICAgICAgICBmb3IobGV0IGk9MDtpPHNxO2krKyl7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgbnVtYikuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwid2hpdGVcIn1cbiAgICB9XG4gICAgfVxuXG4gICAgLy9wdXJlbHkgZm9yIGJ1aWxkaW5nIHB1cnBvc2VzXG5mdW5jdGlvbiBzaG93Q29vcmRwMSgpe1xuICAgIGZvcihsZXQgaT0wO2k8cGxheWVyMWNvb3JkLmxlbmd0aDtpKyspe1xuICAgICAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICAgIHAudGV4dENvbnRlbnQgPSBwbGF5ZXIxY29vcmRbaV0ubmFtZSArJy0nK3BsYXllcjFjb29yZFtpXS5jb29yZGluYXRlcztcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMWNcIikuYXBwZW5kQ2hpbGQocCk7XG4gICAgICB9fVxuXG5yZXR1cm57aG92ZXIsbGVhdmUsc2hvd0Nvb3JkcDF9XG59KSgpO1xuXG5cbmV4cG9ydHtkb21Nb2R1bGV9IiwiaW1wb3J0IHtHYW1lYm9hcmRNb2R1bGV9IGZyb20gJy4vZ2FtZWJvYXJkJ1xuaW1wb3J0IHtjaG9vc2VDcmRudHN9IGZyb20gJy4vY2hvb3NlQ29vcmRpbmF0ZXMnXG5pbXBvcnQge3NoaXBmYWN0b3J5LGNhcnJpZXIsYmF0dGxlc2hpcH0gZnJvbSAnLi9zaGlwcydcbmltcG9ydCB7ZG9tTW9kdWxlfSBmcm9tICcuL2RvbSdcblxuXG5cblxuICAvL2Nvb3JkaW5hdGVzIG9mIGVhY2ggcGxheWVycyBzaGlwLCBqdXN0IGZvciB0ZXN0aW5nIHVudGlsIHdlIHVzZSBtdWx0aXBsZSBzaGlwc1xuICBcbiAgbGV0IHBsYXllcjFjb29yZD1bXTtcblxuICBcbiAgbGV0IHBsYXllcjJjb29yZD1bXTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMmNcIikudGV4dENvbnRlbnQgPSBwbGF5ZXIyY29vcmQ7XG4gIC8vVj1WZXJ0aWNhbCwgSD1Ib3Jpem9udGFsXG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICAvL3BsYXllciBpbiBwbGF5XG4gIGxldCBwbGF5ZXJCYXNlID0gW1wicGxheWVyMVwiLFwicGxheWVyMlwiXTtcbiAgbGV0IHBpcCA9IHBsYXllckJhc2VbMF07XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO1xuICAvL3RoZSBzcXVhcmVzIHRoYXQgbmVlZCBoaWdobGlnaHRpbmcgZm9yIHRoZSBkb21cbiAgbGV0IHNxO1xuICBcblxuLy9idXR0b24gdG8gY2hhbmdlIHRoZSBwb3NpdGlvbmluZyBvZiB0aGUgcGxhY2VtZW50XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e2lmKGRpcmVjdGlvbj09PVwiVlwiKXtkaXJlY3Rpb249XCJIXCI7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblwiKS50ZXh0Q29udGVudD1cIkhvcml6b250YWxcIjt9ZWxzZSBpZihkaXJlY3Rpb249PT1cIkhcIil7ZGlyZWN0aW9uPVwiVlwiO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25cIikudGV4dENvbnRlbnQ9XCJWZXJ0aWNhbFwifX0pXG5cblxuLy9mdW5jdGlvbiBjaGFuZ2VzIHBsYXllclxuY29uc3QgY2hhblBsYXllciA9ICgpPT57XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInAyY1wiKS50ZXh0Q29udGVudCA9IHBsYXllcjJjb29yZDtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe3BpcCA9IHBsYXllckJhc2VbMV07IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7cGlwID0gcGxheWVyQmFzZVswXTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG4gICAgZWxzZXtwaXAgPSBwbGF5ZXJCYXNlWzBdO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cblxufVxuXG5cblxuXG5cblxuLy9oaXQgZnVuY3Rpb24gZm9yIHRoZSBtYWluIGdhbWUgbG9vcFxuLy9pbiBmdXR1cmUgd2lsbCBtYXJrIHRoZWUgc3F1YXJlIGFzIGhpdCBub3QgYWxsb3dpbmcgdGhlIHBsYXllciB0byBoaXQgYWdhaW5cbi8vdGFrZXMgdGhlIGNvb3JkaW5hdGVzIG91dCBvZiB0aGUgcGxheWVycyBhcnJheVxuZnVuY3Rpb24gaGl0KHQpe1xuICAgIGxldCBQQyA9IHBsYXllcjFjb29yZDtcbiAgICBsZXQgTCA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBOID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgbGV0IGhpdENvb3JkID0gTCtOO1xuICAgIGNvbnNvbGUubG9nKGhpdENvb3JkKTtcbiAgICBcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkO31cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIxY29vcmQ7fVxuZm9yKGxldCBpPTA7aTxQQ1swXS5sZW5ndGg7aSsrKXtcbiAgICBpZihQQ1swXVtpXT09PWhpdENvb3JkKXtcbiAgICAgICAgYWxlcnQoXCJISVRcIik7XG4gICAgUENbMF0uc3BsaWNlKGksMSk7XG4gICAgY29uc29sZS5sb2coUENbMF0pO1xuICAgIGdhbWVPdmVyKCk7XG4gICAgfX1jaGFuUGxheWVyKCk7XG4gICAgcmV0dXJuIFBDfVxuXG4gICAgZnVuY3Rpb24gZ2FtZU92ZXIoKXtcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyMWNvb3JkWzBdKVxuICAgICAgICBpZihwbGF5ZXIxY29vcmRbMF0ubGVuZ3RoID09PSAwKXthbGVydChcIlBsYXllciB0d28gd2luc1wiKTt9XG4gICAgICAgIGVsc2UgaWYocGxheWVyMmNvb3JkWzBdLmxlbmd0aCA9PT0gMCl7YWxlcnQoXCJQbGF5ZXIgb25lIHdpbnNcIil9XG4gICAgfVxuICAgIFxuXG4vL2Jhc2ljYWxseSBhIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGEgMiBzcXVhcmUgc2hpcFxuLypjb21tZW50ZWQgb3V0IHRvIHRlc3QgY3Jvc3Mgd2VicGFja1xuZnVuY3Rpb24gYnR0bHNoaXAxKHQpe1xuICAgIFxudC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbmxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbmxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbi8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKVxubGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJHdW5uZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpXG5wbGF5ZXIxY29vcmQucHVzaChndW5uKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicDFjXCIpLnRleHRDb250ZW50ID0gcGxheWVyMWNvb3JkO1xuY2hhblBsYXllcigpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwMWNcIikudGV4dENvbnRlbnQgPSBwbGF5ZXIxY29vcmRbMF0ubmFtZSArXCItXCIrIHBsYXllcjFjb29yZFswXS5jb29yZGluYXRlcztcbnJldHVybiBwbGF5ZXIxY29vcmQ7XG59Ki9cblxuLy90byBiZSBhYmxlIHRvIGludm9rZSBib3RoIGZ1bmN0aW9ucyBhbmQgdG8gcmVtb3ZlIGl0XG4vL25lZWQgdG8gZ2V0IHJpZCBvZiB0aGlzIGFuZCBjYWxsIGl0IGFsbCBpbiB0aGUgbGlzdGVuZXJcblxuXG5cblxuXG5mdW5jdGlvbiBwYjIoKXtcbiAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcblxuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICBzcT0yO1xuICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYXJyaWVyKSBcbiAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycscGIyKVxuICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxidHRsc2hpcDIpXG59XG59XG5cbmZ1bmN0aW9uIGJ0dGxzaGlwMih0KXtcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgICAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKVxuICAgICAgICAgcGxheWVyMmNvb3JkLnB1c2goY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMixkaXJlY3Rpb24pKTtcbiAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicDJjXCIpLnRleHRDb250ZW50ID0gcGxheWVyMmNvb3JkO1xuICAgICAgICAgY2hhblBsYXllcigpO1xuICAgICAgICAgcm12ZXZlbigpO1xuICAgICAgICAgcGxheUdhbWUoKTt9XG5cbi8vcmVtb3ZlIGV2ZW50IGxpc3RlbmVyc1xuZnVuY3Rpb24gcm12ZXZlbigpe1xuICAgIGxldCBjZWxscz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsYnR0bHNoaXAyKVxuICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbn1cbn1cblxuXG5cbiAgICBcbiAgICBcbmZ1bmN0aW9uIHBsYXlHYW1lKCl7XG4gICAgbGV0IGNlbGxzPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIik7XG5mb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuXG5jZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsaGl0KVxuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywodCk9Pnt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJyZWRcIn0pXG5jZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywodCk9Pnt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwifSlcbn1cblxufVxuXG5cbmNvbnN0IHNlbGVjdGlvbk1vZHVsZSA9ICgoKSA9PntcblxuICAgICAgICBcbiAgICAvL2FkZHMgYW4gZXZlbnQgbGlzdGVuZXIgdG8gZXZlcnkgZ3JpZCBjZWxsIGFsbG93aW5nIHVzIHRvIGNob29zZSBvdXIgY29vcmRpbmF0ZXMsbWFwIHRoZW0gdG8gdGhlIGFycmF5IHRoZW4gY2hhbmdlIHBsYXllclxuICAgIGZ1bmN0aW9uIHAxY2FycmllclNoaXAoKXtcbiAgICAgICBcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdhbWVib2FyZCgpO1xuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT0yO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhcnJpZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5wMWJhdHRsZVNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgZnVuY3Rpb24gcDFiYXR0bGVTaGlwKCl7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9MztcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYXJyaWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFiYXR0bGVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxiYXR0bGVzaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxwYjIpIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJue3AxY2FycmllclNoaXAscDFiYXR0bGVTaGlwfVxuICAgIFxuICAgIH0pKCk7XG5cblxuXG5cblxuXG5zZWxlY3Rpb25Nb2R1bGUucDFjYXJyaWVyU2hpcCgpO1xuXG5cblxuXG5leHBvcnQge3NxLGRpcmVjdGlvbixwaXAscGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwbGF5ZXJCYXNlLGNoYW5QbGF5ZXJ9XG5cblxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJHYW1lYm9hcmRNb2R1bGUiLCJjcmVhdGVHcmlkcyIsImx0ciIsIm5vIiwiaWQiLCJncmlkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwYWRkaW5nIiwiYm9yZGVyIiwidGV4dENvbnRlbnQiLCJ0ZXh0QWxpZ24iLCJkYXRhc2V0IiwiaGl0IiwibGV0dGVyIiwibnVtYmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUdhbWVib2FyZCIsImkiLCJjaG9vc2VDcmRudHMiLCJTdHJ0THR0cnMiLCJTdHJ0Tm8iLCJsZW5ndGgiLCJWb3JIIiwiY29vcmQiLCJvdmVyIiwicHVzaCIsIkx0ck51bWJlciIsImNoYXJDb2RlQXQiLCJjb25zb2xlIiwibG9nIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwic2hpcGZhY3RvcnkiLCJuYW1lIiwiY29vcmRpbmF0ZXMiLCJ0aGlzIiwiY2FycmllciIsInQiLCJ0YXJnZXQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJQQyIsImd1bm4iLCJkaXJlY3Rpb24iLCJwaXAiLCJwbGF5ZXJCYXNlIiwicGxheWVyMmNvb3JkIiwicCIsImJhdHRsZXNoaXAiLCJjaGFuUGxheWVyIiwiZG9tTW9kdWxlIiwibnVtYiIsImxldHRlcnIiLCJzcSIsImFkZEV2ZW50TGlzdGVuZXIiLCJoaXRDb29yZCIsImFsZXJ0Iiwic3BsaWNlIiwicGIyIiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJ0dGxzaGlwMiIsInJtdmV2ZW4iLCJwbGF5R2FtZSIsInNlbGVjdGlvbk1vZHVsZSIsInAxY2FycmllclNoaXAiLCJwMWJhdHRsZVNoaXAiXSwic291cmNlUm9vdCI6IiJ9