(()=>{"use strict";var e={d:(t,l)=>{for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{jK:()=>b,zf:()=>k,o7:()=>w,bF:()=>G,P4:()=>Y,VL:()=>S,hJ:()=>B,yR:()=>L,He:()=>I,w7:()=>A,q2:()=>M,UX:()=>H,sq:()=>C,t:()=>N,Nn:()=>V});const t={createGrids:(e,t,l)=>{let n=document.createElement("div");n.style.padding="10px",n.style.border=0===l||0===t?"none":"solid black 2px",n.textContent=l,n.style.textAlign="center",0===l&&"0"===e?n.textContent=t:0===t&&"0"!=e&&(n.textContent=e),n.dataset.hit="No",n.dataset.P1hit="N",n.dataset.P2hit="N",n.dataset.letter=e,n.dataset.number=t,n.classList.add("cell"),n.setAttribute("id",n.dataset.letter+n.dataset.number),document.getElementById("gameboard1").appendChild(n)},createGameboard:()=>{for(let e=0;e<11;e++)t.createGrids("0",0,e),t.createGrids("A",e),t.createGrids("B",e),t.createGrids("C",e),t.createGrids("D",e),t.createGrids("E",e),t.createGrids("F",e),t.createGrids("G",e),t.createGrids("H",e),t.createGrids("I",e),t.createGrids("J",e)}};function l(e,t,l,n){let o=[];if("V"===n){let n=11-l;t>n&&(t=n);for(let n=1;n<l+1;n++)o.push(e+t++)}else if("H"===n){let n=e.charCodeAt(0),r=75-l;n>r&&(n=r),console.log(n),console.log(r);for(let e=1;e<l+1;e++)o.push(String.fromCharCode(n++)+t)}return o}function n(e,t){let l=e,n=t,o=0;for(let e=0;e<n.length;e++)for(let t=0;t<l.length;t++)for(let r=0;r<l[t].coordinates.length;r++)l[t].coordinates[r]===n[e]&&o++;return o=o>0?"Y":"N",o}function o(e,t){this.name=e,this.coordinates=t,this.hitShip=()=>{alert("Struck the "+e+" ship"),"Y"===k&&Y===A[1]&&(alert("well done computer"),0===H&&H++)},this.isSunk=()=>{0===t.length&&alert("Sunk the "+e+" ship")}}let r;const s=e=>{e.target.style.backgroundColor="red";let t,n=e.target.dataset.letter,s=e.target.dataset.number,a=new o("Carrier",l(n,s,2,w));return"0"===s?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),t.push(a)),t},a=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Battleship",l(s,a,3,w));return"0"===a?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),"Y"===n(t,l(s,a,3,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},i=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Cruiser",l(s,a,4,w));return"0"===a?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),"Y"===n(t,l(s,a,4,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},c=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Submarine",l(s,a,5,w));return"0"===a?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),"Y"===n(t,l(s,a,5,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},d=e=>{e.target.style.backgroundColor="red";let t,s=e.target.dataset.letter,a=e.target.dataset.number,i=new o("Destroyer",l(s,a,6,w));return"0"===a?console.log("Stay in the grid."):(Y===A[0]?(t=S,r="p1c"):Y===A[1]&&(t=L,r="p2c"),"Y"===n(t,l(s,a,6,w))?alert("These tiles have already been assigned, please choose different tiles"):t.push(i)),t},u=function(e){let t=e.target.dataset.number,l=e.target.dataset.letter,n="blue";if("V"===w){let e=11-C;t>e&&(t=e),n="0"===t?"white":"grey";for(let e=0;e<C;e++)document.getElementById(l+(+t+e)).style.backgroundColor=n}else if("H"===w){let e=l.charCodeAt(0),n=75-C;e>n&&(e=n);for(let l=0;l<C;l++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="grey"}},g=function(e){e.target.backgroundColor="white";let t=e.target.dataset.number,l=e.target.dataset.letter,n=l+t;if(console.log(n),"V"===w){let e=11-C;t>e&&(t=e);for(let e=0;e<C;e++)document.getElementById(l+(+t+e)).style.backgroundColor="white"}else if("H"===w){let e=l.charCodeAt(0),n=75-C;e>n&&(e=n);for(let l=0;l<C;l++)document.getElementById(String.fromCharCode(e++)+t).style.backgroundColor="white"}},h=function(){let e=B;Y===A[0]?e=B:Y===A[1]&&(e=I);for(let t=0;t<e.length;t++)document.getElementById(e[t]).style.backgroundColor="red"},m=function(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white"},y=function(e){"0"===e.target.dataset.number?e.target.style.backgroundColor="white":e.target.style.backgroundColor="red"},p=function(e){Y===A[0]?b=e.target.dataset.P1hit:Y===A[1]&&(b=e.target.dataset.P2hit),"Y"===b?e.target.style.backgroundColor="red":"N"===b&&(e.target.style.backgroundColor="white")},f=function(){let e=S;Y===A[0]?(e=S,console.log(e)):Y===A[1]&&(e=L,console.log(e));for(let t=0;t<e.length;t++)for(let l=0;l<e[t].coordinates.length;l++)document.getElementById(e[t].coordinates[l]).style.backgroundColor="grey"},v=(()=>{var e=document.getElementById("myModal"),t=document.getElementById("myBtn");let l=document.getElementById("para1"),n=document.getElementById("para2");document.getElementsByClassName("close")[0];let o=document.getElementById("PSbuttons");o.style.display="none";let r=document.getElementById("compHit");function s(){e.style.display="none"}r.style.display="none",t.onclick=function(){e.style.display="None"};let a=document.getElementById("frnd"),i=document.getElementById("comp");return{showModule:function(){e.style.display="block",l.textContent="CHANGE PLACES!",n.textContent="Click button when ready.",o.style.display="none",t.style.display="block"},playerSelect:function(){e.style.display="block",l.textContent="Are you playing with a friend or against our AI?",t.style.display="none",document.querySelector(".close").style.display="none",o.style.display="block",a.addEventListener("click",(()=>{k="N",e.style.display="none"})),i.addEventListener("click",(()=>{k="Y",e.style.display="none"}))},compHitModal:function(){e.style.display="block",l.textContent="Please click the button below to activate the AI choice!",t.style.display="none",r.style.display="block",document.querySelector(".close").style.display="none",o.style.display="none",r.addEventListener("click",G),r.addEventListener("click",s)},closeModal:s}})(),E=(()=>{function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}return{hit:function(){console.log(H),1===H||2===H||(M=e(0,V.length-1));let t=V[M];return V.splice(M,1),console.log("Random no: "+M),console.log("Length: "+V.length),console.log(V),t},selectCarrier:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Carrier",l(r,s,2,a));"Y"===n(i,l(r,s,2,a))?E.selectCarrier():(i.push(c),E.selectBattleship())},selectBattleship:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Battleship",l(r,s,3,a));"Y"===n(i,l(r,s,3,a))?E.selectBattleship():(i.push(c),E.selectCruiser())},selectCruiser:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Cruiser",l(r,s,4,a));"Y"===n(i,l(r,s,4,a))?E.selectCruiser():(i.push(c),E.selectSubmarine())},selectSubmarine:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Submarine",l(r,s,5,a));"Y"===n(i,l(r,s,5,a))?E.selectSubmarine():(i.push(c),E.selectDestroyer())},selectDestroyer:function(){let t=e(65,74),r=String.fromCharCode(t),s=Math.floor(10*Math.random()+1),a="V";a=1===e(1,2)?"V":"H";let i=L,c=new o("Destroyer",l(r,s,6,a));"Y"===n(i,l(r,s,6,a))?E.selectDestroyer():(i.push(c),N())},randomIntFromInterval:e,targetArray:function(){for(let e=65;e<75;e++)for(let t=1;t<3;t++)V.push(String.fromCharCode(e)+t)}}})();let C,b,k="N",S=[],L=[],B=[],I=[],w="V",A=["player1","player2"],Y=A[0],P=S;Y===A[0]?P=S:Y===A[1]&&(P=L),document.getElementById("pip").textContent=Y;let M,V=[],H=0;E.targetArray(),console.log(V),document.getElementById("Chnge").addEventListener("click",(()=>{"V"===w?(w="H",document.getElementById("position").textContent="Horizontal"):"H"===w&&(w="V",document.getElementById("position").textContent="Vertical")})),document.getElementById("shwshipos").addEventListener("mouseover",(()=>{m(),f()})),document.getElementById("shwshipos").addEventListener("mouseleave",(()=>{m(),h()}));const x=()=>{let e;e="Y"===k?v.compHitModal():v.showModule(),Y===A[0]?(Y=A[1],P=L,document.getElementById("pip").textContent=Y):Y===A[1]?(Y=A[0],P=S,document.getElementById("pip").textContent=Y):(Y=A[0],P=L,document.getElementById("pip").textContent=Y),m(),h()};function G(e){console.log(e.target.dataset.letter),console.log(Y);let t,l,n,o=S,r=B,s=0;if(console.log(s),"Y"===k&&Y===A[1]?(n=E.hit(),alert("Computer has struck Tile: "+n)):(t=e.target.dataset.letter,l=e.target.dataset.number,n=t+l),console.log(n),console.log(o.length),Y===A[0]?(o=L,r=B,b=e.target.dataset.P1hit):Y===A[1]&&"Y"!=k?(o=S,r=I,b=e.target.dataset.P2hit):Y===A[1]&&"Y"===k&&(o=S,r=I),"0"===l)console.log("Stay in the grid.");else if("Y"===b)console.log("Already been hit, try again.");else{Y===A[0]?(o=L,r=B,b=e.target.dataset.P1hit="Y"):Y===A[1]&&(o=S,r=I,b=e.target.dataset.P2hit="Y");for(let e=0;e<o.length;e++)for(let t=0;t<o[e].coordinates.length;t++)o[e].coordinates[t]===n&&(console.log(o[e].coordinates),o[e].coordinates.splice(t,1),o[e].hitShip(),o[e].isSunk(),s++,q(),console.log("Player one sunk ships: 0"),console.log("Player two sunk ships: 0"));r.push(n),console.log("P1 strikes: "+B),console.log("P2 strikes: "+I),"Y"===k&&Y===A[1]&&H>0&&s>0&&H++,x()}}function q(){let e,t=0,l=S;Y===A[0]?(l=L,e="Player One"):Y===A[1]&&(l=S,e="Player Two");for(let e=0;e<l.length;e++)0===l[e].coordinates.length&&++t;console.log(t),5===t&&alert(e+" has won!")}function N(){if(P.length>4)if("Y"===k){alert("Computer is choosing battle positions"),C=1;let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].style.backgroundColor="white",document.getElementById("ingamebuttons").style.display="block",document.getElementById("positionPara").style.display="none",document.getElementById("Chnge").style.display="none";T()}else{C=1,x();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",N),e[t].style.backgroundColor="white",document.getElementById("ingamebuttons").style.display="block",document.getElementById("positionPara").style.display="none",document.getElementById("Chnge").style.display="none";T()}}function T(){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].addEventListener("click",G),e[t].style.backgroundColor="white",e[t].removeEventListener("mouseover",u),e[t].removeEventListener("mouseleave",g),e[t].addEventListener("mouseover",y),e[t].addEventListener("mouseleave",p)}console.log("OIL"),console.log("Nnnnn"),console.log("INRST");const D={p1carrierShip:function(){let e=document.querySelectorAll(".cell");C=2;for(let t=0;t<e.length;t++)e[t].addEventListener("click",s),e[t].addEventListener("click",D.p1battleShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)},p1battleShip:function(){if(P.length>0){let e=document.querySelectorAll(".cell");C=3;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",s),e[t].removeEventListener("click",D.p1battleShip),e[t].addEventListener("click",a),e[t].addEventListener("click",D.p1cruiserShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1cruiserShip:function(){if(P.length>1){console.log(P);let e=document.querySelectorAll(".cell");C=4;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",a),e[t].removeEventListener("click",D.p1cruiserShip),e[t].addEventListener("click",i),e[t].addEventListener("click",D.p1submarineShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1submarineShip:function(){if(P.length>2){let e=document.querySelectorAll(".cell");C=5;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",i),e[t].removeEventListener("click",D.p1submarineShip),e[t].addEventListener("click",c),e[t].addEventListener("click",D.p1destroyerShip),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},p1destroyerShip:function(){if(P.length>3){let e=document.querySelectorAll(".cell");C=6;for(let t=0;t<e.length;t++)e[t].removeEventListener("click",c),e[t].removeEventListener("click",D.p1destroyerShip),e[t].addEventListener("click",d),Y===A[1]?e[t].addEventListener("click",N):Y===A[0]&&e[t].addEventListener("click",D.loop),e[t].addEventListener("mouseover",u),e[t].addEventListener("mouseleave",g)}},loop:function(){if(P.length>4)if("Y"===k){let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",D.loop),e[t].style.backgroundColor="white";E.selectCarrier()}else{x();let e=document.querySelectorAll(".cell");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",d),e[t].removeEventListener("click",D.loop),e[t].style.backgroundColor="white";D.p1carrierShip()}}};v.playerSelect(),t.createGameboard(),D.p1carrierShip()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEQsR0FBRzZFLGlCQUFpQixRQUFRbUIsR0FDekRsRSxJQUFRQyxFQUFXLElBQUl5QixFQUFNeEQsR0FBRzZFLGlCQUFpQixRQUFRZ0MsRUFBZ0JNLE1BRTVFM0QsRUFBTXhELEdBQUc2RSxpQkFBaUIsWUFBWTdCLEdBQzFDUSxFQUFNeEQsR0FBRzZFLGlCQUFpQixhQUFhN0IsS0FxQ3lDbUUsS0FoQ3BGLFdBQ0ksR0FBR2pCLEVBQUs5RixPQUFPLEVBRVgsR0FBUyxNQUFOeUIsRUFBVSxDQUVULElBQUkyQixFQUFRM0UsU0FBUzRFLGlCQUFpQixTQUU5QyxJQUFJLElBQUl6RCxFQUFFLEVBQUVBLEVBQUV3RCxFQUFNcEQsT0FBT0osSUFDdkJ3RCxFQUFNeEQsR0FBRzRHLG9CQUFvQixRQUFRN0QsR0FDckNTLEVBQU14RCxHQUFHNEcsb0JBQW9CLFFBQVFDLEVBQWdCTSxNQUNyRDNELEVBQU14RCxHQUFHakIsTUFBTXVELGdCQUFrQixRQUc3QnlDLEVBQVdXLG9CQUNYLENBSVpTLElBQ0ksSUFBSTNDLEVBQVEzRSxTQUFTNEUsaUJBQWlCLFNBRXRDLElBQUksSUFBSXpELEVBQUUsRUFBRUEsRUFBRXdELEVBQU1wRCxPQUFPSixJQUN2QndELEVBQU14RCxHQUFHNEcsb0JBQW9CLFFBQVE3RCxHQUNyQ1MsRUFBTXhELEdBQUc0RyxvQkFBb0IsUUFBUUMsRUFBZ0JNLE1BQ3JEM0QsRUFBTXhELEdBQUdqQixNQUFNdUQsZ0JBQWtCLFFBRTdDdUUsRUFBZ0JDLG1CQWFiakQsRUFBWWMsZUFDWHBHLEVBQWdCd0Isa0JBQ3BCOEcsRUFBZ0JDLGlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2JhdHRsZXNoaXBzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2Nob29zZUNvb3JkaW5hdGVzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL292ZXJMYXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvc2hpcHMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL21vZGFsLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXBzLy4vc3JjL2NvbXB1dGVyQUkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcHMvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJjb25zdCBHYW1lYm9hcmRNb2R1bGUgPSAoKCkgPT4ge1xuXG4gICAgbGV0IGJvcmQgPSBcInNvbGlkIGJsYWNrIDJweFwiO1xuICAgIGxldCBub2JvcmQgPSBcIm5vbmVcIjtcbiAgICBcbiAgICBcbiAgICBjb25zdCBjcmVhdGVHcmlkcyA9IChsdHIsbm8saWQpID0+e1xuICAgIGxldCBncmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgIGdyaWQuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuICAgIC8vdHJ5aW5nIHRvIHRha2Ugb3V0IHRoZSBib3JkZXJpbmcgb2YgdGhlIG5vdCBpbiBwbGF5IGNlbGxzXG4gICAgaWYoaWQ9PT0gMCl7Z3JpZC5zdHlsZS5ib3JkZXI9bm9ib3JkfVxuICAgIGVsc2UgaWYobm89PT0wKXtncmlkLnN0eWxlLmJvcmRlciA9IG5vYm9yZDt9XG4gICAgZWxzZXtncmlkLnN0eWxlLmJvcmRlciA9IGJvcmQ7fVxuICAgIFxuICAgIFxuICAgIGdyaWQudGV4dENvbnRlbnQgPSBpZDtcbiAgICBncmlkLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgaWYoaWQ9PT0wICYmIGx0cj09PVwiMFwiKXtncmlkLnRleHRDb250ZW50ID0gbm99XG4gICAgZWxzZSBpZihubz09PTAgJiYgbHRyIT1cIjBcIil7Z3JpZC50ZXh0Q29udGVudCA9IGx0cn1cbiAgICBncmlkLmRhdGFzZXQuaGl0ID0gXCJOb1wiXG4gICAgZ3JpZC5kYXRhc2V0LlAxaGl0PVwiTlwiXG4gICAgZ3JpZC5kYXRhc2V0LlAyaGl0PVwiTlwiXG4gICAgbGV0IGxldHRlciA9IGdyaWQuZGF0YXNldC5sZXR0ZXIgPSBsdHI7XG4gICAgbGV0IG51bWJlciA9IGdyaWQuZGF0YXNldC5udW1iZXIgPSBubztcbiAgICAvL3Nob3dzIHdoaWNoIHBsYXllciBvd25zIHRoZSBjZWxsLy9cbiAgICAvL2xldCBwbGF5ZXIgPSBncmlkLmRhdGFzZXQucGxheWVyY2VsbCA9IFwicGxheWVyXCIrcGx5cjtcbiAgICBcbiAgICAvL2NyZWF0aW5nIGEgY2xhc3MgZm9yIGVhY2ggZ3JpZCBzbyB3ZSBjYW4gYWNjZXNzIGl0IGZyb20gdGhlIGZ1bmN0aW9uc1xuICAgIGdyaWQuY2xhc3NMaXN0LmFkZChcImNlbGxcIik7XG4gICAgLy9jcmVhdGluZyBhbiBpZCB0aGF0IG1hdGNoZXMgaXRzIGNvb3JkaW5hdGVzXG4gICAgZ3JpZC5zZXRBdHRyaWJ1dGUoJ2lkJyxncmlkLmRhdGFzZXQubGV0dGVyK2dyaWQuZGF0YXNldC5udW1iZXIpXG4gICAgXG4gICAgICAgICBcbiAgICBsZXQgZ2FtZWJvYXJkID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZWJvYXJkMVwiKTtcbiAgICBcbiAgICBnYW1lYm9hcmQuYXBwZW5kQ2hpbGQoZ3JpZCk7XG4gICAgXG4gICAgfVxuICAgIFxuICAgIC8vY3JlYXRlIHRoZSB3aG9sZSBncmlkIHdpdGggYmVsb3cgZnVuY3Rpb25cbiAgICBjb25zdCBjcmVhdGVHYW1lYm9hcmQgPSAoKSA9PntcbiAgICBcbiAgICBmb3IobGV0IGk9MDtpPDExO2krKyl7XG4gICAgICAgIFxuICAgIFxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCIwXCIsMCxpKVxuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJBXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkJcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiQ1wiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJEXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkVcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiRlwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJHXCIsaSk7XG4gICAgICAgIEdhbWVib2FyZE1vZHVsZS5jcmVhdGVHcmlkcyhcIkhcIixpKTtcbiAgICAgICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdyaWRzKFwiSVwiLGkpO1xuICAgICAgICBHYW1lYm9hcmRNb2R1bGUuY3JlYXRlR3JpZHMoXCJKXCIsaSk7XG4gICAgXG4gICAgfVxuICAgIH1cbiAgICByZXR1cm4ge2NyZWF0ZUdyaWRzLGNyZWF0ZUdhbWVib2FyZH1cbiAgICB9KSgpO1xuXG4gICAgZXhwb3J0e0dhbWVib2FyZE1vZHVsZX07IiwiLy90aGUgY2hvb29zZSBjb29yZGluYXRlcyBmdW5jdGlvblxuZnVuY3Rpb24gY2hvb3NlQ3JkbnRzKFN0cnRMdHRycyxTdHJ0Tm8sbGVuZ3RoLFZvckgpe1xuICAgIGxldCBjb29yZCA9IFtdO1xuICAgIFxuICAgIGlmKFZvckg9PT1cIlZcIil7XG4gICAgbGV0IG92ZXIgPSAxMS1sZW5ndGg7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoU3RydE5vPm92ZXIpe1N0cnRObyA9IG92ZXJ9XG4gICAgLy9pZihWb3JIPT09XCJWZXJ0aWNhbFwiKXt9IFdpbGwgYmUgdHJlYXRpbmcgdGhpcyB0ZXN0aW5nIGFzIGNvbXBsZXRlIHZlcnRpY2FsIHBvc2l0aW9uaW5nXG4gICAgZm9yKGxldCBpPTE7aTxsZW5ndGgrMTtpKyspe1xuICAgICAgICBjb29yZC5wdXNoKFN0cnRMdHRycyArIFN0cnRObysrKVxuICAgIH1cbn1cblxuZWxzZSBpZihWb3JIPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPSBTdHJ0THR0cnMuY2hhckNvZGVBdCgwKVxuICAgIGxldCBvdmVyID0gNzUtbGVuZ3RoO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKEx0ck51bWJlcj5vdmVyKXtMdHJOdW1iZXIgPSBvdmVyfVxuICAgIGNvbnNvbGUubG9nKEx0ck51bWJlcilcbiAgICBjb25zb2xlLmxvZyhvdmVyKVxuICAgIFxuICAgIGZvcihsZXQgaT0xO2k8bGVuZ3RoKzE7aSsrKXtcbiAgICAgICAgY29vcmQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKEx0ck51bWJlcisrKSArIFN0cnRObylcbiAgICB9XG5cbn1cbiAgICByZXR1cm4gY29vcmQ7XG5cbn1cblxuZXhwb3J0IHtjaG9vc2VDcmRudHN9IiwiLy9jb2RlIGZvciBpZGVudGlmeWluZyB3aGVuIHRoZSBjaG9zZW4gY29vcmRpbmF0ZXMgb3ZlcmxhcCBcbi8vd2l0aCBjb29yZGluYXRlcyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkXG5cblxuXG5cblxuZnVuY3Rpb24gb3ZlckxhcChhLGIpe1xuLy9QbGM9IHBsYXllciBjb29yZGluYXRlcyAgICBcbmxldCBwbGM9YTtcbi8vY3JkIGlzIHRoZSBuZXcgY29vcmRpbmF0ZXNcbmxldCBjcmQgPWI7XG4vL3ZhcmlhYmxlIHRvIHJldHVyblxubGV0IG92cmxhcD0wO1xuXG5mb3IobGV0IHo9MDt6PGNyZC5sZW5ndGg7eisrKXtcbmZvcihsZXQgcD0wO3A8cGxjLmxlbmd0aDtwKyspe1xuICAgIGZvcihsZXQgaT0wO2k8cGxjW3BdLmNvb3JkaW5hdGVzLmxlbmd0aDtpKyspe1xuICAgIGlmKHBsY1twXS5jb29yZGluYXRlc1tpXT09PWNyZFt6XSl7b3ZybGFwKyt9XG4gICAgXG59XG59XG59XG5pZihvdnJsYXA+MCl7b3ZybGFwPVwiWVwifVxuICAgIGVsc2V7b3ZybGFwPVwiTlwifVxucmV0dXJuIG92cmxhcFxufVxuXG4vKlxuXG4vL3NlY29uZCBhdHRlbXB0IGR1bWJpbmcgaXQgZG93blxuZnVuY3Rpb24gb3ZlckxhcChhLGIpe1xuICAgIC8vUGxjPSBwbGF5ZXIgY29vcmRpbmF0ZXMgICAgXG4gICAgbGV0IHBsYz1hO1xuICAgIC8vY3JkIGlzIHRoZSBuZXcgY29vcmRpbmF0ZXNcbiAgICBsZXQgY3JkID1iO1xuICAgIC8vdmFyaWFibGUgdG8gcmV0dXJuXG4gICAgbGV0IG92cmxhcCA9MDtcbiAgICBcbiAgICBmb3IobGV0IHA9MDtwPHBsYy5sZW5ndGg7cCsrKXtcbiAgICBmb3IobGV0IHo9MDt6PGNyZC5sZW5ndGg7eisrKXtcbiAgICAgICAgaWYocGxjW3BdPT09Y3JkW3pdKXtvdnJsYXArK31cbiAgICAgICAgXG4gICAgfVxuICAgIH1cbiAgICBcbiAgICBpZihvdnJsYXA+MCl7b3ZybGFwPVwiWVwifVxuICAgIGVsc2V7b3ZybGFwPVwiTlwifVxuICAgIHJldHVybiBvdnJsYXBcbiAgICB9XG4gICAgKi9cblxuZXhwb3J0IHtvdmVyTGFwfSIsImltcG9ydHtzbWFydENvdW50ZXIsY2lwLHBpcCxkaXJlY3Rpb24scGxheWVyMWNvb3JkLHBsYXllcjJjb29yZCxwbGF5ZXJCYXNlfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0e2Nob29zZUNyZG50c30gZnJvbSAnLi9jaG9vc2VDb29yZGluYXRlcydcbmltcG9ydHtvdmVyTGFwfSBmcm9tICcuL292ZXJMYXAnXG5cblxuXG5mdW5jdGlvbiBzaGlwZmFjdG9yeShuYW1lLGNvb3JkaW5hdGVzKXtcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy5jb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzXG4gICAgdGhpcy5oaXRTaGlwID0gKCk9PnthbGVydChcIlN0cnVjayB0aGUgXCIgKyBuYW1lICsgXCIgc2hpcFwiKVxuICAgIGlmKGNpcD09PVwiWVwiJiZwaXA9PT1wbGF5ZXJCYXNlWzFdKXthbGVydChcIndlbGwgZG9uZSBjb21wdXRlclwiKVxuICAgICAgaWYoc21hcnRDb3VudGVyPT09MCl7c21hcnRDb3VudGVyKyt9XG4gICAgICBlbHNlIGlmKHNtYXJ0Q291bnRlcj4wKXtzbWFydENvdW50ZXI7fVxuXG4gICAgICBcbiAgXG4gIH1cbn1cbiAgICB0aGlzLmlzU3VuayA9ICgpID0+e2lmKGNvb3JkaW5hdGVzLmxlbmd0aD09PTApe2FsZXJ0KFwiU3VuayB0aGUgXCIrIG5hbWUgK1wiIHNoaXBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgIFxuICB9XG5cbiAgbGV0IGNvb3JkaWQ7XG5cblxuICBjb25zdCBjYXJyaWVyID0gKHQpID0+eyAgICBcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQ2FycmllclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDIsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuIFxuICAgIFBDLnB1c2goZ3Vubik7XG4gIFxuICAgICAgXG4gICAgfVxuICAgIHJldHVybiBQQztcbiAgICB9XG5cbiAgY29uc3QgYmF0dGxlc2hpcCA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiQmF0dGxlc2hpcFwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMyxkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgZWxzZXsgXG4gICAgUEMucHVzaChndW5uKTtcbiAgICBcblxuICAgIFxuICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBjcnVpc2VyID0gKHQpID0+e1xuICAgIHQudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmVkXCI7XG4gICAgbGV0IGxldHRlciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIGxldCBudW1iZXIgPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICAvL2FsZXJ0KFwiWW91ciBiYXR0bGVzaGlwIHdpbGwgaGF2ZSB0aGUgY29vcmRpbmF0ZXM6IFwiK2Nob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLD8/LGRpcmVjdGlvbikpXG4gICAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJDcnVpc2VyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihudW1iZXI9PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNle1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw0LGRpcmVjdGlvbikpPT09XCJZXCIpe2FsZXJ0KFwiVGhlc2UgdGlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWQsIHBsZWFzZSBjaG9vc2UgZGlmZmVyZW50IHRpbGVzXCIpfVxuICAgIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG4gICAgXG5cbiAgICBcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuICBjb25zdCBzdWJtYXJpbmUgPSAodCkgPT57XG4gICAgdC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZWRcIjtcbiAgICBsZXQgbGV0dGVyID0gdC50YXJnZXQuZGF0YXNldC5sZXR0ZXI7XG4gICAgbGV0IG51bWJlciA9IHQudGFyZ2V0LmRhdGFzZXQubnVtYmVyO1xuICAgIC8vYWxlcnQoXCJZb3VyIGJhdHRsZXNoaXAgd2lsbCBoYXZlIHRoZSBjb29yZGluYXRlczogXCIrY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsPz8sZGlyZWN0aW9uKSlcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIlN1Ym1hcmluZVwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDUsZGlyZWN0aW9uKSlcbiAgICBsZXQgUEM7XG4gICAgaWYobnVtYmVyPT09XCIwXCIpe2NvbnNvbGUubG9nKFwiU3RheSBpbiB0aGUgZ3JpZC5cIil9XG4gICAgZWxzZXtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMWNvb3JkOyBjb29yZGlkID0gXCJwMWNcIn1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSl7UEMgPSBwbGF5ZXIyY29vcmQ7IGNvb3JkaWQgPSBcInAyY1wifVxuICAgIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNSxkaXJlY3Rpb24pKT09PVwiWVwiKXthbGVydChcIlRoZXNlIHRpbGVzIGhhdmUgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLCBwbGVhc2UgY2hvb3NlIGRpZmZlcmVudCB0aWxlc1wiKX1cbiAgICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgIFxuICAgIFxuICAgIH19XG4gICAgcmV0dXJuIFBDO1xuICB9XG4gIGNvbnN0IGRlc3Ryb3llciA9ICh0KSA9PntcbiAgICB0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIGxldCBsZXR0ZXIgPSB0LnRhcmdldC5kYXRhc2V0LmxldHRlcjtcbiAgICBsZXQgbnVtYmVyID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG4gICAgLy9hbGVydChcIllvdXIgYmF0dGxlc2hpcCB3aWxsIGhhdmUgdGhlIGNvb3JkaW5hdGVzOiBcIitjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw/PyxkaXJlY3Rpb24pKVxuICAgIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiRGVzdHJveWVyXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNixkaXJlY3Rpb24pKVxuICAgIGxldCBQQztcbiAgICBpZihudW1iZXI9PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNle1xuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIxY29vcmQ7IGNvb3JkaWQgPSBcInAxY1wifVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjJjb29yZDsgY29vcmRpZCA9IFwicDJjXCJ9XG4gICAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw2LGRpcmVjdGlvbikpPT09XCJZXCIpe2FsZXJ0KFwiVGhlc2UgdGlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYXNzaWduZWQsIHBsZWFzZSBjaG9vc2UgZGlmZmVyZW50IHRpbGVzXCIpfVxuICAgIGVsc2V7IFxuICAgIFBDLnB1c2goZ3Vubik7XG5cbiAgICBcbiAgICB9fVxuICAgIHJldHVybiBQQztcbiAgfVxuXG4gIGV4cG9ydCB7c2hpcGZhY3RvcnksY2FycmllcixiYXR0bGVzaGlwLGNydWlzZXIsc3VibWFyaW5lLGRlc3Ryb3llcn0iLCJpbXBvcnQge3NxLGRpcmVjdGlvbixwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHBpcCxwbGF5ZXIxc3RyaWtlcyxwbGF5ZXIyc3RyaWtlcyxwbGF5ZXJCYXNlLFBoaXR9IGZyb20gJy4vaW5kZXgnXG5jb25zdCBkb21Nb2R1bGUgPSAoKCkgPT57XG4vL2Z1bmN0aW9uIGZvciBoaWdobGlnaHRpbmcgc3F1YXJlcyB3aGVuIGhvdmVyaW5nXG5mdW5jdGlvbiBob3Zlcih0KXtcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xubGV0IGNvbG9yID0gXCJibHVlXCI7XG5cbmlmKGRpcmVjdGlvbj09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKG51bWI+b3Zlcil7bnVtYiA9IG92ZXJ9XG4gICAgaWYobnVtYj09PVwiMFwiKXtjb2xvciA9IFwid2hpdGVcIn1cbiAgICBlbHNle2NvbG9yPVwiZ3JleVwifVxuZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGV0dGVycisoK251bWIraSkpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yfX1cbmVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgIGxldCBMdHJOdW1iZXIgPWxldHRlcnIuY2hhckNvZGVBdCgwKVxuICAgIGxldCBvdmVyID0gNzUtc3E7XG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFN0cmluZy5mcm9tQ2hhckNvZGUoTHRyTnVtYmVyKyspICsgbnVtYikuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwiZ3JleVwifVxufVxufVxuXG4vL2Z1bmN0aW9uIGZvciByZXR1cm5pbmcgc3F1YXJlIGNvbG9yIHRvIHdoaXRlIGFmdGVyIGxlYXZpbmdcbmZ1bmN0aW9uIGxlYXZlKHQpe3QudGFyZ2V0LmJhY2tncm91bmRDb2xvcj1cIndoaXRlXCJcbmxldCBudW1iID0gdC50YXJnZXQuZGF0YXNldC5udW1iZXI7XG5sZXQgbGV0dGVyciA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xubGV0IGhpdCA9IGxldHRlcnIrbnVtYjtcbmNvbnNvbGUubG9nKGhpdCk7XG5cbmlmKGRpcmVjdGlvbj09PVwiVlwiKXtcbiAgICBsZXQgb3ZlciA9IDExLXNxO1xuICAgIC8vYnVpbGRpbmcgaXQgc28gd2hlbiB0aGUgdXNlciBzZWxlY3RzIGEgbnVtYmVyIGl0IGtlZXBzIGl0IHdpdGhpbiB0aGUgZ3JpZFxuICAgIGlmKG51bWI+b3Zlcil7bnVtYiA9IG92ZXJ9XG4gICAgZm9yKGxldCBpPTA7aTxzcTtpKyspe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxldHRlcnIrKCtudW1iK2kpKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCJ9fVxuICAgIGVsc2UgaWYoZGlyZWN0aW9uPT09XCJIXCIpe1xuICAgICAgICBsZXQgTHRyTnVtYmVyID1sZXR0ZXJyLmNoYXJDb2RlQXQoMClcbiAgICAgICAgbGV0IG92ZXIgPSA3NS1zcTtcbiAgICAgICAgXG4gICAgLy9idWlsZGluZyBpdCBzbyB3aGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBudW1iZXIgaXQga2VlcHMgaXQgd2l0aGluIHRoZSBncmlkXG4gICAgaWYoTHRyTnVtYmVyPm92ZXIpe0x0ck51bWJlciA9IG92ZXJ9XG4gICAgICAgIGZvcihsZXQgaT0wO2k8c3E7aSsrKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3RyaW5nLmZyb21DaGFyQ29kZShMdHJOdW1iZXIrKykgKyBudW1iKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwifVxuICAgIH1cblxuICAgIFxuICAgIH1cblxuICAgIFxuICAgXG4gICAgICAvL2Z1bmN0aW9uIHRoYXQgYWxsb3dzIHVzIHRvIHVwZGF0ZSB0aWxlcyB3aXRob3V0IGNhcnJ5aW5nIHByZXZpb3VzIHRpbGVzIG92ZXJcbiAgICAgIGZ1bmN0aW9uIHdoaXRlT3V0KCl7XG4gICAgICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO31cbiAgICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiBhdHRhY2tCb2FyZCgpe1xuICAgICAgICBsZXQgc3RyaWtlID0gcGxheWVyMXN0cmlrZXM7XG4gICAgICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7c3RyaWtlPXBsYXllcjFzdHJpa2VzfVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtzdHJpa2U9cGxheWVyMnN0cmlrZXN9ICAgIFxuICAgIGZvcihsZXQgaT0wO2k8c3RyaWtlLmxlbmd0aDtpKyspe1xuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RyaWtlW2ldKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJlZFwiO1xuICAgIH1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBsYXllckJvYXJkKCl7XG4gICAgICAgIGxldCBzaG93ID0gcGxheWVyMWNvb3JkO1xuICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe3Nob3c9cGxheWVyMWNvb3JkO2NvbnNvbGUubG9nKHNob3cpfVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtzaG93PXBsYXllcjJjb29yZDsgY29uc29sZS5sb2coc2hvdyl9IFxuICAgIGZvcihsZXQgaT0wO2k8c2hvdy5sZW5ndGg7aSsrKXtcbiAgICAgICAgZm9yKGxldCBpaT0wO2lpPHNob3dbaV0uY29vcmRpbmF0ZXMubGVuZ3RoO2lpKyspe1xuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzaG93W2ldLmNvb3JkaW5hdGVzW2lpXSkuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwiZ3JleVwiO1xuICAgICAgICAgICAgXG5cbiAgICAgICAgfVxuICAgIH1cbiAgICAgICBcbiAgICB9XG5cbiAgICAvL2Z1bmN0aW9ucyBmb3Igd2hlbiB0aGUgaGl0IGZ1bmN0aW9uIGlzIGluIHBsYXlcbiAgICBmdW5jdGlvbiBoaXRIb3Zlcih0KXtcbiAgICAgICAgaWYodC50YXJnZXQuZGF0YXNldC5udW1iZXI9PT1cIjBcIilcbnt0LnRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9XCJ3aGl0ZVwifWVsc2V7dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yPVwicmVkXCJ9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaXRMZWF2ZSh0KXtcbiAgICAgICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDFoaXR9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BoaXQ9dC50YXJnZXQuZGF0YXNldC5QMmhpdH0gIFxuICAgIFxuICAgICAgICBpZihQaGl0PT09XCJZXCIpe3QudGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInJlZFwifVxuICAgICAgICBlbHNlIGlmKFBoaXQ9PT1cIk5cIil7dC50YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwifVxuICAgIH1cblxucmV0dXJuIHtob3ZlcixsZWF2ZSxhdHRhY2tCb2FyZCx3aGl0ZU91dCxoaXRIb3ZlcixoaXRMZWF2ZSxwbGF5ZXJCb2FyZH1cbn0pKCk7XG5cblxuZXhwb3J0e2RvbU1vZHVsZX0iLCJpbXBvcnQge2NpcCxzZWxlY3Rpb25Nb2R1bGUsaGl0fSBmcm9tICcuL2luZGV4J1xuXG5jb25zdCBtb2RhbE1vZHVsZSA9ICgoKSA9Pntcbi8vIEdldCB0aGUgbW9kYWxcbnZhciBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlNb2RhbFwiKTtcblxuLy8gR2V0IHRoZSBidXR0b24gdGhhdCBvcGVucyB0aGUgbW9kYWxcbnZhciBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15QnRuXCIpO1xuXG4vL2dldCB0aGUgY29udGVudCBvZiB0aGUgcGFyYWdyYXBoXG5sZXQgcGFyYTEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhcmExXCIpO1xubGV0IHBhcmEyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYXJhMlwiKVxuXG4vLyBHZXQgdGhlIDxzcGFuPiBlbGVtZW50IHRoYXQgY2xvc2VzIHRoZSBtb2RhbFxudmFyIHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2xvc2VcIilbMF07XG5cbi8vcGxheWVyIHNlbGVjdCBidXR0b25zXG5sZXQgcHNidG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJQU2J1dHRvbnNcIik7XG5wc2J0bnMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG5cbi8vY29tcHV0ZXIgaGl0IGJ1dHRvblxubGV0IGNvbXBIaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbXBIaXRcIik7XG5jb21wSGl0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuXG4vLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyBvbiB0aGUgYnV0dG9uLCBjbG9zZXMgdGhlIG1vZGFsXG5idG4ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJOb25lXCI7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwoKXtcbiAgbW9kYWwuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcbn1cblxuXG5cbi8vcGxheWVyIHNlbGVjdCBidXR0b25zXG5sZXQgZnJuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnJuZFwiKTtcbmxldCBjb21wID0gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcFwiKTtcblxuXG5mdW5jdGlvbiBzaG93TW9kdWxlKCl7XG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICBwYXJhMS50ZXh0Q29udGVudCA9IFwiQ0hBTkdFIFBMQUNFUyFcIlxuICAgIHBhcmEyLnRleHRDb250ZW50ID0gXCJDbGljayBidXR0b24gd2hlbiByZWFkeS5cIlxuICAgIHBzYnRucy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgYnRuLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcblxuIFxufVxuXG5mdW5jdGlvbiBwbGF5ZXJTZWxlY3QoKXtcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICBwYXJhMS50ZXh0Q29udGVudCA9IFwiQXJlIHlvdSBwbGF5aW5nIHdpdGggYSBmcmllbmQgb3IgYWdhaW5zdCBvdXIgQUk/XCJcbiAgICBidG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2VcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgcHNidG5zLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbiAgICBmcm5kLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e1xuICAgICAgY2lwID0gXCJOXCJcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIFxuXG4gICAgfSlcblxuICAgY29tcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9PntcbiAgICAgIGNpcCA9IFwiWVwiXG4gICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBcblxuICAgIH0pXG59XG5cblxuZnVuY3Rpb24gY29tcEhpdE1vZGFsKCl7XG5cbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgcGFyYTEudGV4dENvbnRlbnQgPSBcIlBsZWFzZSBjbGljayB0aGUgYnV0dG9uIGJlbG93IHRvIGFjdGl2YXRlIHRoZSBBSSBjaG9pY2UhXCJcbiAgYnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgY29tcEhpdC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICBwc2J0bnMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGNvbXBIaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGhpdCk7XG4gICAgY29tcEhpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY2xvc2VNb2RhbClcbn1cblxucmV0dXJuIHtzaG93TW9kdWxlLHBsYXllclNlbGVjdCxjb21wSGl0TW9kYWwsY2xvc2VNb2RhbH1cbn0pKCk7XG5cbmV4cG9ydCB7bW9kYWxNb2R1bGV9XG4iLCJpbXBvcnQgeyBjaG9vc2VDcmRudHMgfSBmcm9tIFwiLi9jaG9vc2VDb29yZGluYXRlc1wiO1xuaW1wb3J0IHsgck5vLHNtYXJ0Q291bnRlcixwbGF5ZXIxY29vcmQscGxheWVyMmNvb3JkLHN0YXJ0R2FtZSx0YXJnZXRBcnJheXkgfSBmcm9tIFwiLi9pbmRleFwiXG5pbXBvcnQgeyBvdmVyTGFwIH0gZnJvbSBcIi4vb3ZlckxhcFwiO1xuaW1wb3J0IHsgc2hpcGZhY3RvcnkgfSBmcm9tIFwiLi9zaGlwc1wiO1xuXG5cbi8qIFxuVGhlIGNvbXB1dGVyIEFJIG5lZWRzIHRvIGJlIGFibGUgdG8gcmFuZG9tbHkgc2VsZWN0IGl0cycgc2hpcCBwb3NpdGlvbnMuXG5SYW5kb21seSBzZWxlY3QgaXRzJyBoaXQgcG9pbnRzLlxuXG5yYW5kb20gbnVtYmVyIGJldHdlZW4gb25lIGFuZCB0ZW5cbk1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxKTtcblxuQSBtb3JlIGFkdmFuY2VkIEFJIHdvdWxkIHRoZW4gYmUgYWJsZSB0byBoaXQgYWRqYWNlbnQgZ3JpZHMgd2hlbiBpdCBkZXRlY3RzIGEgaGl0LlxuKi9cblxuXG4vL1dlIG5lZWQgdGhlIGNvbXB1dGVyIHRvIGdlbmVyYXRlIGl0cyBjb29yZGluYXRlcyByYW5kb21seSB0aGVuIHN0YXJ0IHRoZSBnYW1lIFxuXG5jb25zdCBjb21wdXRlckFJID0gKCgpID0+e1xuXG4gIFxuXG4gIC8vUHJvZHVjZXMgdGhlIHRhcmdldCBhcnJheSB0aGF0IHRoZSBjb21wdXRlciB3aWxsIHNlbGVjdCBjb29yZGluYXRlcyBmcm9tXG4gIGZ1bmN0aW9uIHRhcmdldEFycmF5KCl7XG4gICAgICBmb3IobGV0IGk9NjU7aTw3NTtpKyspe1xuICAgICAgICAvL2NoYW5nZSBiYWNrIHRvIDEwIGJlbG93XG4gICAgICAgICAgZm9yKGxldCBvPTE7bzwzO28rKyl7XG4gICAgICAgICAgICAgIHRhcmdldEFycmF5eS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaSkgKyBvKVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgfVxuICBcblxuXG5cbmZ1bmN0aW9uIHJhbmRvbUludEZyb21JbnRlcnZhbChtaW4sIG1heCkgeyAvLyBtaW4gYW5kIG1heCBpbmNsdWRlZCBcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSArIG1pbilcbn1cblxuZnVuY3Rpb24gaGl0KCl7XG4gIGNvbnNvbGUubG9nKHNtYXJ0Q291bnRlcilcblxuICAgICAgICAgaWYoc21hcnRDb3VudGVyPT09MSl7XG4gICAgICAgICAgIHJObztcbiAgICAgICAgIH1cbiAgICAgICAgIGVsc2UgaWYoc21hcnRDb3VudGVyPT09Mil7ck5vKzd9XG5cbiAgICAgICAgIGVsc2V7XG4gICAgICAgICAgXG4gICAgICAgICByTm8gPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoMCwgdGFyZ2V0QXJyYXl5Lmxlbmd0aC0xKX1cbiAgICAgICAgIGxldCBmaXJlID0gdGFyZ2V0QXJyYXl5W3JOb107XG4gICAgICAgICB0YXJnZXRBcnJheXkuc3BsaWNlKHJObywxKVxuICAgICAgICBjb25zb2xlLmxvZyhcIlJhbmRvbSBubzogXCIrck5vKVxuICAgICAgICAgY29uc29sZS5sb2coXCJMZW5ndGg6IFwiK3RhcmdldEFycmF5eS5sZW5ndGgpXG4gICAgICAgICBjb25zb2xlLmxvZyh0YXJnZXRBcnJheXkpXG4gICAgICAgICByZXR1cm4gZmlyZVxuXG59XG5cbi8vd29yayBjbG9zZWx5IHdpdGggc2hpcHMuanMgdG8gY3JhZnQgdGhpc1xuZnVuY3Rpb24gc2VsZWN0Q2Fycmllcigpe1xuICAgIC8vbGV0dGVyIG5lZWRzIHRvIGJlIG1vZGlmaWVkIHRvIGNodXJuIG91dCBsZXR0ZXIgYmV0d2VlbiBhIGFuZCBqXG4gICAgbGV0IHJhbmRvbU5vID0gcmFuZG9tSW50RnJvbUludGVydmFsKDY1LDc0KTtcbiAgICBsZXQgbGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShyYW5kb21Obyk7XG4gICAgbGV0IG51bWJlciA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxKTtcbiAgICBsZXQgZGlyID0gcmFuZG9tSW50RnJvbUludGVydmFsKDEsMik7XG4gICAgbGV0IGRpcmVjdGlvbiA9IFwiVlwiXG4gICAgaWYoZGlyPT09MSl7ZGlyZWN0aW9uPVwiVlwifWVsc2V7ZGlyZWN0aW9uPVwiSFwifVxuICAgIGxldCBQQyA9IHBsYXllcjJjb29yZDtcbiAgICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkNhcnJpZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpXG4gICAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciwyLGRpcmVjdGlvbikpPT09XCJZXCIpe2NvbXB1dGVyQUkuc2VsZWN0Q2FycmllcigpfVxuICBlbHNleyBcbiAgICBQQy5wdXNoKGd1bm4pO1xuICAgIC8vdGVzdGluZyBmaXJzdFxuICAgIGNvbXB1dGVyQUkuc2VsZWN0QmF0dGxlc2hpcCgpO1xuICAgIFxufVxufVxuXG5cbmZ1bmN0aW9uIHNlbGVjdEJhdHRsZXNoaXAoKXtcbiAgLy9sZXR0ZXIgbmVlZHMgdG8gYmUgbW9kaWZpZWQgdG8gY2h1cm4gb3V0IGxldHRlciBiZXR3ZWVuIGEgYW5kIGpcbiAgbGV0IHJhbmRvbU5vID0gcmFuZG9tSW50RnJvbUludGVydmFsKDY1LDc0KTtcbiAgbGV0IGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUocmFuZG9tTm8pO1xuICBsZXQgbnVtYmVyID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwKSArIDEpO1xuICBsZXQgZGlyID0gcmFuZG9tSW50RnJvbUludGVydmFsKDEsMik7XG4gIGxldCBkaXJlY3Rpb24gPSBcIlZcIlxuICBpZihkaXI9PT0xKXtkaXJlY3Rpb249XCJWXCJ9ZWxzZXtkaXJlY3Rpb249XCJIXCJ9XG4gIGxldCBQQyA9IHBsYXllcjJjb29yZDtcbiAgbGV0IGd1bm4gPSBuZXcgc2hpcGZhY3RvcnkoXCJCYXR0bGVzaGlwXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsMyxkaXJlY3Rpb24pKVxuICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDMsZGlyZWN0aW9uKSk9PT1cIllcIil7Y29tcHV0ZXJBSS5zZWxlY3RCYXR0bGVzaGlwKCl9XG5lbHNleyBcbiAgUEMucHVzaChndW5uKTtcbiAgLy90ZXN0aW5nIGZpcnN0XG4gIGNvbXB1dGVyQUkuc2VsZWN0Q3J1aXNlcigpO1xuICBcbiAgXG59XG59XG5cblxuZnVuY3Rpb24gc2VsZWN0Q3J1aXNlcigpe1xuICAvL2xldHRlciBuZWVkcyB0byBiZSBtb2RpZmllZCB0byBjaHVybiBvdXQgbGV0dGVyIGJldHdlZW4gYSBhbmQgalxuICBsZXQgcmFuZG9tTm8gPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoNjUsNzQpO1xuICBsZXQgbGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShyYW5kb21Obyk7XG4gIGxldCBudW1iZXIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApICsgMSk7XG4gIGxldCBkaXIgPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoMSwyKTtcbiAgbGV0IGRpcmVjdGlvbiA9IFwiVlwiXG4gIGlmKGRpcj09PTEpe2RpcmVjdGlvbj1cIlZcIn1lbHNle2RpcmVjdGlvbj1cIkhcIn1cbiAgbGV0IFBDID0gcGxheWVyMmNvb3JkO1xuICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkNydWlzZXJcIixjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw0LGRpcmVjdGlvbikpXG4gIGlmKG92ZXJMYXAoUEMsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNCxkaXJlY3Rpb24pKT09PVwiWVwiKXtjb21wdXRlckFJLnNlbGVjdENydWlzZXIoKX1cbmVsc2V7IFxuICBQQy5wdXNoKGd1bm4pO1xuICAvL3Rlc3RpbmcgZmlyc3RcbiAgY29tcHV0ZXJBSS5zZWxlY3RTdWJtYXJpbmUoKTtcbiAgXG59XG59XG5cblxuZnVuY3Rpb24gc2VsZWN0U3VibWFyaW5lKCl7XG4gIC8vbGV0dGVyIG5lZWRzIHRvIGJlIG1vZGlmaWVkIHRvIGNodXJuIG91dCBsZXR0ZXIgYmV0d2VlbiBhIGFuZCBqXG4gIGxldCByYW5kb21ObyA9IHJhbmRvbUludEZyb21JbnRlcnZhbCg2NSw3NCk7XG4gIGxldCBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHJhbmRvbU5vKTtcbiAgbGV0IG51bWJlciA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxKTtcbiAgbGV0IGRpciA9IHJhbmRvbUludEZyb21JbnRlcnZhbCgxLDIpO1xuICBsZXQgZGlyZWN0aW9uID0gXCJWXCJcbiAgaWYoZGlyPT09MSl7ZGlyZWN0aW9uPVwiVlwifWVsc2V7ZGlyZWN0aW9uPVwiSFwifVxuICBsZXQgUEMgPSBwbGF5ZXIyY29vcmQ7XG4gIGxldCBndW5uID0gbmV3IHNoaXBmYWN0b3J5KFwiU3VibWFyaW5lXCIsY2hvb3NlQ3JkbnRzKGxldHRlcixudW1iZXIsNSxkaXJlY3Rpb24pKVxuICBpZihvdmVyTGFwKFBDLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDUsZGlyZWN0aW9uKSk9PT1cIllcIil7Y29tcHV0ZXJBSS5zZWxlY3RTdWJtYXJpbmUoKX1cbmVsc2V7IFxuICBQQy5wdXNoKGd1bm4pO1xuICAvL3Rlc3RpbmcgZmlyc3RcbiAgY29tcHV0ZXJBSS5zZWxlY3REZXN0cm95ZXIoKTtcbiAgXG4gIFxufVxufVxuXG5cbmZ1bmN0aW9uIHNlbGVjdERlc3Ryb3llcigpe1xuICAvL2xldHRlciBuZWVkcyB0byBiZSBtb2RpZmllZCB0byBjaHVybiBvdXQgbGV0dGVyIGJldHdlZW4gYSBhbmQgalxuICBsZXQgcmFuZG9tTm8gPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoNjUsNzQpO1xuICBsZXQgbGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShyYW5kb21Obyk7XG4gIGxldCBudW1iZXIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTApICsgMSk7XG4gIGxldCBkaXIgPSByYW5kb21JbnRGcm9tSW50ZXJ2YWwoMSwyKTtcbiAgbGV0IGRpcmVjdGlvbiA9IFwiVlwiXG4gIGlmKGRpcj09PTEpe2RpcmVjdGlvbj1cIlZcIn1lbHNle2RpcmVjdGlvbj1cIkhcIn1cbiAgbGV0IFBDID0gcGxheWVyMmNvb3JkO1xuICBsZXQgZ3VubiA9IG5ldyBzaGlwZmFjdG9yeShcIkRlc3Ryb3llclwiLGNob29zZUNyZG50cyhsZXR0ZXIsbnVtYmVyLDYsZGlyZWN0aW9uKSlcbiAgaWYob3ZlckxhcChQQyxjaG9vc2VDcmRudHMobGV0dGVyLG51bWJlciw2LGRpcmVjdGlvbikpPT09XCJZXCIpe2NvbXB1dGVyQUkuc2VsZWN0RGVzdHJveWVyKCl9XG5lbHNleyBcbiAgUEMucHVzaChndW5uKTtcbiAgLy90ZXN0aW5nIGZpcnN0XG4gIHN0YXJ0R2FtZSgpOyAgXG4gIFxufVxufVxucmV0dXJuIHtoaXQsc2VsZWN0Q2FycmllcixzZWxlY3RCYXR0bGVzaGlwLHNlbGVjdENydWlzZXIsc2VsZWN0U3VibWFyaW5lLHNlbGVjdERlc3Ryb3llcixyYW5kb21JbnRGcm9tSW50ZXJ2YWwsdGFyZ2V0QXJyYXl9XG59KSgpO1xuXG5cbmV4cG9ydCB7Y29tcHV0ZXJBSX0iLCJpbXBvcnQge0dhbWVib2FyZE1vZHVsZX0gZnJvbSAnLi9nYW1lYm9hcmQnXG5pbXBvcnQge2NhcnJpZXIsYmF0dGxlc2hpcCxjcnVpc2VyLHN1Ym1hcmluZSxkZXN0cm95ZXJ9IGZyb20gJy4vc2hpcHMnXG5pbXBvcnQge2RvbU1vZHVsZX0gZnJvbSAnLi9kb20nXG5pbXBvcnQge21vZGFsTW9kdWxlfSBmcm9tICcuL21vZGFsJ1xuaW1wb3J0IHtjb21wdXRlckFJfSBmcm9tICcuL2NvbXB1dGVyQUknXG5cblxuLy9jb21wdXRlciBpbiBwbGF5XG5sZXQgY2lwID0gXCJOXCJcbiAgLy9jb29yZGluYXRlcyBvZiBlYWNoIHBsYXllcnMgc2hpcFxuICBsZXQgcGxheWVyMWNvb3JkPVtdO1xuICBsZXQgcGxheWVyMmNvb3JkPVtdO1xuICAvL2Ftb3VudCBvZiBzdW5rIHNoaXBzIGRldGVybWluaW5nIHdoZXRoZXIgdGhlIGdhbWUgaXMgb3ZlciBvciBub3RcbiAgbGV0IHBsYXllcjFTdW5rU2hpcHM9MDtcbiAgbGV0IHBsYXllcjJTdW5rU2hpcHM9MDtcbiAgLy9jb29yZGluYXRlcyBvZiBlYWNoIHRpbGUgaGl0IGJ5IGVhY2ggcGxheWVyXG4gIGxldCBwbGF5ZXIxc3RyaWtlcz1bXVxuICBsZXQgcGxheWVyMnN0cmlrZXM9W11cbiAgLy9WPVZlcnRpY2FsLCBIPUhvcml6b250YWxcbiAgbGV0IGRpcmVjdGlvbiA9IFwiVlwiXG4gIC8vcGxheWVyIGluIHBsYXlcbiAgbGV0IHBsYXllckJhc2UgPSBbXCJwbGF5ZXIxXCIsXCJwbGF5ZXIyXCJdO1xuICBsZXQgcGlwID0gcGxheWVyQmFzZVswXTtcbiAgbGV0IFBjcmQgPSBwbGF5ZXIxY29vcmQ7XG4gIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UGNyZCA9IHBsYXllcjFjb29yZDt9XG4gIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQY3JkID0gcGxheWVyMmNvb3JkO31cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7XG4gIC8vdGhlIHNxdWFyZXMgdGhhdCBuZWVkIGhpZ2hsaWdodGluZyBmb3IgdGhlIGRvbVxuICBsZXQgc3E7XG4gIGxldCBQaGl0O1xuICBsZXQgdGFyZ2V0QXJyYXl5ID0gW107XG4gIGxldCBzbWFydENvdW50ZXIgPSAwO1xuICBsZXQgck5vO1xuICBcbiAgY29tcHV0ZXJBSS50YXJnZXRBcnJheSgpO1xuICBjb25zb2xlLmxvZyh0YXJnZXRBcnJheXkpXG4gIFxuICBcblxuXG5cblxuXG4gIFxuICBcblxuLy9idXR0b24gdG8gY2hhbmdlIHRoZSBwb3NpdGlvbmluZyBvZiB0aGUgcGxhY2VtZW50XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKT0+e2lmKGRpcmVjdGlvbj09PVwiVlwiKXtkaXJlY3Rpb249XCJIXCI7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblwiKS50ZXh0Q29udGVudD1cIkhvcml6b250YWxcIjt9ZWxzZSBpZihkaXJlY3Rpb249PT1cIkhcIil7ZGlyZWN0aW9uPVwiVlwiO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9zaXRpb25cIikudGV4dENvbnRlbnQ9XCJWZXJ0aWNhbFwifX0pXG4vL2F0dGFja2JvYXJkIGJ1dHRvbiB0aGF0IHNob3dzIHBvc2l0aW9ucyB3aGVyZSB0aGUgcGxheWVyIGhhcyBhdHRhY2tlZFxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaHdzaGlwb3NcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywoKT0+e2RvbU1vZHVsZS53aGl0ZU91dCgpO1xuICAgIGRvbU1vZHVsZS5wbGF5ZXJCb2FyZCgpO1xuICAgIH0pXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNod3NoaXBvc1wiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywoKT0+e2RvbU1vZHVsZS53aGl0ZU91dCgpO1xuICAgIGRvbU1vZHVsZS5hdHRhY2tCb2FyZCgpO30pXG5cbiAgIC8vY29uc29sZS5sb2coXCJIRVlFRVwiKVxuLy9mdW5jdGlvbiBjaGFuZ2VzIHBsYXllclxuY29uc3QgY2hhblBsYXllciA9ICgpPT57XG4gICAgbGV0IHQ7XG5pZihjaXA9PT1cIllcIil7ICAgICAgXG4gICAgICAgIHQgPSBtb2RhbE1vZHVsZS5jb21wSGl0TW9kYWwoKTt9XG4gICAgICAgIFxuZWxzZXt0ID0gbW9kYWxNb2R1bGUuc2hvd01vZHVsZSgpO31cbnQ7XG4gICAgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtwaXAgPSBwbGF5ZXJCYXNlWzFdO1xuICAgICAgICBQY3JkID0gcGxheWVyMmNvb3JkO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpcFwiKS50ZXh0Q29udGVudCA9IHBpcDt9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe3BpcCA9IHBsYXllckJhc2VbMF07XG4gICAgICAgIFBjcmQgPSBwbGF5ZXIxY29vcmQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGlwXCIpLnRleHRDb250ZW50ID0gcGlwO31cbiAgICAgICAgZWxzZXtwaXAgPSBwbGF5ZXJCYXNlWzBdO1xuICAgICAgICBQY3JkPXBsYXllcjJjb29yZDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXBcIikudGV4dENvbnRlbnQgPSBwaXA7fVxuICAgICAgICBkb21Nb2R1bGUud2hpdGVPdXQoKTtcbiAgICAgICAgZG9tTW9kdWxlLmF0dGFja0JvYXJkKCk7XG4gICAgICAgIH1cbiAgICBcbmNvbnNvbGUubG9nKFwiT0lMXCIpXG4gICAgY29uc29sZS5sb2coXCJObm5ublwiKVxuXG5cblxuLy9iZWxvdyBmdW5jdGlvbnMgbmVlZCB0byBiZSBncm91cGVkIGludG8gYSBtb2R1bGVcbmNvbnNvbGUubG9nKFwiSU5SU1RcIilcblxuZnVuY3Rpb24gaGl0KHQpe2NvbnNvbGUubG9nKHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyKTtcblxuICAgIGNvbnNvbGUubG9nKHBpcClcbiAgICBcbiAgICBsZXQgUEMgPSBwbGF5ZXIxY29vcmQ7XG4gICAgbGV0IHN0cmlrZSA9IHBsYXllcjFzdHJpa2VzO1xuICAgIGxldCBMO1xuICAgIGxldCBOO1xuICAgIGxldCBoaXRDb29yZDtcbiAgICBsZXQgc21hcnRUZWxsID0gMDtcbiAgICBjb25zb2xlLmxvZyhzbWFydFRlbGwpXG5cbiAgICBpZihjaXA9PT1cIllcIiYmcGlwPT09cGxheWVyQmFzZVsxXSl7XG5cbiAgICAgICAgaGl0Q29vcmQgPSBjb21wdXRlckFJLmhpdCgpO1xuICAgICAgICBcbiAgICBcbiAgICBhbGVydChcIkNvbXB1dGVyIGhhcyBzdHJ1Y2sgVGlsZTogXCIraGl0Q29vcmQpXG4gICAgXG4gICAgfVxuICAgIGVsc2V7XG4gICAgXG4gICAgTCA9IHQudGFyZ2V0LmRhdGFzZXQubGV0dGVyO1xuICAgIE4gPSB0LnRhcmdldC5kYXRhc2V0Lm51bWJlcjtcbiAgICBoaXRDb29yZCA9IEwrTjt9XG4gICAgY29uc29sZS5sb2coaGl0Q29vcmQpO1xuICAgIGNvbnNvbGUubG9nKFBDLmxlbmd0aCk7IFxuICAgIGlmKHBpcCA9PT0gcGxheWVyQmFzZVswXSl7UEMgPSBwbGF5ZXIyY29vcmQ7c3RyaWtlPXBsYXllcjFzdHJpa2VzO1BoaXQ9dC50YXJnZXQuZGF0YXNldC5QMWhpdH1cbiAgICBlbHNlIGlmKHBpcCA9PT0gcGxheWVyQmFzZVsxXSAmJiBjaXAhPVwiWVwiKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0fVxuICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdICYmIGNpcD09PVwiWVwiKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7fVxuICAgIGlmKE49PT1cIjBcIil7Y29uc29sZS5sb2coXCJTdGF5IGluIHRoZSBncmlkLlwiKX1cbiAgICBlbHNlIGlmKFBoaXQ9PT1cIllcIil7Y29uc29sZS5sb2coXCJBbHJlYWR5IGJlZW4gaGl0LCB0cnkgYWdhaW4uXCIpfVxuICAgIGVsc2V7ICAgICAgIFxuICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkO3N0cmlrZT1wbGF5ZXIxc3RyaWtlcztQaGl0PXQudGFyZ2V0LmRhdGFzZXQuUDFoaXQ9XCJZXCJ9XG4gICAgICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzFdKXtQQyA9IHBsYXllcjFjb29yZDtzdHJpa2U9cGxheWVyMnN0cmlrZXM7UGhpdD10LnRhcmdldC5kYXRhc2V0LlAyaGl0PVwiWVwifVxuICAgIGZvcihsZXQgcD0wO3A8UEMubGVuZ3RoO3ArKyl7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8UENbcF0uY29vcmRpbmF0ZXMubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmKFBDW3BdLmNvb3JkaW5hdGVzW2ldPT09aGl0Q29vcmQpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coUENbcF0uY29vcmRpbmF0ZXMpXG4gICAgICAgICAgICBQQ1twXS5jb29yZGluYXRlcy5zcGxpY2UoaSwxKVxuICAgICAgICBQQ1twXS5oaXRTaGlwKCk7XG4gICAgICAgIFBDW3BdLmlzU3VuaygpOyAgXG5cbiAgICAgICAgLy9haSAgXG4gICAgICAgIHNtYXJ0VGVsbCsrXG5cblxuICAgICAgICBnYW1lT3ZlcigpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJQbGF5ZXIgb25lIHN1bmsgc2hpcHM6IFwiKyBwbGF5ZXIxU3Vua1NoaXBzKSAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUGxheWVyIHR3byBzdW5rIHNoaXBzOiBcIisgcGxheWVyMlN1bmtTaGlwcykgIFxuICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICAvL3Rlc3RpbmcgZm9yIHNtYXJ0IEFJIGRlbGV0ZSBpZiBub3Qgd29ya1xuICAgICAgICAvL2Vsc2UgaWYoUENbcF0uY29vcmRpbmF0ZXNbaV0hPWhpdENvb3JkICYmIHNtYXJ0Q291bnRlcj4wKXtzbWFydENvdW50ZXIrK31cbiAgICBcbiAgICB9XG4gICAgfXN0cmlrZS5wdXNoKGhpdENvb3JkKSAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJQMSBzdHJpa2VzOiBcIisgcGxheWVyMXN0cmlrZXMpXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUDIgc3RyaWtlczogXCIrIHBsYXllcjJzdHJpa2VzKVxuXG4gICAgICAgIC8vYWlcbiAgICAgICAgaWYoY2lwPT09XCJZXCImJnBpcD09PXBsYXllckJhc2VbMV0gJiYgc21hcnRDb3VudGVyPjAgJiYgc21hcnRUZWxsPjApe3NtYXJ0Q291bnRlcisrfVxuICAgICAgICBcbiAgICBjaGFuUGxheWVyKClcblxuICAgIH19XG4vL2NvbnNvbGUubG9nKFwiSUlJXCIpXG5cbiBmdW5jdGlvbiBnYW1lT3Zlcigpe1xuICAgIGxldCBjb3VudCA9MDtcbiAgICBsZXQgUEMgPSBwbGF5ZXIxY29vcmQ7XG4gICAgbGV0IHBscjtcbiAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMF0pe1BDID0gcGxheWVyMmNvb3JkOyBwbHI9XCJQbGF5ZXIgT25lXCJ9XG4gICAgZWxzZSBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe1BDID0gcGxheWVyMWNvb3JkOyBwbHI9XCJQbGF5ZXIgVHdvXCJ9XG4gICAgZm9yKGxldCBpID0wO2k8UEMubGVuZ3RoO2krKyl7XG4gICAgICAgaWYoUENbaV0uY29vcmRpbmF0ZXMubGVuZ3RoPT09MCl7Kytjb3VudH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coY291bnQpO1xuXG4gICAgLy9jaGFuZ2UgYmVsb3cgY291bnQgdG8gMSBmb3IgYSBxdWljayBnYW1lLCA1IGZvciBhIGZ1bGwgZ2FtZVxuICAgIC8vbWF5IGJlIHdvcnRoIGFsbG93aW5nIHBsYXllcnMgdG8gY2hhbmdlIGl0IGJlZm9yZSBnYW1lIHRvIHNlZSB3aGF0IGxlbmd0aCBvZiBnYW1lIHRoZXkgd2FudCB0byBwbGF5XG4gICAgaWYoY291bnQ9PT01KXthbGVydCggcGxyKyBcIiBoYXMgd29uIVwiKX1cbiAgICB9XG4gICAgXG5cbmZ1bmN0aW9uIHN0YXJ0R2FtZSgpe1xuICAgIFxuICAgIGlmKFBjcmQubGVuZ3RoPjQpe1xuICAgICAgICBpZihjaXA9PT1cIllcIil7XG4gICAgICAgICAgICBhbGVydChcIkNvbXB1dGVyIGlzIGNob29zaW5nIGJhdHRsZSBwb3NpdGlvbnNcIilcbiAgICAgICAgICAgIHNxPTFcbiAgICAgICAgICAgIGxldCBjZWxscz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpO1xuZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5nYW1lYnV0dG9uc1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb3NpdGlvblBhcmFcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJDaG5nZVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgfSBwbGF5R2FtZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgc3E9MVxuICAgIGNoYW5QbGF5ZXIoKTtcbiAgICBsZXQgY2VsbHM9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbmZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGRlc3Ryb3llcikgXG5jZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc3RhcnRHYW1lKVxuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmdhbWVidXR0b25zXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvc2l0aW9uUGFyYVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkNobmdlXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn1cbnBsYXlHYW1lKCl9fX1cbiAgICBcbiAgICBcbmZ1bmN0aW9uIHBsYXlHYW1lKCl7XG4gICAgXG4gICAgbGV0IGNlbGxzPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIik7XG5mb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuXG5jZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsaGl0KVxuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG5jZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG5jZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5oaXRIb3ZlcilcbmNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5oaXRMZWF2ZSlcblxuXG59XG59XG5cblxuXG4vL1NlbGVjdGlvbiBtb2R1bGVcbmNvbnN0IHNlbGVjdGlvbk1vZHVsZSA9ICgoKSA9PntcbiAgICBcbiAgICBcblxuICAgICAgICBcbiAgICAvL2FkZHMgYW4gZXZlbnQgbGlzdGVuZXIgdG8gZXZlcnkgZ3JpZCBjZWxsIGFsbG93aW5nIHVzIHRvIGNob29zZSBvdXIgY29vcmRpbmF0ZXMsbWFwIHRoZW0gdG8gdGhlIGFycmF5IHRoZW4gY2hhbmdlIHBsYXllclxuICAgIGZ1bmN0aW9uIHAxY2FycmllclNoaXAoKXtcbiAgICAgICBcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9MjtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYXJyaWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFiYXR0bGVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICAgICAgfVxuICAgIGZ1bmN0aW9uIHAxYmF0dGxlU2hpcCgpeyAgIFxuICAgICAgICBcbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+MCl7XG4gICAgICAgIFxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9MztcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYXJyaWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFiYXR0bGVTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxiYXR0bGVzaGlwKSBcbiAgICAgICAgICAgIC8vaWYgY29vcmRpbmF0ZXMgbWF0Y2ggbGVuZ3RoIG5lZWRlZCBtb3ZlIG9udG8gbmV4dCBwYXJ0XG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxY3J1aXNlclNoaXApIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgZnVuY3Rpb24gcDFjcnVpc2VyU2hpcCgpe1xuXG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjEpe1xuICAgICAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhQY3JkKVxuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICAgICAgXG4gICAgICAgIC8vc3EgaXMgY29udHJvbGxpbmcgdGhlIGhpZ2hsaWdodGluZyBudW1iZXJcbiAgICAgICAgc3E9NDtcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxiYXR0bGVzaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFjcnVpc2VyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsY3J1aXNlcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxc3VibWFyaW5lU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLGRvbU1vZHVsZS5ob3ZlcilcbiAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsZG9tTW9kdWxlLmxlYXZlKVxuICAgICAgICB9XG4gICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHAxc3VibWFyaW5lU2hpcCgpe1xuXG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjIpe1xuICAgICAgICBcbiAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgICAgIFxuICAgICAgICAvL3NxIGlzIGNvbnRyb2xsaW5nIHRoZSBoaWdobGlnaHRpbmcgbnVtYmVyXG4gICAgICAgIHNxPTU7XG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsY3J1aXNlcikgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxc3VibWFyaW5lU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc3VibWFyaW5lKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUucDFkZXN0cm95ZXJTaGlwKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsZG9tTW9kdWxlLmhvdmVyKVxuICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJyxkb21Nb2R1bGUubGVhdmUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcDFkZXN0cm95ZXJTaGlwKCl7XG5cbiAgICAgICAgaWYoUGNyZC5sZW5ndGg+Myl7XG4gICAgICAgIGxldCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKVxuICAgICAgICBcbiAgICAgICAgLy9zcSBpcyBjb250cm9sbGluZyB0aGUgaGlnaGxpZ2h0aW5nIG51bWJlclxuICAgICAgICBzcT02O1xuICAgICAgICBmb3IobGV0IGk9MDtpPGNlbGxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHN1Ym1hcmluZSkgXG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLnAxZGVzdHJveWVyU2hpcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbiAgICAgICAgICAgIC8vdGhpcyBkZWNpZGVzIHdoZXRoZXIgdGhlIGdhbWUgc3RhcnRzIGFmdGVyIHBsYXllciB0d28gb3IgdGhlIGNvbXB1dGVyIGhhcyBzZWxlY3RlZCB0aGVpciBncmlkc1xuICAgICAgICAgICAgLy9pZiBub3QgaXQgbG9vcHMgYXJvdW5kXG4gICAgICAgICAgICBpZihwaXAgPT09IHBsYXllckJhc2VbMV0pe2NlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzdGFydEdhbWUpfVxuICAgICAgIGVsc2UgaWYocGlwID09PSBwbGF5ZXJCYXNlWzBdKXtjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2VsZWN0aW9uTW9kdWxlLmxvb3ApIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2VsbHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJyxkb21Nb2R1bGUuaG92ZXIpXG4gICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLGRvbU1vZHVsZS5sZWF2ZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wKCl7XG4gICAgICAgIGlmKFBjcmQubGVuZ3RoPjQpe1xuXG4gICAgICAgICAgICBpZihjaXA9PT1cIllcIil7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jZWxsXCIpXG4gICAgXG4gICAgICAgIGZvcihsZXQgaT0wO2k8Y2VsbHMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBjZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsZGVzdHJveWVyKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzZWxlY3Rpb25Nb2R1bGUubG9vcCkgXG4gICAgICAgICAgICBjZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcHV0ZXJBSS5zZWxlY3RDYXJyaWVyKCk7fVxuICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAvL1RoaXMgZnVuY3Rpb24gdHVybnMgdGhlIHNlbGVjdGlvbiBwcm9jZXNzIG92ZXIgdG8gZWl0aGVyIGEgY29tcHV0ZXIgb3IgcGxheWVyIDJcbiAgICAvL2p1c3QgZG9pbmcgcGxheWVyIDIgaW1wbGVtZXRhdGlvbiBmb3Igbm93XG4gICAgY2hhblBsYXllcigpO1xuICAgICAgICBsZXQgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNlbGxcIilcbiAgICBcbiAgICAgICAgZm9yKGxldCBpPTA7aTxjZWxscy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGNlbGxzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxkZXN0cm95ZXIpIFxuICAgICAgICAgICAgY2VsbHNbaV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLHNlbGVjdGlvbk1vZHVsZS5sb29wKSBcbiAgICAgICAgICAgIGNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbiAgICB9XG5zZWxlY3Rpb25Nb2R1bGUucDFjYXJyaWVyU2hpcCgpO1xufVxuICAgIH19XG5cblxuICAgIFxuICAgICAgICByZXR1cm57cDFjYXJyaWVyU2hpcCxwMWJhdHRsZVNoaXAscDFjcnVpc2VyU2hpcCxwMXN1Ym1hcmluZVNoaXAscDFkZXN0cm95ZXJTaGlwLGxvb3B9XG4gICAgXG4gICAgfSkoKTtcblxuXG5cblxuICAgbW9kYWxNb2R1bGUucGxheWVyU2VsZWN0KCk7XG4gICAgR2FtZWJvYXJkTW9kdWxlLmNyZWF0ZUdhbWVib2FyZCgpO1xuc2VsZWN0aW9uTW9kdWxlLnAxY2FycmllclNoaXAoKTtcblxuLy90ZXN0aW5nIGhpdCBmdW5jdGlvblxuLy9wbGF5R2FtZSgpO1xuXG5cblxuZXhwb3J0IHtyTm8sc21hcnRDb3VudGVyLHRhcmdldEFycmF5eSxoaXQsc3RhcnRHYW1lLHNlbGVjdGlvbk1vZHVsZSxjaXAsUGhpdCxzcSxkaXJlY3Rpb24scGlwLHBsYXllcjFjb29yZCxwbGF5ZXIyY29vcmQscGxheWVyQmFzZSxjaGFuUGxheWVyLHBsYXllcjFTdW5rU2hpcHMscGxheWVyMlN1bmtTaGlwcyxwbGF5ZXIxc3RyaWtlcyxwbGF5ZXIyc3RyaWtlc31cblxuXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkdhbWVib2FyZE1vZHVsZSIsImNyZWF0ZUdyaWRzIiwibHRyIiwibm8iLCJpZCIsImdyaWQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsInBhZGRpbmciLCJib3JkZXIiLCJ0ZXh0Q29udGVudCIsInRleHRBbGlnbiIsImRhdGFzZXQiLCJoaXQiLCJQMWhpdCIsIlAyaGl0IiwibGV0dGVyIiwibnVtYmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUdhbWVib2FyZCIsImkiLCJjaG9vc2VDcmRudHMiLCJTdHJ0THR0cnMiLCJTdHJ0Tm8iLCJsZW5ndGgiLCJWb3JIIiwiY29vcmQiLCJvdmVyIiwicHVzaCIsIkx0ck51bWJlciIsImNoYXJDb2RlQXQiLCJjb25zb2xlIiwibG9nIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwib3ZlckxhcCIsImEiLCJiIiwicGxjIiwiY3JkIiwib3ZybGFwIiwieiIsInAiLCJjb29yZGluYXRlcyIsInNoaXBmYWN0b3J5IiwibmFtZSIsInRoaXMiLCJoaXRTaGlwIiwiYWxlcnQiLCJjaXAiLCJwaXAiLCJwbGF5ZXJCYXNlIiwic21hcnRDb3VudGVyIiwiaXNTdW5rIiwiY29vcmRpZCIsImNhcnJpZXIiLCJ0IiwidGFyZ2V0IiwiYmFja2dyb3VuZENvbG9yIiwiUEMiLCJndW5uIiwiZGlyZWN0aW9uIiwicGxheWVyMWNvb3JkIiwicGxheWVyMmNvb3JkIiwiYmF0dGxlc2hpcCIsImNydWlzZXIiLCJzdWJtYXJpbmUiLCJkZXN0cm95ZXIiLCJkb21Nb2R1bGUiLCJudW1iIiwibGV0dGVyciIsImNvbG9yIiwic3EiLCJzdHJpa2UiLCJwbGF5ZXIxc3RyaWtlcyIsInBsYXllcjJzdHJpa2VzIiwiY2VsbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiUGhpdCIsInNob3ciLCJpaSIsIm1vZGFsTW9kdWxlIiwibW9kYWwiLCJidG4iLCJwYXJhMSIsInBhcmEyIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBzYnRucyIsImRpc3BsYXkiLCJjb21wSGl0IiwiY2xvc2VNb2RhbCIsIm9uY2xpY2siLCJmcm5kIiwiY29tcCIsInNob3dNb2R1bGUiLCJwbGF5ZXJTZWxlY3QiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbXBIaXRNb2RhbCIsImNvbXB1dGVyQUkiLCJyYW5kb21JbnRGcm9tSW50ZXJ2YWwiLCJtaW4iLCJtYXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyTm8iLCJ0YXJnZXRBcnJheXkiLCJmaXJlIiwic3BsaWNlIiwic2VsZWN0Q2FycmllciIsInJhbmRvbU5vIiwic2VsZWN0QmF0dGxlc2hpcCIsInNlbGVjdENydWlzZXIiLCJzZWxlY3RTdWJtYXJpbmUiLCJzZWxlY3REZXN0cm95ZXIiLCJzdGFydEdhbWUiLCJ0YXJnZXRBcnJheSIsIlBjcmQiLCJjaGFuUGxheWVyIiwiTCIsIk4iLCJoaXRDb29yZCIsInNtYXJ0VGVsbCIsImdhbWVPdmVyIiwicGxyIiwiY291bnQiLCJwbGF5R2FtZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZWxlY3Rpb25Nb2R1bGUiLCJwMWNhcnJpZXJTaGlwIiwicDFiYXR0bGVTaGlwIiwicDFjcnVpc2VyU2hpcCIsInAxc3VibWFyaW5lU2hpcCIsInAxZGVzdHJveWVyU2hpcCIsImxvb3AiXSwic291cmNlUm9vdCI6IiJ9